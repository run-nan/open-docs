# 插件接口标准错误处理

## 要求

| **ONES** |
| -------- |
| 3.6+     |

## 概述

ONES 的接口在产生错误时，需要返回特定的错误格式才能在前端显示友好的错误提示。所有提供给 ONES 前端调用的接口都需要按标准格式返回错误信息，例如当插件使用[ ONES 接口劫持能力](../business/ONES-API-operation/ONES-API-hijacking.md)劫持接口时，由于替换的是原来的接口，所以在出错时需按标准格式返回错误信息。插件接口标准错误处理能力提供错误信息的规范，让插件接口能以正确的形式返回错误并显示自己的报错提示。

## 能力使用

当插件接口报错时，可以按以下数据结构返回错误内容：

```typescript
return {
  body: {
    code: 502,
    reason: '插件服务不可用',
    type: 'error',
    model: 'plugin.xxx',
  },
}
```

返回参数说明

| 参数   | 类型             | 说明                                |
| ------ | ---------------- | ----------------------------------- |
| code   | number           | 请求错误码                          |
| reason | string           | 错误原因描述                        |
| type   | warning \| error | 错误类型                            |
| model  | plugin.xxx       | 错误的模型(以”plugin.“开头的返回值) |
