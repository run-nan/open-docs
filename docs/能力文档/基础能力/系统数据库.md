---
title: 系统数据库
order: 3
group:
    title: 基础能力
    order: 1
nav:
    title: 能力文档
    order: 4
    toc: menu
---

| 能力代号 | 能力名称   |
| -------- | ---------- |
| SystemDB | 插件数据库 |

## 能力描述

提供访问系统 project 数据库数据能力。

## 能力使用

### 声明

```ts
import { select, count, exec } from '@ones-op/node-system-db'
```

### API

#### select

数据库查询方法

example: 

```ts
async function Select() {
  const result: Record<string, any>[] = await select("select * from email_id_map limit 10;")
  return result
}
```

入参

| 参数 | 类型     | 说明            | 默认值 |
| :--- | -------- | --------------- | ------ |
| sql* | `string` | SQL select 查询 | -      |

返回

| 参数 | 类型       | 说明                                                         |
| ---- | ---------- | ------------------------------------------------------------ |
| data | `object[]` | 对象数组，每一个对象都是一条数据，对象的key是SQL的字段，example: [{email: 'plugin@ones.ai', id_number: '001'}] |

#### exec

数据库操作方法

example:

```ts
async function Exec() {
  await exec("insert", `INSERT INTO email_id_map VALUES ("plugin@ones.ai", "001");`)
}
```

入参

| 参数     | 类型                                                         | 说明        | 默认值 |
| :------- | ------------------------------------------------------------ | ----------- | ------ |
| operate* | `'insert' \| 'update' \| 'delete' \| 'create' \| 'alter' \| 'drop'` | 操作类型    | -      |
| sql*     | `string`                                                     | SQL执行语句 | -      |

返回

| 参数 | 类型 | 说明 |
| ---- | ---- | ---- |
| data | void | -    |

#### count

数据库计数方法

example: 

```ts
async function Count() {
  const c: number = await count("select count(*) from email_id_map;")
  return c
}
```

入参

| 参数 | 类型     | 说明                  | 默认值 |
| :--- | -------- | --------------------- | ------ |
| sql* | `string` | SQL select count 查询 | -      |

返回

| 参数 | 类型     | 说明 |
| ---- | -------- | ---- |
| data | `number` | -    |

## 示例插件

