(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[266],{64773:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/project-custom-component1.756954e.1024.png 1024w,"+n.p+"assets/ideal-img/project-custom-component1.c111700.1464.png 1464w",images:[{path:n.p+"assets/ideal-img/project-custom-component1.756954e.1024.png",width:1024,height:274},{path:n.p+"assets/ideal-img/project-custom-component1.c111700.1464.png",width:1464,height:392}],src:n.p+"assets/ideal-img/project-custom-component1.756954e.1024.png",toString:function(){return n.p+"assets/ideal-img/project-custom-component1.756954e.1024.png"},placeholder:void 0,width:1024,height:274},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAACCAYAAABhYU3QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAATUlEQVQImQXBSwrAIAxAwV5C42cRkOpGIQWx4Kre/1KvM5c9xvkOe2/MjD4G5a6U2siqSI6EGLlaq6z1Muek946qklLCO4d4TxBBRPgBq0wcn5k0ZmMAAAAASUVORK5CYII="}},20181:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/project-custom-component3.c8d239c.1024.png 1024w,"+n.p+"assets/ideal-img/project-custom-component3.d96ad6e.1792.png 1792w,"+n.p+"assets/ideal-img/project-custom-component3.73df879.1920.png 1920w",images:[{path:n.p+"assets/ideal-img/project-custom-component3.c8d239c.1024.png",width:1024,height:454},{path:n.p+"assets/ideal-img/project-custom-component3.d96ad6e.1792.png",width:1792,height:795},{path:n.p+"assets/ideal-img/project-custom-component3.73df879.1920.png",width:1920,height:852}],src:n.p+"assets/ideal-img/project-custom-component3.c8d239c.1024.png",toString:function(){return n.p+"assets/ideal-img/project-custom-component3.c8d239c.1024.png"},placeholder:void 0,width:1024,height:454},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZUlEQVQImW2N2wqAMAxD9///qnZbb2zdIk7xQQwcEmhIUy4MNQOrQ1QREZhzYozxcOdUawVRwZYFPQKXruLXk4hgPzKICKr6Hr6kwoptJ7j5evGnVVT2tcgicHeY2cOdW2voveMEf2bEBns0FQ4AAAAASUVORK5CYII="}},16116:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/project-custom-component4.5b8272b.1024.png 1024w,"+n.p+"assets/ideal-img/project-custom-component4.21168b2.1792.png 1792w,"+n.p+"assets/ideal-img/project-custom-component4.d1e6952.1920.png 1920w",images:[{path:n.p+"assets/ideal-img/project-custom-component4.5b8272b.1024.png",width:1024,height:429},{path:n.p+"assets/ideal-img/project-custom-component4.21168b2.1792.png",width:1792,height:750},{path:n.p+"assets/ideal-img/project-custom-component4.d1e6952.1920.png",width:1920,height:804}],src:n.p+"assets/ideal-img/project-custom-component4.5b8272b.1024.png",toString:function(){return n.p+"assets/ideal-img/project-custom-component4.5b8272b.1024.png"},placeholder:void 0,width:1024,height:429},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYElEQVQImU2MWwoDMRDDcv/jdjPvmWhp+lODMQahtbfg7ogaz1ZEHdXvKpmJRRHZrOfZFzRzVJSIICLvr2qqm+5mffYPMg9U/Vq6h6piZm57hmUiqAqZdY3lxuHwn3MOL/4wnJpQdl2HAAAAAElFTkSuQmCC"}},4480:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/project-custom-component5.094f139.1024.png 1024w,"+n.p+"assets/ideal-img/project-custom-component5.0d8b800.1792.png 1792w,"+n.p+"assets/ideal-img/project-custom-component5.55457dc.1920.png 1920w",images:[{path:n.p+"assets/ideal-img/project-custom-component5.094f139.1024.png",width:1024,height:428},{path:n.p+"assets/ideal-img/project-custom-component5.0d8b800.1792.png",width:1792,height:749},{path:n.p+"assets/ideal-img/project-custom-component5.55457dc.1920.png",width:1920,height:802}],src:n.p+"assets/ideal-img/project-custom-component5.094f139.1024.png",toString:function(){return n.p+"assets/ideal-img/project-custom-component5.094f139.1024.png"},placeholder:void 0,width:1024,height:428},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQUlEQVQImYXMQQrAQAgDQP//3FbF1WjKtvduYCCHEFE1ZibXSroHgWLVBgKf7qbcapzhb2aGcmm85UTCnPvwNHwAlCeePOKD9wMAAAAASUVORK5CYII="}},17942:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>l,kt:()=>g});var o=n(50959);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},p=Object.keys(e);for(o=0;o<p.length;o++)n=p[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(o=0;o<p.length;o++)n=p[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var r=o.createContext({}),c=function(e){var t=o.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=c(e.components);return o.createElement(r.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,p=e.originalType,r=e.parentName,l=a(e,["components","mdxType","originalType","parentName"]),m=c(n),u=i,g=m["".concat(r,".").concat(u)]||m[u]||d[u]||p;return n?o.createElement(g,s(s({ref:t},l),{},{components:n})):o.createElement(g,s({ref:t},l))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var p=n.length,s=new Array(p);s[0]=u;var a={};for(var r in t)hasOwnProperty.call(t,r)&&(a[r]=t[r]);a.originalType=e,a[m]="string"==typeof e?e:i,s[1]=a;for(var c=2;c<p;c++)s[c]=n[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},74710:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>A,contentTitle:()=>h,default:()=>v,frontMatter:()=>g,metadata:()=>f,toc:()=>b});var o=n(28957),i=(n(50959),n(17942)),p=n(64773),s=n.n(p),a=n(20181),r=n.n(a),c=n(16116),l=n.n(c),m=n(4480),d=n.n(m),u=n(49500);const g={sidebar_position:6,description:"Create a custom project component."},h="Customize project components",f={unversionedId:"abilities/business/project/project-custom-component/project-custom-component",id:"abilities/business/project/project-custom-component/project-custom-component",title:"Customize project components",description:"Create a custom project component.",source:"@site/docs/abilities/business/project/project-custom-component/project-custom-component.mdx",sourceDirName:"abilities/business/project/project-custom-component",slug:"/abilities/business/project/project-custom-component/",permalink:"/open-docs/docs/abilities/business/project/project-custom-component/",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1703495563,formattedLastUpdatedAt:"Dec 25, 2023",sidebarPosition:6,frontMatter:{sidebar_position:6,description:"Create a custom project component."},sidebar:"abilities",previous:{title:"Upload issue attachment",permalink:"/open-docs/docs/abilities/business/project/upload-to-issue/"},next:{title:"Scene: Statistics of Sprint working hours within a project",permalink:"/open-docs/docs/abilities/business/project/project-custom-component/sample-project-custom-component1"}},A={},b=[{value:"Requirements",id:"requirements",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Step 1\uff1aAdd and use ability through the OP tool",id:"step-1add-and-use-ability-through-the-op-tool",level:3},{value:"Step 2\uff1aComplete the function of custom components",id:"step-2complete-the-function-of-custom-components",level:3},{value:"Component design",id:"component-design",level:4},{value:"Custom component data replication function",id:"custom-component-data-replication-function",level:4},{value:"Step 3\uff1aInstall and enable the plugin",id:"step-3install-and-enable-the-plugin",level:3},{value:"Examples",id:"examples",level:2}],k=(j="Image",function(e){return u.warn("Component "+j+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)});var j;const y={toc:b},w="wrapper";function v(e){let{components:t,...n}=e;return(0,i.kt)(w,(0,o.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"customize-project-components"},"Customize project components"),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"ONES"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"v3.11.16+")))),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"The plugin uses this ability to add custom components to the project of the ONES, and users can use it according to the uniform standard of the ONES -- the order of custom components in the navigation bar and the basic configuration."),(0,i.kt)("p",null,"Plugin developers can customize the content of the component"),(0,i.kt)(k,{img:d(),mdxType:"Image"}),(0,i.kt)("p",null,"Custom components are used in the same way as other components"),(0,i.kt)(k,{img:l(),mdxType:"Image"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Properties of custom components")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Users can customize the UI and functionality of the component\uff1b"),(0,i.kt)("li",{parentName:"ul"},"Support user to configure component name and component description\uff1b"),(0,i.kt)("li",{parentName:"ul"},"When the plugin that hosts this ability is enabled, the custom components defined by this ability will appear in the component library of each project, and users can use these components according to the uniform standard of the ONES\uff1b"),(0,i.kt)("li",{parentName:"ul"},"When the plugin that hosts this ability is unabled/uninstalled, the custom components defined by this ability and the objects created by the user using these components are deleted from the project\uff1b"),(0,i.kt)("li",{parentName:"ul"},"Allows developers copy the contents of custom components between different projects\uff1b")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Scenes for custom components")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Functional scenarios that cannot be satisfied by the existing components of the ONES\uff1b"),(0,i.kt)("li",{parentName:"ul"},"User-defined more diverse project configuration requirements scenarios")),(0,i.kt)("p",null,"Use ability ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"/open-docs/docs/guide/abilities/multilingual"},"Plugin multilingual support"))," if custom components need to consider multilingual scenarios"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"This ability must be used in conjunction with the front-end slot ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"/open-docs/docs/abilities/slot/module/project/component/"},"ones:project:component:new")))),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("p",null,"To use this ability,developers need to add the backend ability ",(0,i.kt)("inlineCode",{parentName:"p"},"Custom project components")," and the front-end slot ",(0,i.kt)("inlineCode",{parentName:"p"},"ones:project:component:new"),"\uff0cand then implement your own custom component function in the code."),(0,i.kt)("h3",{id:"step-1add-and-use-ability-through-the-op-tool"},"Step 1\uff1aAdd and use ability through the OP tool"),(0,i.kt)("p",null,"Use the Command Line to enter the OP command in the plugin root directory to add ability (this directive requires OP tool version 1.0 or above)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"npx op add ability\n")),(0,i.kt)("p",null,"Select and add ",(0,i.kt)("inlineCode",{parentName:"p"},"project-custom-component@1.0.0"),", fill in the name of the relate slot ",(0,i.kt)("inlineCode",{parentName:"p"},"ones:project:component:new")," according to the prompt."),(0,i.kt)(k,{img:s(),mdxType:"Image"}),(0,i.kt)("p",null,"the OP tool will add the following to the plugin"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The OP tool adds ",(0,i.kt)("inlineCode",{parentName:"p"},"abilitiy"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"modules")," field related paragraphs in ",(0,i.kt)("inlineCode",{parentName:"p"},"{{plugin root directory}}/config/plugin.yaml")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"service:\n  app_id: ...\n  name: ability-project-custom-component\n  ...\n  ...\nmodules:\n  - id: ones-project-component-new-weUW\n    title: customComponent1\n    moduleType: ones:project:component:new\n    entry: modules/ones-project-component-new-weUW/index.html\nabilities:\n  - id: ...\n    name: project_custom_component_test\n    version: 1.0.0\n    abilityType: ProjectCustomComponent\n    function:\n      #Name of the plugin data copy method\n      copyPluginData: copyTest\n    relateModule:\n      #Custom component entry\n      componentModuleEnter: 'ones-project-component-new-weUW'\n    config:\n      - key: component_name\n        label: project custom component\n        value: project custom component\n        fieldType: Input\n        show: true\n      - key: component_desc\n        label: custom component description\n        value: ''\n        fieldType: TextArea\n        show: true\n        props:\n          placeholder: custom component description,allow to leave blank\n      - key: is_support_copy\n        label: is_support_data_copy\n        #If the value is set to true,need to complete the copytest method\n        value: true\n        fieldType: Switch\n        show: false\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"ones-project-component-new-weUW")," directory is created in ",(0,i.kt)("inlineCode",{parentName:"p"},"web/src"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"project-custom-component.ts")," file is created in ",(0,i.kt)("inlineCode",{parentName:"p"},"backend/src")," directory.If the developer wants to implement the data replication function of custom project components among multiple projects, the developer can do it in the ",(0,i.kt)("inlineCode",{parentName:"p"},"copyTest")," method in this file."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Logger } from '@ones-op/node-logger'\nimport type { PluginRequest, PluginResponse } from '@ones-op/node-types'\n\n// Wants to implement the data copy of the custom component, it needs to be done within this method.\nexport const copyTest = async (request: PluginRequest): Promise<PluginResponse> => {\n  Logger.info('copyTest  enter')\n  const body = request?.body as any\n\n  let srcProjectUUID = body.srcProjectUUID\n  let dstProjectUUID = body.dstProjectUUID\n\n  Logger.info(\n    '[Plugin] copyTest',\n    'url:',\n    request.url,\n    'srcProjectUUID:',\n    srcProjectUUID,\n    'dstProjectUUID:',\n    dstProjectUUID,\n  )\n\n  return {\n    body: {\n      code: 200,\n      body: {\n        state: 0,\n        message: 'success',\n      },\n    },\n  }\n}\n")))),(0,i.kt)("h3",{id:"step-2complete-the-function-of-custom-components"},"Step 2\uff1aComplete the function of custom components"),(0,i.kt)("p",null,"In step 2,developers need to complete their own custom component function design according to their actual needs."),(0,i.kt)("h4",{id:"component-design"},"Component design"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"web/src/modules/ones-project-component-new-weUW/index.tsx")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { ConfigProvider } from '@ones-design/core'\nimport './index.css'\n\nReactDOM.render(\n  <ConfigProvider>customComponent1</ConfigProvider>,\n  document.getElementById('ones-mf-root')\n)\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"web/src/modules/ones-project-component-new-weUW/index.css")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"#ones-mf-root {}\n")),(0,i.kt)("h4",{id:"custom-component-data-replication-function"},"Custom component data replication function"),(0,i.kt)("p",null,"Developers need to complete their plugin data replication logic in the ",(0,i.kt)("inlineCode",{parentName:"p"},"copyTest")," function under the file ",(0,i.kt)("inlineCode",{parentName:"p"},"backend/src/project-custom-component.ts"),"."),(0,i.kt)("h3",{id:"step-3install-and-enable-the-plugin"},"Step 3\uff1aInstall and enable the plugin"),(0,i.kt)("p",null,"Install and enable the plugin, if the ",(0,i.kt)("inlineCode",{parentName:"p"},"abilities.relateModule.componentModuleEnter")," configuration is not filled in under ",(0,i.kt)("inlineCode",{parentName:"p"},"config/plugin.yaml"),",it will cause a mistake."),(0,i.kt)("p",null,"You can configure the name and description of custom components on the plugin details page in ",(0,i.kt)("inlineCode",{parentName:"p"},"Configuration -> Plugin Management-> Normal plugin"),", as shown in the following figure."),(0,i.kt)(k,{img:r(),mdxType:"Image"}),(0,i.kt)("p",null,"In the left column of ",(0,i.kt)("inlineCode",{parentName:"p"},"ONES Project->{{any Projec}}-> Setting -> Componennt")," , the custom component is located in ",(0,i.kt)("inlineCode",{parentName:"p"},"plugin component")," title and is used in the same way as other components"),(0,i.kt)(k,{img:l(),mdxType:"Image"}),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/open-docs/docs/abilities/business/project/project-custom-component/sample-project-custom-component1"},"Statistics of Sprint working hours within a project"))))}v.isMDXComponent=!0}}]);