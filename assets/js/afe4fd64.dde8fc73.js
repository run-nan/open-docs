"use strict";(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[3908],{17942:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>m});var i=r(50959);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=i.createContext({}),s=function(e){var t=i.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=s(e.components);return i.createElement(p.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},f=i.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=s(r),f=n,m=c["".concat(p,".").concat(f)]||c[f]||u[f]||a;return r?i.createElement(m,o(o({ref:t},d),{},{components:r})):i.createElement(m,o({ref:t},d))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,o=new Array(a);o[0]=f;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:n,o[1]=l;for(var s=2;s<a;s++)o[s]=r[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,r)}f.displayName="MDXCreateElement"},39730:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var i=r(28957),n=(r(50959),r(17942));const a={sidebar_position:3},o="Modify script properties",l={unversionedId:"abilities/business/project/field/update-script-field/update-script-field",id:"abilities/business/project/field/update-script-field/update-script-field",title:"Modify script properties",description:"Require",source:"@site/docs/abilities/business/project/field/update-script-field/update-script-field.md",sourceDirName:"abilities/business/project/field/update-script-field",slug:"/abilities/business/project/field/update-script-field/",permalink:"/open-docs/docs/abilities/business/project/field/update-script-field/",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1703234094,formattedLastUpdatedAt:"Dec 22, 2023",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"abilities",previous:{title:"Scene: Automatically count the number of relationships of a certain link type of issue",permalink:"/open-docs/docs/abilities/business/project/field/script-field-float/sample-script-field-float"},next:{title:"Intercept issue field modifications",permalink:"/open-docs/docs/abilities/business/project/task-event-handler/"}},p={},s=[{value:"Require",id:"require",level:2},{value:"Overview",id:"overview",level:2},{value:"Capability range",id:"capability-range",level:3},{value:"use",id:"use",level:2},{value:"Step 1: Add and use capabilities through OP tools",id:"step-1-add-and-use-capabilities-through-op-tools",level:3},{value:"Step 2: Just modify the logic in the function correctly",id:"step-2-just-modify-the-logic-in-the-function-correctly",level:3}],d={toc:s},c="wrapper";function u(e){let{components:t,...r}=e;return(0,n.kt)(c,(0,i.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"modify-script-properties"},"Modify script properties"),(0,n.kt)("h2",{id:"require"},"Require"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"ONES"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"v3.16.18+")))),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,"After we create the script attribute, we can make secondary modifications to the script attribute. Currently, the name of the script attribute can be modified."),(0,n.kt)("h3",{id:"capability-range"},"Capability range"),(0,n.kt)("p",null,"Products, work items, single selection, multiple selection, floating point script attributes under the project"),(0,n.kt)("h2",{id:"use"},"use"),(0,n.kt)("p",null,"Add the capability through the OP tool, modify the configuration related to the capability, and complete the business logic in the update script attribute method. The relevant steps are as follows."),(0,n.kt)("h3",{id:"step-1-add-and-use-capabilities-through-op-tools"},"Step 1: Add and use capabilities through OP tools"),(0,n.kt)("p",null,"Use the command line to enter the OP command in the ",(0,n.kt)("inlineCode",{parentName:"p"},"plug-in root directory")," to add capabilities (this command requires OP tool version 1.0 and above)"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"npx op add ability\n")),(0,n.kt)("p",null,"Check and add ",(0,n.kt)("inlineCode",{parentName:"p"},"update-script-field@1.0.0")),(0,n.kt)("br",null),"The OP tool will ask whether to use the default value. Just select Yes. The OP tool will add the following content to the plug-in.",(0,n.kt)("p",null,"Add a new file ",(0,n.kt)("inlineCode",{parentName:"p"},"update-script-field.ts")," in the plugin backend"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="backend/src/script-field-float.ts"',title:'"backend/src/script-field-float.ts"'},"import type {\n  Relation,\n  UpdateFieldGroupRequest,\n  UpdateScriptFieldRequest,\n} from '@ones-op/node-ability'\nimport { Field, FieldTypeEnum, PoolEnum, AbilityError } from '@ones-op/node-ability'\nimport { Logger } from '@ones-op/node-logger'\nimport type { PluginRequest, PluginResponse } from '@ones-op/node-types'\n\nexport async function updateFieldName(request: PluginRequest): Promise<PluginResponse> {\n  const u: UpdateScriptFieldRequest = {\n    Pool: PoolEnum.Product,\n    FieldUUID: 'fieldUUID',\n    TeamUUID: 'teamUUID',\n    Name: 'newFieldName',\n  }\n  try {\n    const resp = await Field.UpdateScriptField(u)\n  } catch (e) {\n    if (e instanceof AbilityError) {\n      Logger.error('err', e)\n    }\n  }\n  return {\n    body: {\n      res: 'hello world',\n    },\n  }\n}\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Field.UpdateScriptFieldRequest parameter introduction")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Parameters"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Pool"),(0,n.kt)("td",{parentName:"tr",align:"left"},"string"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The context to which the script attribute belongs, including products, projects, and work items")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"FieldUUID"),(0,n.kt)("td",{parentName:"tr",align:"left"},"string"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Script attribute UUID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"TeamUUID"),(0,n.kt)("td",{parentName:"tr",align:"left"},"string"),(0,n.kt)("td",{parentName:"tr",align:"left"},"UUID of the team to which the attribute belongs,only takes effect when the plug-in is at the organization level")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Name"),(0,n.kt)("td",{parentName:"tr",align:"left"},"string"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The new name of the script property")))),(0,n.kt)("h3",{id:"step-2-just-modify-the-logic-in-the-function-correctly"},"Step 2: Just modify the logic in the function correctly"))}u.isMDXComponent=!0}}]);