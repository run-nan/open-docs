(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[83205],{58170:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/progress-manager1.dc59520.378.png 378w",images:[{path:a.p+"assets/ideal-img/progress-manager1.dc59520.378.png",width:378,height:347}],src:a.p+"assets/ideal-img/progress-manager1.dc59520.378.png",toString:function(){return a.p+"assets/ideal-img/progress-manager1.dc59520.378.png"},placeholder:void 0,width:378,height:347},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2klEQVQYlVXN22rCUBSE4bz/w9UiVrBpEdHU6I4xh31a+5C/JK2CC4a5+ZhVyHBHHfZcj0fC0EMQ8A68J6eEtRYRoVi97Vl9HHBNhWkVvmtwXYO0inxTTIAeR4rd9kT5fUbuNfp2ecY2NVPXMl/f9xTrH2Fz6pFoGMWhxS5xwTPNcw/4qQJfypKniOREyGnpOGWmf7nAbR3YXQwuOYbgGaNf2kZ5he+VsK5GJDnGKJgo6OhxKbzCUkXKqyYkj01hAXP7FJ/QGPO3uDlrfHb08+swv3bL8gPmnPkFnddavbiOaFkAAAAASUVORK5CYII="}},31472:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/progress-manager2.5ac0e49.380.png 380w",images:[{path:a.p+"assets/ideal-img/progress-manager2.5ac0e49.380.png",width:380,height:348}],src:a.p+"assets/ideal-img/progress-manager2.5ac0e49.380.png",toString:function(){return a.p+"assets/ideal-img/progress-manager2.5ac0e49.380.png"},placeholder:void 0,width:380,height:348},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVQYlU2MT0tCQRRH3/ffpS8efg/bt2gRZYgGRdssVPDp+Ob/3Jk54TOiC4e7+B1Oo52w3fdsNp8odcJ7j3MOa+34L8QYaXK/5Pv9nptJx6S9pes62rZlNpvRTqfczecYY2jKaU3creiPlv3gGbRGaz2OatBYH1FK0eTDI+7rmXz2YC3/LxUIBZQ605TjCrNbY2wgxUDKmVrriE8FJ3C6FEv/gj68oiRjc8TlNEpjMZexei0eFgy7JecohJwIWeDqEaRgUyXGRFPUG/b4gZFCLDLyGyTlSpCKSKYp+wfU9ok+JIx4rMQ/8SK5VEki/ABr81Qm2Uil0QAAAABJRU5ErkJggg=="}},45373:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/progress-manager3.bd0c11a.522.png 522w",images:[{path:a.p+"assets/ideal-img/progress-manager3.bd0c11a.522.png",width:522,height:238}],src:a.p+"assets/ideal-img/progress-manager3.bd0c11a.522.png",toString:function(){return a.p+"assets/ideal-img/progress-manager3.bd0c11a.522.png"},placeholder:void 0,width:522,height:238},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAVElEQVQImVWOQQ6AIAwE+f8v9Y5ExKZgYc2CkDjJts1mDnUxXlBVkNpq3+NuaF/MDI6DsCAh3zhyWt3sf6JYwZ48tuSh9iyRWSKRogjx7JE83pniC4b0nYGXe8odAAAAAElFTkSuQmCC"}},696:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/progress-manager4.f370e33.520.png 520w",images:[{path:a.p+"assets/ideal-img/progress-manager4.f370e33.520.png",width:520,height:451}],src:a.p+"assets/ideal-img/progress-manager4.f370e33.520.png",toString:function(){return a.p+"assets/ideal-img/progress-manager4.f370e33.520.png"},placeholder:void 0,width:520,height:451},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVQYlWWQjQrDIAyEff+XbEFGB8UqKrb+1BuXzbLSwKGGL8kZtW0bvPdoraGUglqrqNTvnbnjOKD4IDSink3E6L1fUgM4+ynnKznoZH+5LhDjAhkuJ7yjxcsb2D3euqoYI9Z1RQgBKSXxG+i51jtorcWyLAITyjmLHh7563meYYz5d/EECUzTBK21dOUEFjvnZC2jQNbDXVH7vstYAmNlo+MH3kJfdDS56qIAAAAASUVORK5CYII="}},18679:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(67294),r=a(34334);const s="tabItem_Ymn6";function l(e){let{children:t,hidden:a,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(s,l),hidden:a},t)}},34259:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(87462),r=a(67294),s=a(34334),l=a(51048),o=a(33609),i=a(1943),p=a(72957);const g="tabList__CuJ",d="tabItem_LNqP";function m(e){var t,a;const{lazy:l,block:m,defaultValue:u,values:c,groupId:k,className:f}=e,h=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),N=null!=c?c:h.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),b=(0,o.l)(N,((e,t)=>e.value===t.value));if(b.length>0)throw new Error('Docusaurus error: Duplicate values "'+b.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const y=null===u?u:null!=(t=null!=u?u:null==(a=h.find((e=>e.props.default)))?void 0:a.props.value)?t:h[0].props.value;if(null!==y&&!N.some((e=>e.value===y)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+N.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:A,setTabGroupChoices:P}=(0,i.U)(),[v,w]=(0,r.useState)(y),D=[],{blockElementScrollPositionUntilNextRender:C}=(0,p.o5)();if(null!=k){const e=A[k];null!=e&&e!==v&&N.some((t=>t.value===e))&&w(e)}const M=e=>{const t=e.currentTarget,a=D.indexOf(t),n=N[a].value;n!==v&&(C(t),w(n),null!=k&&P(k,String(n)))},U=e=>{var t;let a=null;switch(e.key){case"Enter":M(e);break;case"ArrowRight":{var n;const t=D.indexOf(e.currentTarget)+1;a=null!=(n=D[t])?n:D[0];break}case"ArrowLeft":{var r;const t=D.indexOf(e.currentTarget)-1;a=null!=(r=D[t])?r:D[D.length-1];break}}null==(t=a)||t.focus()};return r.createElement("div",{className:(0,s.Z)("tabs-container",g)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":m},f)},N.map((e=>{let{value:t,label:a,attributes:l}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,key:t,ref:e=>D.push(e),onKeyDown:U,onClick:M},l,{className:(0,s.Z)("tabs__item",d,null==l?void 0:l.className,{"tabs__item--active":v===t})}),null!=a?a:t)}))),l?(0,r.cloneElement)(h.filter((e=>e.props.value===v))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==v})))))}function u(e){const t=(0,l.Z)();return r.createElement(m,(0,n.Z)({key:String(t)},e))}},48909:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>b,contentTitle:()=>h,default:()=>P,frontMatter:()=>f,metadata:()=>N,toc:()=>y});var n=a(87462),r=(a(67294),a(3905)),s=a(15944),l=a(34259),o=a(18679),i=a(58170),p=a.n(i),g=a(31472),d=a.n(g),m=a(45373),u=a.n(m),c=a(696),k=a.n(c);const f={sidebar_position:9,description:"Simple progress feedback method.",toc_max_heading_level:4},h="Progress manager",N={unversionedId:"abilities/business/progress-manager/progress-manager",id:"abilities/business/progress-manager/progress-manager",title:"Progress manager",description:"Simple progress feedback method.",source:"@site/docs/abilities/business/progress-manager/progress-manager.mdx",sourceDirName:"abilities/business/progress-manager",slug:"/abilities/business/progress-manager/",permalink:"/open-docs/docs/next/abilities/business/progress-manager/",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1690862808,formattedLastUpdatedAt:"Aug 1, 2023",sidebarPosition:9,frontMatter:{sidebar_position:9,description:"Simple progress feedback method.",toc_max_heading_level:4},sidebar:"abilities",previous:{title:"Sidebar menu",permalink:"/open-docs/docs/next/abilities/business/sidebar-menu"},next:{title:"Independent hosting service",permalink:"/open-docs/docs/next/abilities/business/Independent-hosting-service/"}},b={},y=[{value:"Requirements",id:"requirements",level:2},{value:"Overview",id:"overview",level:2},{value:"Download Progress Manager",id:"download-progress-manager",level:3},{value:"Datasync Progress Manager",id:"datasync-progress-manager",level:3},{value:"Usage",id:"usage",level:2},{value:"Plugin backend method",id:"plugin-backend-method",level:3},{value:"create Progress Manager",id:"create-progress-manager",level:4},{value:"LanguagePkg",id:"LanguagePkg",level:5},{value:"update progress",id:"update-progress",level:4},{value:"Complete the Progress Manager",id:"complete-the-progress-manager",level:4},{value:"ProcessResult",id:"ProcessResult",level:5},{value:"The plugin frontend calls up the Progress Manager",id:"the-plugin-frontend-calls-up-the-progress-manager",level:3},{value:"Step 1\uff1aInstallation dependency",id:"step-1installation-dependency",level:4},{value:"Step 2\uff1aCall up the Progress Manager",id:"step-2call-up-the-progress-manager",level:4},{value:"Progress Manager slot replacement",id:"progress-manager-slot-replacement",level:3},{value:"Step 1: Add and complete the function of Process Manager module",id:"step-1-add-and-complete-the-function-of-process-manager-module",level:4},{value:"Step 2\uff1aPassed moduleid of Process Manager module when create <strong>Download Progress Manager</strong>",id:"step-2passed-moduleid-of-process-manager-module-when-create-download-progress-manager",level:4},{value:"Step 3\uff1aComplete <code>done</code> method and build parameter payload",id:"step-3complete-done-method-and-build-parameter-payload",level:4}],A={toc:y};function P(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},A,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"progress-manager"},"Progress manager"),(0,r.kt)("h2",{id:"requirements"},"Requirements"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"ONES"),(0,r.kt)("th",{parentName:"tr",align:"left"},"@ones-op/node-ability"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"v3.11.0+"),(0,r.kt)("td",{parentName:"tr",align:"left"},"v0.4.1+")))),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"This ability implements a Progress Manager for the plugin, which can be used to visualize the progress of the task when the plugin is performing download tasks or batch operations, and can define copywriting displays in different languages."),(0,r.kt)("p",null,"Currently, there are two types of Progress Managers: ",(0,r.kt)("strong",{parentName:"p"},"Download Progress Manager")," and ",(0,r.kt)("strong",{parentName:"p"},"Datasync Progress Manager"),"."),(0,r.kt)("h3",{id:"download-progress-manager"},"Download Progress Manager"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Download Progress Manager")," can download any specified file under the plugin storage space ",(0,r.kt)("inlineCode",{parentName:"p"},"workspace")," directory"),(0,r.kt)("p",null,"Can view the progress of file download through the ",(0,r.kt)("strong",{parentName:"p"},"Download Progress Manager"),". Each progress is divided into ",(0,r.kt)("inlineCode",{parentName:"p"},"generating files"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"operation failed"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"file generation has been completed, and export has started"),".When the progress is ",(0,r.kt)("inlineCode",{parentName:"p"},"operation failed"),",can view the details of the failure."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Download Progress Manager")," start downloading files when the progress is complete.")),(0,r.kt)(s.Z,{img:p(),mdxType:"Image"}),(0,r.kt)("h3",{id:"datasync-progress-manager"},"Datasync Progress Manager"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Datasync Progress Manager")," can display the progress of batch operations.For each progress, you can see the ",(0,r.kt)("inlineCode",{parentName:"p"},"currentSuccessfulCount"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"currentSuccessfulCount"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"currentSuccessfulCount"),".After the progress is completed (regardless of success or failure), you can view the details."),(0,r.kt)(s.Z,{img:d(),mdxType:"Image"}),(0,r.kt)("br",null),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Datasync Progress Manager")," supports refactoring the progress details page using ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/open-docs/docs/next/abilities/slot/global/progress-detail/"},"Process Manager module")))),(0,r.kt)("br",null),(0,r.kt)(s.Z,{img:u(),mdxType:"Image"}),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("h3",{id:"plugin-backend-method"},"Plugin backend method"),(0,r.kt)("h4",{id:"create-progress-manager"},"create Progress Manager"),(0,r.kt)("p",null,"Create different types of Progress Managers through the ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," method provided in SDK, specify the time limit and title of the Progress Manager, and return the Progress Manager ID ",(0,r.kt)("inlineCode",{parentName:"p"},"processUUID")," after successful creation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="backend/src/index.ts"',title:'"backend/src/index.ts"'},"import type { PluginRequest, PluginResponse } from '@ones-op/node-types'\nimport { Process, LanguagePkg, ProcessType, ProcessResult } from '@ones-op/node-ability'\n\nexport async function createProcess(request: PluginRequest): Promise<PluginResponse> {\n  //Get parameters from request\n  const { user_uuid, title, timeout } = request?.body as any\n  //Progress Manager Multilingual Titles\n  const titlePkg: LanguagePkg = {\n    en: 'file',\n    zh: title,\n  }\n  //Create a progress manager and get the return value processUUID\n  const processUUID = await Process.create(ProcessType.DownloadFile, user_uuid, titlePkg, timeout)\n\n  return {\n    body: {\n      process_uuid: processUUID,\n    },\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"create")," Param")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Params")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Param"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Required"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"processType"),(0,r.kt)("td",{parentName:"tr",align:"left"},"type of Progress Manager,Optional values: ",(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"Download Progress Manager"),":ProcessType.DownloadFile ",(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"Datasync Progress Manager"),":ProcessType.DataSync"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"userUUID"),(0,r.kt)("td",{parentName:"tr",align:"left"},"uuid of user"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"title"),(0,r.kt)("td",{parentName:"tr",align:"left"},"title of progress"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"#LanguagePkg"},"LanguagePkg")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"timeoutSeconds"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Timeout limit, if the Progress Manager is not completed within the time limit, it fails."),(0,r.kt)("td",{parentName:"tr",align:"left"},"number"),(0,r.kt)("td",{parentName:"tr",align:"left"},"N"),(0,r.kt)("td",{parentName:"tr",align:"left"},"60(s)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"moduleID"),(0,r.kt)("td",{parentName:"tr",align:"left"},"moduleID of Progress Manager\uff08only applicable to ",(0,r.kt)("strong",{parentName:"td"},"Datasync Progress Manager"),"\uff09"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"N"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"teamUUID"),(0,r.kt)("td",{parentName:"tr",align:"left"},"uuid of the team which the Progress Manager belongs\uff0conly if the plugin is used at the organizational level"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"N"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")))),(0,r.kt)("h5",{id:"LanguagePkg"},"LanguagePkg"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Param"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Required"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"zh"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Chinese title"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"en"),(0,r.kt)("td",{parentName:"tr",align:"left"},"English title"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returns")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Param"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"processUUID"),(0,r.kt)("td",{parentName:"tr",align:"left"},"the uuid of Progress Manager"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string")))),(0,r.kt)("h4",{id:"update-progress"},"update progress"),(0,r.kt)("p",null,"Select a Progress Manager to update the progress through the ",(0,r.kt)("inlineCode",{parentName:"p"},"update")," method provided in SDK"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="backend/src/index.ts"',title:'"backend/src/index.ts"'},"import type { PluginRequest, PluginResponse } from '@ones-op/node-types'\nimport { Process, LanguagePkg, ProcessType, ProcessResult } from '@ones-op/node-ability'\n\nexport async function updateProgress(request: PluginRequest): Promise<PluginResponse> {\n  //Get parameters from request\n  const { process_uuid: processUUID } = request?.body as any\n  const currentSuccessfulCount = 10\n  const currentFailedCount = 5\n  const currentRemainingCount = 30\n  //Progress Manager Update\n  await Process.update(\n    processUUID,\n    currentSuccessfulCount,\n    currentFailedCount,\n    currentRemainingCount\n  )\n  return {\n    body: {\n      status: 'ok',\n    },\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"update"),"Param")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Param"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Required"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"processUUID"),(0,r.kt)("td",{parentName:"tr",align:"left"},"uuid of Process Manager"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"currentSuccessfulCount"),(0,r.kt)("td",{parentName:"tr",align:"left"},"current number of completions"),(0,r.kt)("td",{parentName:"tr",align:"left"},"number"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"currentFailedCount"),(0,r.kt)("td",{parentName:"tr",align:"left"},"current number of failures"),(0,r.kt)("td",{parentName:"tr",align:"left"},"number"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"currentRemainingCount"),(0,r.kt)("td",{parentName:"tr",align:"left"},"current remaining number"),(0,r.kt)("td",{parentName:"tr",align:"left"},"number"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")))),(0,r.kt)("h4",{id:"complete-the-progress-manager"},"Complete the Progress Manager"),(0,r.kt)("p",null,"Complete the Progress Manager through the ",(0,r.kt)("inlineCode",{parentName:"p"},"done")," method provided in SDK. ",(0,r.kt)("strong",{parentName:"p"},"Download progress manager")," starts downloading files when the progress is completed.",(0,r.kt)("strong",{parentName:"p"},"Datasync Progress Manager")," can view the details when it is completed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="backend/src/index.ts"',title:'"backend/src/index.ts"'},"import type { PluginRequest, PluginResponse } from '@ones-op/node-types'\nimport { Process, LanguagePkg, ProcessType, ProcessResult } from '@ones-op/node-ability'\n\nexport async function doneProcess(request: PluginRequest): Promise<PluginResponse> {\n  //Get parameters from request\n  const { process_uuid: processUUID } = request?.body as any\n  //Multilingual details\n  const resultText: LanguagePkg = {\n    en: 'content',\n    zh: '\u8be6\u60c5\u5185\u5bb9',\n  }\n  //The action when the progress manager is completed, the download progress manager downloads the specified file, and the data synchronization progress manager can display additional content\n  const payload: ProcessResult = {\n    filePath: './plugin.sql',\n  }\n\n  const isSuccess = true\n  //Complete schedule\n  await Process.done(processUUID, isSuccess, resultText, payload)\n\n  return {\n    body: {\n      status: 'ok',\n      process_uuid: processUUID,\n    },\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"done")," Param")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Param"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Required"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"processUUID"),(0,r.kt)("td",{parentName:"tr",align:"left"},"uuid of Process Manager"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"isSuccess"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Success or failure"),(0,r.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"resultText"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Details"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"#LanguagePkg"},"LanguagePkg")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"payload"),(0,r.kt)("td",{parentName:"tr",align:"left"},"The action at completion"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"#ProcessResult"},"ProcessResult")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")))),(0,r.kt)("h5",{id:"ProcessResult"},"ProcessResult"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Param"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Required"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"filePath"),(0,r.kt)("td",{parentName:"tr",align:"left"},"File path,available when ",(0,r.kt)("strong",{parentName:"td"},"Download Progress Manager")),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"N"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"data"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Extra content,available when ",(0,r.kt)("strong",{parentName:"td"},"Datasync Progress Manager")),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"N"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-")))),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"DonwloadProgress",label:"Download Progress Manager",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const payload: ProcessResult = {\n  //The root directory is the plugin directory\n  filePath: './plugin.sql',\n}\n"))),(0,r.kt)(o.Z,{value:"DataSyncProgress",label:"Datasync Progress Manager",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const payload: ProcessResult = {\n  //Extra content other than resultText\n  data: 'anything u want',\n}\n")))),(0,r.kt)("h3",{id:"the-plugin-frontend-calls-up-the-progress-manager"},"The plugin frontend calls up the Progress Manager"),(0,r.kt)("h4",{id:"step-1installation-dependency"},"Step 1\uff1aInstallation dependency"),(0,r.kt)("p",null,"Enter the ",(0,r.kt)("inlineCode",{parentName:"p"},"web")," directory of the plugin project, and execute the following command for dependent installation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"npm i @ones-op/event\n")),(0,r.kt)("h4",{id:"step-2call-up-the-progress-manager"},"Step 2\uff1aCall up the Progress Manager"),(0,r.kt)("p",null,"The progress manager only needs to call it up once"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"//call the global progress manager\nMFDispatch('invoke:ones:global:progressManager')\n")),(0,r.kt)("h3",{id:"progress-manager-slot-replacement"},"Progress Manager slot replacement"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Datasync Progress Manager")," supports refactoring the progress details page using ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/open-docs/docs/next/abilities/slot/global/progress-detail/"},"Process Manager module"))),(0,r.kt)("h4",{id:"step-1-add-and-complete-the-function-of-process-manager-module"},"Step 1: Add and complete the function of ",(0,r.kt)("a",{parentName:"h4",href:"/open-docs/docs/next/abilities/slot/global/progress-detail/"},"Process Manager module")),(0,r.kt)("h4",{id:"step-2passed-moduleid-of-process-manager-module-when-create-download-progress-manager"},"Step 2\uff1aPassed moduleid of ",(0,r.kt)("a",{parentName:"h4",href:"/open-docs/docs/next/abilities/slot/global/progress-detail/"},"Process Manager module")," when create ",(0,r.kt)("strong",{parentName:"h4"},"Download Progress Manager")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Moduleid is obtained from the plugin configuration file ",(0,r.kt)("inlineCode",{parentName:"p"},"config/plugin.yaml")," after adding slots.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"export async funtion createDataProgress (request: PluginRequest): Promise<PluginResponse> {\n  const { user_uuid, title, timeout } = request?.body as any\n\n  const titlePkg: LanguagePkg = {\n    en: 'process title',\n    zh: title,\n  }\n\n  const processUUID = await Process.create(ProcessType.DataSync, user_uuid, titlePkg, timeout,\"ones-global-progress-detail-BUTc\")\n\n  return {\n    body: {\n      process_uuid: processUUID,\n      result_text: titlePkg\n    },\n  }\n}\n")),(0,r.kt)("h4",{id:"step-3complete-done-method-and-build-parameter-payload"},"Step 3\uff1aComplete ",(0,r.kt)("inlineCode",{parentName:"h4"},"done")," method and build parameter payload"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"export async function doneDataProgress(request: PluginRequest): Promise<PluginResponse> {\n  const { process_uuid: processUUID, is_success: isSuccess } = request?.body as any\n\n  const resultText: LanguagePkg = {\n    en: 'end',\n    zh: '\u8fdb\u5ea6\u7ba1\u7406\u5668\u7ed3\u675f',\n  }\n  const payload: ProcessResult = {\n    data: JSON.stringify(request?.body),\n  }\n  await Process.done(processUUID, isSuccess, resultText, payload)\n\n  return {\n    body: {\n      status: 'ok',\n      process_uuid: processUUID,\n    },\n  }\n}\n")),(0,r.kt)("p",null,"By completing the above steps, you can complete the refactoring of the Progress Manager details page"),(0,r.kt)(s.Z,{img:k(),mdxType:"Image"}))}P.isMDXComponent=!0}}]);