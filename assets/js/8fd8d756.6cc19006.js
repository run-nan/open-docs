(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[16054],{14651:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/edit-field-group1.b3506fd.1024.png 1024w,"+i.p+"assets/ideal-img/edit-field-group1.db3cb85.2560.png 2560w",images:[{path:i.p+"assets/ideal-img/edit-field-group1.b3506fd.1024.png",width:1024,height:554},{path:i.p+"assets/ideal-img/edit-field-group1.db3cb85.2560.png",width:2560,height:1386}],src:i.p+"assets/ideal-img/edit-field-group1.b3506fd.1024.png",toString:function(){return i.p+"assets/ideal-img/edit-field-group1.b3506fd.1024.png"},placeholder:void 0,width:1024,height:554},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAkklEQVQImU2NQQvCMAyF+4c92a5d2rQdrHgcw6PiTWfZVZChF4Xhz3qyomLgS17yHkSs1gSyDCKCUgpSSlRVBeccmLnMBRFDKKLvOow5Iw8DzqcjUtuC2SOEUBCxaaCkxG2a8F/bvgdZW0Lee4gYI6iucdjv8JpnzM8HLtc7UtqU17/g0pbFWgetdcEYA/7cv/4bz2mEp9r3SOwAAAAASUVORK5CYII="}},69222:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/edit-field-group2.82a7fd8.1024.png 1024w,"+i.p+"assets/ideal-img/edit-field-group2.f48d8a6.2560.png 2560w",images:[{path:i.p+"assets/ideal-img/edit-field-group2.82a7fd8.1024.png",width:1024,height:573},{path:i.p+"assets/ideal-img/edit-field-group2.f48d8a6.2560.png",width:2560,height:1432}],src:i.p+"assets/ideal-img/edit-field-group2.82a7fd8.1024.png",toString:function(){return i.p+"assets/ideal-img/edit-field-group2.82a7fd8.1024.png"},placeholder:void 0,width:1024,height:573},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAhElEQVQImW2MuwrDIABF/XG1zs0q1JB+jUOHClr8gBRDnKrZgtLHLXVollw4nOVwybHrcDUGzllYa+Gca/beQ2sNzjkopSCq7/F8vbG3lBKEEGCMgaiTwvJIKOuKUgpqrX/P87yF52EAPvuPOectlFJiHO+YpgkhhOYfMUZczA2cH1r4BQR1qhV8j6dhAAAAAElFTkSuQmCC"}},84851:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/edit-field-group3.a8a34c2.1024.png 1024w,"+i.p+"assets/ideal-img/edit-field-group3.1517b7f.2560.png 2560w",images:[{path:i.p+"assets/ideal-img/edit-field-group3.a8a34c2.1024.png",width:1024,height:392},{path:i.p+"assets/ideal-img/edit-field-group3.1517b7f.2560.png",width:2560,height:979}],src:i.p+"assets/ideal-img/edit-field-group3.a8a34c2.1024.png",toString:function(){return i.p+"assets/ideal-img/edit-field-group3.a8a34c2.1024.png"},placeholder:void 0,width:1024,height:392},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAWUlEQVQImU2NWwoDMRDDcv/zbuaVcVQS2LYG4x9hDTND3VQGLbH3/lZrUeGsCIakC3Q3mUW4k5mkO/N5OEdhk3EhCWlTa+HudysCn5MwIw94FPDTnfzr334AX4edcklOuEcAAAAASUVORK5CYII="}},37199:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/product-selection-field.af98469.1024.png 1024w,"+i.p+"assets/ideal-img/product-selection-field.aab6fed.2560.png 2560w",images:[{path:i.p+"assets/ideal-img/product-selection-field.af98469.1024.png",width:1024,height:121},{path:i.p+"assets/ideal-img/product-selection-field.aab6fed.2560.png",width:2560,height:304}],src:i.p+"assets/ideal-img/product-selection-field.af98469.1024.png",toString:function(){return i.p+"assets/ideal-img/product-selection-field.af98469.1024.png"},placeholder:void 0,width:1024,height:121},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAYAAADn9T9+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAALklEQVQImR3DMQoAIAwEQf//QK0srQXN5Ui1ggPTxjrsKMrCNk4hicz8Iy5zdB4RYyY1accuEwAAAABJRU5ErkJggg=="}},48145:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/project-selection-field-1.820199d.1024.png 1024w,"+i.p+"assets/ideal-img/project-selection-field-1.703c030.2560.png 2560w",images:[{path:i.p+"assets/ideal-img/project-selection-field-1.820199d.1024.png",width:1024,height:613},{path:i.p+"assets/ideal-img/project-selection-field-1.703c030.2560.png",width:2560,height:1533}],src:i.p+"assets/ideal-img/project-selection-field-1.820199d.1024.png",toString:function(){return i.p+"assets/ideal-img/project-selection-field-1.820199d.1024.png"},placeholder:void 0,width:1024,height:613},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAArklEQVQImVXMzWqDQBSGYe83uy4SbWZGxU0hSNSt2CvyBpqCRlrBtTiWzqhv6fQn5MCze8/n7R589sERpSRKKaQQSCkdIQR+8EjgH/DSc87L5cK16/61bUvTNNR1/fMsJd5zVWHMAhuwbc5qLd83DANxHLvYK8sSPWkWY1jMJ6sxfGiNtZa+fyeOols4jiOT1ug/8+zGX9s3wuh3MUkSsiwjz/M7RVHwdEpRYejCL4SOvC0KI1tGAAAAAElFTkSuQmCC"}},98972:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/project-selection-field-2.fdeb3c9.1024.png 1024w,"+i.p+"assets/ideal-img/project-selection-field-2.d5317bf.2560.png 2560w",images:[{path:i.p+"assets/ideal-img/project-selection-field-2.fdeb3c9.1024.png",width:1024,height:478},{path:i.p+"assets/ideal-img/project-selection-field-2.d5317bf.2560.png",width:2560,height:1194}],src:i.p+"assets/ideal-img/project-selection-field-2.fdeb3c9.1024.png",toString:function(){return i.p+"assets/ideal-img/project-selection-field-2.fdeb3c9.1024.png"},placeholder:void 0,width:1024,height:478},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAU0lEQVQImVWNSw7AIAhEuf9xReUjdBpxUbt4mZnkBYhbg5khIuDuULPaG1XFmILZGTSZ4WbAkyWKSAmb088mHR2uCuRf/PJ0Wm7ItZAZ9e6+ePMCCh6cQ7znn5wAAAAASUVORK5CYII="}},14508:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/project-selection-field-config.693d73f.1024.png 1024w,"+i.p+"assets/ideal-img/project-selection-field-config.bd35df1.2416.png 2416w",images:[{path:i.p+"assets/ideal-img/project-selection-field-config.693d73f.1024.png",width:1024,height:425},{path:i.p+"assets/ideal-img/project-selection-field-config.bd35df1.2416.png",width:2416,height:1002}],src:i.p+"assets/ideal-img/project-selection-field-config.693d73f.1024.png",toString:function(){return i.p+"assets/ideal-img/project-selection-field-config.693d73f.1024.png"},placeholder:void 0,width:1024,height:425},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAZUlEQVQImT2OOw5EIQwDuf/19gJbbPNaQj4kBK/Ck7A0jTWJ3PpgzDnh7pfMxN4byx1qAbJE652gqleKiHNoZhhD8H0Inx+jGXWEKTZwP5UoIlgrqj00FQEzH6GolEhE74yasBJ/DoWce6X8ZC8AAAAASUVORK5CYII="}},56753:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/task-selection-field-1.3b8b6eb.1024.png 1024w,"+i.p+"assets/ideal-img/task-selection-field-1.cfd0a8c.2560.png 2560w",images:[{path:i.p+"assets/ideal-img/task-selection-field-1.3b8b6eb.1024.png",width:1024,height:558},{path:i.p+"assets/ideal-img/task-selection-field-1.cfd0a8c.2560.png",width:2560,height:1395}],src:i.p+"assets/ideal-img/task-selection-field-1.3b8b6eb.1024.png",toString:function(){return i.p+"assets/ideal-img/task-selection-field-1.3b8b6eb.1024.png"},placeholder:void 0,width:1024,height:558},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqUlEQVQImR2Kuw6CMAAA+7+uDoINj8GEwIwO6A85OPgBGrXVECXRIrYqcgYuueSGE6OxZBrNSNOULMsG++5NkgR/KvEmE0Se51xvN+raYEzN/fGgqiqapmG/3+F7Hp7vI4qi4GkMX+foPh/e9oW1lh6tNWEYIqVELJcrXtbRtj+6Dn5ty9u5Ybycz8RxTBAEiPl8weF45KQUJ6VRWqOUoixL1pstYRQN4x/SxaKwq0mZ1QAAAABJRU5ErkJggg=="}},94983:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/task-selection-field-2.320b757.1024.png 1024w,"+i.p+"assets/ideal-img/task-selection-field-2.853d9bc.2178.png 2178w",images:[{path:i.p+"assets/ideal-img/task-selection-field-2.320b757.1024.png",width:1024,height:874},{path:i.p+"assets/ideal-img/task-selection-field-2.853d9bc.2178.png",width:2178,height:1860}],src:i.p+"assets/ideal-img/task-selection-field-2.320b757.1024.png",toString:function(){return i.p+"assets/ideal-img/task-selection-field-2.320b757.1024.png"},placeholder:void 0,width:1024,height:874},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzUlEQVQYlS2O22rEMBBD/f/fVuhDH1uabJyloZtskvo6vuQUmxWIGSGBpD7e39D3H26T5th3juPgPE+stRhjcM4xa436/vrExYTzgZwzpRSu66Kh1Nrvtm0oPd+7aObL7wgh8GcMtVbWdUXpcYBSqCl1lhi4UkJC6LW+CI+tB0dyKb0yimCtQWJEvMN6j82RtQXncSBJxDtLlthDNSeS94QYcUX4XR+o2zBQSyaLcLUJud1Mavo1en8+UbdpQmLo4yUlQvD99953NizLwj9C3DUC1vbOlwAAAABJRU5ErkJggg=="}},72964:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/task-selection-field-config.d6f02db.1024.png 1024w,"+i.p+"assets/ideal-img/task-selection-field-config.1f85e6f.2420.png 2420w",images:[{path:i.p+"assets/ideal-img/task-selection-field-config.d6f02db.1024.png",width:1024,height:266},{path:i.p+"assets/ideal-img/task-selection-field-config.1f85e6f.2420.png",width:2420,height:628}],src:i.p+"assets/ideal-img/task-selection-field-config.d6f02db.1024.png",toString:function(){return i.p+"assets/ideal-img/task-selection-field-config.d6f02db.1024.png"},placeholder:void 0,width:1024,height:266},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAWElEQVQImT2KSQrDMBDA/P8v9SM95tBroJnY8Xg2lZaSgxACtWt0TBV3JyJuvm3vne2183ietCEHo3fSjMj8Tfn3IcJaCmE07Sc+LyqCAqrqRkSYU1mefAAFJnT7eQLGuwAAAABJRU5ErkJggg=="}},92327:(e,t,i)=>{"use strict";i.r(t),i.d(t,{assets:()=>E,contentTitle:()=>S,default:()=>T,frontMatter:()=>C,metadata:()=>F,toc:()=>D});var n=i(87462),a=(i(67294),i(3905)),l=i(15944),s=i(72964),r=i.n(s),d=i(14508),o=i.n(d),p=i(56753),u=i.n(p),c=i(94983),g=i.n(c),f=i(48145),m=i.n(f),h=i(98972),A=i.n(h),k=i(37199),y=i.n(k),b=i(14651),N=i.n(b),v=i(69222),w=i.n(v),U=i(84851),I=i.n(U);const C={sidebar_position:1},S="Selection",F={unversionedId:"abilities/business/field/script-field-selection/script-field-selection",id:"version-1.x/abilities/business/field/script-field-selection/script-field-selection",title:"Selection",description:"Requirements",source:"@site/versioned_docs/version-1.x/abilities/business/field/script-field-selection/script-field-selection.mdx",sourceDirName:"abilities/business/field/script-field-selection",slug:"/abilities/business/field/script-field-selection/",permalink:"/open-docs/docs/abilities/business/field/script-field-selection/",draft:!1,tags:[],version:"1.x",lastUpdatedBy:"liupengfei",lastUpdatedAt:1690863366,formattedLastUpdatedAt:"Aug 1, 2023",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"abilities",previous:{title:"Field",permalink:"/open-docs/docs/abilities/business/field/"},next:{title:"Scene: field and field group of location",permalink:"/open-docs/docs/abilities/business/field/script-field-selection/sample-script-field-selection"}},E={},D=[{value:"Requirements",id:"requirements",level:2},{value:"Overview",id:"overview",level:2},{value:"Scope",id:"scope",level:3},{value:"Performace",id:"performace",level:3},{value:"Issue",id:"issue",level:4},{value:"Project",id:"project",level:4},{value:"Product",id:"product",level:4},{value:"Usage",id:"usage",level:2},{value:"Create script field",id:"create-script-field",level:3},{value:"Issue",id:"issue-1",level:4},{value:"Project/Product",id:"projectproduct",level:4},{value:"Field options",id:"options",level:3},{value:"Field group",id:"field-group",level:3},{value:"Create field group",id:"create-field-group",level:4},{value:"Field Options",id:"field-options",level:4},{value:"Field value linkage",id:"field-value-linkage",level:4},{value:"Field value validation",id:"field-value-validation",level:4},{value:"Updating Field Values",id:"updating-field-values",level:4},{value:"Sequence Diagram",id:"sequence-diagram",level:4},{value:"Examples",id:"examples",level:2}],P={toc:D};function T(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},P,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"selection"},"Selection"),(0,a.kt)("h2",{id:"requirements"},"Requirements"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"ONES"),(0,a.kt)("th",{parentName:"tr",align:"left"},"@ones-op/node-ability"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"v3.6.0+"),(0,a.kt)("td",{parentName:"tr",align:"left"},"v0.3.7+")))),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"This capability allows plugins to add script fields with the type ",(0,a.kt)("strong",{parentName:"p"},"single-select/multi-select menus"),". The options for these properties can be dynamically specified by the plugin code. Additionally, this capability supports aggregating multiple script properties that have associated relationships into a property group, enabling interactive effects among multiple script properties."),(0,a.kt)("h3",{id:"scope"},"Scope"),(0,a.kt)("p",null,"Single-select/multi-select menu script fields can be added as ",(0,a.kt)("strong",{parentName:"p"},"issue fields"),", ",(0,a.kt)("strong",{parentName:"p"},"project fields"),", and ",(0,a.kt)("strong",{parentName:"p"},"product fields"),"."),(0,a.kt)("h3",{id:"performace"},"Performace"),(0,a.kt)("h4",{id:"issue"},"Issue"),(0,a.kt)("p",null,"When single-select/multi-select menu script fields are added as issues fields, you can add them to specific issue types, just like using system issue fields."),(0,a.kt)(l.Z,{img:r(),mdxType:"Image"}),(0,a.kt)(l.Z,{img:u(),mdxType:"Image"}),(0,a.kt)(l.Z,{img:g(),mdxType:"Image"}),(0,a.kt)("p",null,"In most scenarios, script issue fields behave similarly to the system issue fields in the ONES system. However, there are slight differences in the following scenarios:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"In layout configuration, tagged fields do not support script fields."),(0,a.kt)("li",{parentName:"ul"},"In issue list view\uff0conly filtering based on script issue fields is supported, while sorting and grouping based on script issue fields are not supported."),(0,a.kt)("li",{parentName:"ul"},"Importing issues does not support importing issues that contain script issue fields."),(0,a.kt)("li",{parentName:"ul"},'In "Automation Settings", updating script issue fields and creating issues with pre-set script field values are not supported.'),(0,a.kt)("li",{parentName:"ul"},'In "My Work" - "Dashboard" - "Custom Report Card", using script issue fields as analysis dimensions is not supported.')),(0,a.kt)("h4",{id:"project"},"Project"),(0,a.kt)("p",null,"When single-select/multi-select menu script fields are added as projects script fields, you can add them to specific projects just like using system project fields."),(0,a.kt)(l.Z,{img:o(),mdxType:"Image"}),(0,a.kt)(l.Z,{img:m(),mdxType:"Image"}),(0,a.kt)(l.Z,{img:A(),mdxType:"Image"}),(0,a.kt)("p",null,"In most scenarios, script project fields behave similarly to the system project fields in the ONES system. However, there are slight differences in the following scenarios:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"In project list view, only filtering based on script issue fields is supported, while sorting and grouping based on script issue fields are not supported."),(0,a.kt)("li",{parentName:"ul"},'In "My Work" - "Dashboard" - "Project List Card", script field')),(0,a.kt)("h4",{id:"product"},"Product"),(0,a.kt)(l.Z,{img:y(),mdxType:"Image"}),(0,a.kt)("p",null,"In most scenarios, script product fields behave similarly to the system product fields in the ONES system. However, there are slight differences in the following scenarios:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"In product list view, only filtering based on script issue fields is supported, while sorting and grouping based on script issue fields are not supported.")),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("h3",{id:"create-script-field"},"Create script field"),(0,a.kt)("p",null,"Using the ",(0,a.kt)("inlineCode",{parentName:"p"},"Field")," module from ",(0,a.kt)("inlineCode",{parentName:"p"},"@ones-op/node-ability"),", you can create script fields at the appropriate timing, such as in the Install hook function of the plugin."),(0,a.kt)("h4",{id:"issue-1"},"Issue"),(0,a.kt)("p",null,"You can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"Field.FieldsAdd")," method to create issue script field."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="backend/src/index.ts"',title:'"backend/src/index.ts"'},"import { Field } from '@ones-op/node-ability'\n\nexport async function Install() {\n  Logger.info('[Plugin] Install')\n  const FieldsAddRes = await Field.FieldsAdd({\n    Name: 'singleSelect field',\n    Type: 1001, // multiSelect: 1002\n  })\n  if (FieldsAddRes.Error) {\n    throw new Error('Failed to create property')\n  }\n  const { UUID: fieldUUID } = FieldsAddRes\n  Logger.info('create field:', fieldUUID)\n}\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Field.FieldsAdd Parameter Description")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Property name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("td",{parentName:"tr",align:"left"},"int"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Script field type:",(0,a.kt)("br",null),"- 1001: single-select",(0,a.kt)("br",null),"- 1002: multi-select")))),(0,a.kt)("h4",{id:"projectproduct"},"Project/Product"),(0,a.kt)("p",null,"You can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"Field.ItemsAdd")," method to create project/product script fields."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="backend/src/index.ts"',title:'"backend/src/index.ts"'},"import { Field, FieldTypeEnum, PoolEnum } from '@ones-op/node-ability'\nimport { Logger } from '@ones-op/node-logger'\n\nexport async function Install() {\n  Logger.info('[Plugin] Install')\n  const ItemsAddProjectRes = await Field.ItemsAdd({\n    FieldType: FieldTypeEnum.SingleLabel,\n    Name: 'Single Select Project Field',\n    ItemType: 'field',\n    Pool: PoolEnum.Project,\n    ContextType: 'team',\n    required: false,\n  })\n  if (ItemsAddProjectRes.Error) {\n    throw new Error('Failed to create field')\n  }\n  const { UUID: fieldUUID } = ItemsAddProjectRes\n  Logger.info('Created field:', fieldUUID)\n}\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Field.ItemsAdd Parameter Description")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FieldType"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Script property type:",(0,a.kt)("br",null),"- ",(0,a.kt)("inlineCode",{parentName:"td"},"FieldTypeEnum.SingleLabel"),": Single select",(0,a.kt)("br",null),"- ",(0,a.kt)("inlineCode",{parentName:"td"},"FieldTypeEnum.MultiLabel"),": Multi-select")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Property name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"ItemType"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Fixed value: ",(0,a.kt)("inlineCode",{parentName:"td"},"field"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Pool"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Entity type: ",(0,a.kt)("br",null),"- ",(0,a.kt)("inlineCode",{parentName:"td"},"PoolEnum.Project"),": Project property",(0,a.kt)("br",null),"- ",(0,a.kt)("inlineCode",{parentName:"td"},"PoolEnum.Product"),": Product property")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"ContextType"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Context type")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"required"),(0,a.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Whether the property is required")))),(0,a.kt)("h3",{id:"options"},"Field options"),(0,a.kt)("p",null,"To customize the options for a script field, you need to add an interface ",(0,a.kt)("inlineCode",{parentName:"p"},"/scriptFieldSearch")," in the plugin configuration file. The ONES system internally uses this interface to fetch the options for the script field."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/plugin.yaml"',title:'"config/plugin.yaml"'},"service:\n  app_id: ...\n  name: ability-scriptSelection\n  ...\napis:\n  - type: addition\n    methods:\n      - POST\n    url: /scriptFieldSearch\n    function: GetOptions\n")),(0,a.kt)("p",null,"In the ",(0,a.kt)("inlineCode",{parentName:"p"},"GetOptions")," method, you need to construct and return the options for the script field."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="backend/src/index.ts"',title:'"backend/src/index.ts"'},"interface Body {\n  field_uuid: string\n  uuids?: Array<string> // Only used for field group\n  relations?: Array<{\n    // Only used for field group\n    field_uuid: string\n    field_value: string[]\n  }>\n}\n\ninterface Response {\n  body: {\n    code: number\n    body: {\n      options: Array<{\n        uuid: string\n        value: string\n      }>\n    }\n  }\n}\n\nexport async function GetOptions(request: PluginRequest<Body>): Promise<Response> {\n  const body = request?.body\n  const options = [] // Options data to be returned\n\n  for (let i = 0; i < 3; i++) {\n    options.push({\n      uuid: 'optionsUUID' + i.toString(),\n      value: 'Option Value' + i.toString(),\n    })\n  }\n\n  return {\n    body: {\n      code: 200,\n      body: {\n        options,\n      },\n    },\n  }\n}\n")),(0,a.kt)("p",null,"Once you have completed the above steps, you can use the created script field in the ONES system."),(0,a.kt)("h3",{id:"field-group"},"Field group"),(0,a.kt)("p",null,'Sometimes, there can be certain relationships between multiple script fields, such as "Province" and "City." The options for "City" may vary based on the selected value of "Province." Additionally, when a particular "City" is selected, the corresponding "Province" should also be automatically selected. To achieve this kind of relationship, we can aggregate these script fields into an field group.'),(0,a.kt)("h4",{id:"create-field-group"},"Create field group"),(0,a.kt)("p",null,"You can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"Field.AddGroupField")," method to add a field group."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const relations = fieldUUIDS.map((fieldUUID, index) => ({\n  FieldUUID: fieldUUID,\n  FieldParentUUID: '',\n  Position: index\n}))\n\nconst AddGroupFieldRes = await Field.AddGroupField({\n  Name: 'Field Group Name',\n  ObjectType: PoolEnum.Task\n  Relations: relations\n})\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Field.AddGroupField Parameter Description")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"ObjectType"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"The entity type of the field group. Possible values:",(0,a.kt)("br",null),"- ",(0,a.kt)("inlineCode",{parentName:"td"},"PoolEnum.Project"),": Project",(0,a.kt)("br",null),"- ",(0,a.kt)("inlineCode",{parentName:"td"},"PoolEnum.Product"),": Product",(0,a.kt)("br",null),"- ",(0,a.kt)("inlineCode",{parentName:"td"},"PoolEnum.Task"),": Issue")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"The name of the field group")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Relations"),(0,a.kt)("td",{parentName:"tr",align:"left"},"IRelationMessage"),(0,a.kt)("td",{parentName:"tr",align:"left"},"An array of relationship information")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"IRelationMessage")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FieldUUID"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"The ",(0,a.kt)("inlineCode",{parentName:"td"},"fieldUUID")," of the field")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FieldParentUUID"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"The UUID of the parent field, indicating hierarchy")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Position"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"The position of the field within the group")))),(0,a.kt)("h4",{id:"field-options"},"Field Options"),(0,a.kt)("p",null,"For the fields within the field group, we also utilize the ",(0,a.kt)("inlineCode",{parentName:"p"},"/scriptFieldSearch")," interface to retrieve the options for each field. However, the construction of field options varies depending on the request parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If the request parameters include ",(0,a.kt)("inlineCode",{parentName:"li"},"uuids"),": the ",(0,a.kt)("inlineCode",{parentName:"li"},"uuids")," field contains the IDs of the selected options for the field. In this case, the corresponding options for these IDs should be returned."),(0,a.kt)("li",{parentName:"ul"},"If the request parameters include ",(0,a.kt)("inlineCode",{parentName:"li"},"relations"),": the ",(0,a.kt)("inlineCode",{parentName:"li"},"relations")," field contains the values of the related fields. Consequently, the field options should be filtered and returned based on the values of the related fields."),(0,a.kt)("li",{parentName:"ul"},"If the request parameters neither include ",(0,a.kt)("inlineCode",{parentName:"li"},"relations")," nor ",(0,a.kt)("inlineCode",{parentName:"li"},"uuids"),": all field options should be returned.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"interface Body {\n  field_uuid: string\n  uuids?: Array<string> //  contains the IDs of the selected options for the field\n  relations?: Array<{\n    // contains the values of the related fields\n    field_uuid: string\n    field_value: string[] | null\n  }>\n}\n\ninterface Response {\n  body: {\n    code: number\n    body: {\n      options: Array<{\n        uuid: string\n        value: string\n      }>\n    }\n  }\n}\n\nconst locations = {\n  Guangdong: ['Guangzhou', 'Shenzhen'],\n  Jiangsu: ['Nanjing', 'Suzhou'],\n}\n\nconst buildOptions = (options) => {\n  return {\n    body: {\n      code: 200,\n      body: {\n        options,\n      },\n    },\n  }\n}\n\nexport async function GetOptions(request: PluginRequest<Body>): Promise<Response> {\n  const body = request.body || {}\n  const { field_uuid, uuids, relations } = body\n  if (field_uuid === 'City') {\n    const allCitys = Object.values(locations).flat()\n    if (uuids) {\n      /**\n       * If uuids are provided in the request parameters, the corresponding options for the IDs included in uuids should be returned directly.\n       */\n      return buildOptions(\n        uuids.map((uuid) => {\n          return {\n            uuid,\n            value: uuid, // In the example, for simplicity, the UUIDs and values are assumed to be the same.\n          }\n        })\n      )\n    }\n    if (relations) {\n      /**\n       * If `relations` are provided in the request parameters,\n       * the available cities should be filtered based on the associated property, which is the value of the province.\n       * Only the cities corresponding to the selected province should be returned.\n       **/\n      const province = relations.find((relation) => relation.field_uuid === 'Province')\n        ?.field_value[0]\n      if (province) {\n        return buildOptions(\n          locations[province].map((city) => {\n            return {\n              uuid: city,\n              value: city,\n            }\n          })\n        )\n      }\n    }\n    /**\n     * If neither `uuids` nor `relations` are included in the request parameters, all cities should be returned.\n     */\n    const allCitys = Object.values(locations).flat()\n    return buildOptions(\n      allCitys.map((city) => {\n        return {\n          uuid: city,\n          value: city,\n        }\n      })\n    )\n  }\n}\n")),(0,a.kt)("h4",{id:"field-value-linkage"},"Field value linkage"),(0,a.kt)("p",null,"For field group fields, plugin developers need to implement a ",(0,a.kt)("inlineCode",{parentName:"p"},"/groupFieldOnChange")," interface:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/plugin.yaml"',title:'"config/plugin.yaml"'},"apis:\n  - type: addition\n    methods:\n      - POST\n    url: /groupFieldOnChange\n    function: GroupFieldOnChange\n")),(0,a.kt)("p",null,"When a field in the field group is about to be modified, the ONES system will send a request to the plugin. This request includes the current values of all properties in the field group and the ID of the property being changed. In the processing function of this request, developers can use the value of the changed field to set the values of other related fields within the field group. Finally, all values of the fields in the field group should be returned together."),(0,a.kt)("p",null,'For example, when the value of the "City" field changed, we want to set the value of the "Province" field accordingly, we can implement it as follows:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"interface Body {\n  group_uuid: string // ID of the field group\n  change_field_uuid: string // ID of the changed field\n  field_values: Array<{\n    // Values of all fields in the field group\n    field_uuid: string // ID of the field\n    option_uuids: Array<string> | null // IDs of the field values\n  }>\n  UserUUID: string // ID of the current user\n}\n\ninterface Response {\n  statusCode: number\n  body: {\n    code: number\n    body: {\n      field_values: Array<{\n        field_uuid: string\n        option_uuids: Array<string> | null\n      }>\n    }\n  }\n}\n\nconst locations = {\n  Guangdong: ['Guangzhou', 'Shenzhen'],\n  Jiangsu: ['Nanjing', 'Suzhou'],\n}\n\nconst buildResult = (field_values) => {\n  return {\n    statusCode: 200,\n    body: {\n      code: 200,\n      body: {\n        field_values,\n      },\n    },\n  }\n}\n\nexport async function GroupFieldOnChange(request: PluginRequest<Body>): Promise<Response> {\n  const { change_field_uuid, field_values = [] } = request.body || {}\n  if (change_field_uuid === 'City') {\n    const city = field_values.find((field_value) => field_value.field_uuid === 'City')\n      ?.option_uuids[0]\n    for (const province in locations) {\n      if (locations[province].includes(city)) {\n        return buildResult([\n          {\n            field_uuid: 'Province',\n            option_uuids: [province],\n          },\n          {\n            field_uuid: 'City',\n            option_uuids: [city],\n          },\n        ])\n      }\n    }\n  }\n}\n")),(0,a.kt)("h4",{id:"field-value-validation"},"Field value validation"),(0,a.kt)("p",null,"To complete the functionality of the field group, developers need to implement a ",(0,a.kt)("inlineCode",{parentName:"p"},"/groupFieldValidate")," interface."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/plugin.yaml"',title:'"config/plugin.yaml"'},"apis:\n  - type: addition\n    methods:\n      - POST\n    url: /groupFieldValidate\n    function: GroupFieldValidate\n")),(0,a.kt)("p",null,"When a user submits a modification to the field group, the ONES system internally sends a request to this interface. The request parameters include the current values of all fields in the field group. In the processing function of this interface, developers can perform validation on the values of the field group. The success or failure of the validation depends on whether the status code is 200. If the validation fails, the modification is considered invalid. When the validation is successful, an additional update of the field values can be performed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"interface Body {\n  UserUUID: string\n  field_groups: Array<{\n    group_uuid: string\n    field_values: Array<{\n      field_uuid: string\n      option_uuids: Array<string>\n    }>\n  }>\n}\n\ninterface Response {\n  statusCode: number\n  body: {\n    code: number\n    body: {\n      options: Array<{\n        field_uuid: string\n        option_uuid: string\n        option_value: string\n      }>\n    }\n  }\n}\n\nexport async function GroupFieldValidate(request: PluginRequest<Body>): Response {\n  const { field_groups = [] } = request.body\n  const options = []\n  field_groups.forEach(({ field_values }) => {\n    field_values.forEach(({ field_uuid, option_uuids }) => {\n      option_uuids.forEach((option_uuid) => {\n        options.push({\n          field_uuid,\n          option_uuid,\n          option_value: option_uuid,\n        })\n      })\n    })\n  })\n  const isValid = checkIsValid(options)\n  return {\n    statusCode: isValid ? 200 : 500,\n    body: {\n      code: isValid ? 200 : 500,\n      body: {\n        options,\n      },\n    },\n  }\n}\n")),(0,a.kt)("h4",{id:"updating-field-values"},"Updating Field Values"),(0,a.kt)("p",null,"For single-select/multi-select menu script fields, each field option has a unique ",(0,a.kt)("inlineCode",{parentName:"p"},"uuid"),". The value of a field represents the ",(0,a.kt)("inlineCode",{parentName:"p"},"uuid")," of the selected option. You can use ",(0,a.kt)("inlineCode",{parentName:"p"},"Field.UpdateFieldOption")," to modify the value of the option, thus updating its display on the interface."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const UpdateFieldOptionRes = await Field.UpdateFieldOption([\n  {\n    TeamUUID: globalThis.onesEnv.teamUUID,\n    FieldUUID: fieldUUID,\n    UUID: 'valueUUID',\n    Value: 'value',\n    ObjectType: 3,\n  },\n])\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Field.UpdateFieldOption Parameters")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"TeamUUID"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Team UUID")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FieldUUID"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Script field UUID")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"UUID"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"UUID of the field option")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Value"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Value of the field option")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"ObjectType"),(0,a.kt)("td",{parentName:"tr",align:"left"},"int"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Entity type, can have the following values:",(0,a.kt)("br",null),"- 1: Project",(0,a.kt)("br",null),"- 2: Task",(0,a.kt)("br",null),"- 3: Product")))),(0,a.kt)("h4",{id:"sequence-diagram"},"Sequence Diagram"),(0,a.kt)("p",null,"After adding script fields and field groups, the complete process of modifying fields is as follows:"),(0,a.kt)("mermaid",{value:"sequenceDiagram\n    autonumber\n    actor u as User\n    participant o as ONES\n    participant p as Plugin\n    u->>+o: Click on script field\n    o--\x3e>-u: Field group modification box\n    rect rgb(129,216,207,0.3)\n    note left of u: Get options\n    u->>+o: Edit field\n    o->>+p: Call /scriptFieldSearch\n    p--\x3e>-o: Return options\n    o--\x3e>-u: Return options\n    end\n    rect rgb(129,216,207,0.3)\n    note left of u: Autofill field value\n    u->>+o: Select an option\n    o->>+p: Call /groupFieldOnChange\n    p--\x3e>-o: Return autofill data\n    o--\x3e>-u: Auto backfill\n    end\n    u->>+o: Query option value\n    o->>+p: Call /scriptFieldSearch\n    p--\x3e>-o: Return option value\n    o--\x3e>-u: Return option value\n    rect rgb(129,216,207,0.3)\n    note left of u: Check field value\n    u->>+o: Submit field group modifications\n    o->>+p: Call /groupFieldValidate\n    p--\x3e>-o: Return validation result\n    o--\x3e>o: If validation succeeds, modify the data\n    o--\x3e>-u: Return validation result\n    end"}),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"In ONES system, modifying fields within a field group has a slightly different interaction compared to modifying regular fields. Due to the interdependency among fields within a field group, modifying fields within a field group requires modifying the entire group as a whole."),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"When modifying fields within a field group, an field group editing dialog will appear."),(0,a.kt)(l.Z,{img:N(),mdxType:"Image"})),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"When batch modifying issue fields, if a field within a field group is selected, other fields within the same group will also be automatically selected."),(0,a.kt)(l.Z,{img:w(),mdxType:"Image"}),(0,a.kt)(l.Z,{img:I(),mdxType:"Image"})))),(0,a.kt)("h2",{id:"examples"},"Examples"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/open-docs/docs/abilities/business/field/script-field-selection/sample-script-field-selection"},"field and field group of location"))))}T.isMDXComponent=!0}}]);