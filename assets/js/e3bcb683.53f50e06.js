(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[1843],{16893:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/plugin-directory.4152860.525.png 525w",images:[{path:n.p+"assets/ideal-img/plugin-directory.4152860.525.png",width:525,height:211}],src:n.p+"assets/ideal-img/plugin-directory.4152860.525.png",toString:function(){return n.p+"assets/ideal-img/plugin-directory.4152860.525.png"},placeholder:void 0,width:525,height:211},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVQImW3DSQqDMBiA0dxC6S6a/BGnxgEFB9wI0k1d6/3v8ZVu1QdP5XlB3bSIOOy/FcxDlTphHgdq77FxhIk0YuJb9Wo2qu2g/Zwk846bvoR+JbhUOinpl5VuWLDpG8k82hW3PxB7PKXH+tykAAAAAElFTkSuQmCC"}},17942:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>p,kt:()=>h});var o=n(50959);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),u=d(n),m=a,h=u["".concat(l,".").concat(m)]||u[m]||c[m]||i;return n?o.createElement(h,s(s({ref:t},p),{},{components:n})):o.createElement(h,s({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,s=new Array(i);s[0]=m;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[u]="string"==typeof e?e:a,s[1]=r;for(var d=2;d<i;d++)s[d]=n[d];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},40518:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>g,frontMatter:()=>s,metadata:()=>l,toc:()=>p});var o=n(28957),a=(n(50959),n(17942)),i=n(49500);const s={sidebar_position:1,description:"Rich slots provide customized pages at will.",toc_max_heading_level:4},r="Add slot",l={unversionedId:"guide/abilities/add-slot",id:"guide/abilities/add-slot",title:"Add slot",description:"Rich slots provide customized pages at will.",source:"@site/docs/guide/abilities/add-slot.mdx",sourceDirName:"guide/abilities",slug:"/guide/abilities/add-slot",permalink:"/open-docs/docs/guide/abilities/add-slot",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1703230356,formattedLastUpdatedAt:"Dec 22, 2023",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"Rich slots provide customized pages at will.",toc_max_heading_level:4},sidebar:"guide",previous:{title:"Main concepts",permalink:"/open-docs/docs/guide/abilities/"},next:{title:"Add ability",permalink:"/open-docs/docs/guide/abilities/add-abilities"}},d={},p=[{value:"Overview",id:"overview",level:2},{value:"Slots",id:"slots",level:2},{value:"Usage",id:"usage",level:2},{value:"Step 1: Add slot module",id:"step-1-add-slot-module",level:3},{value:"Step 2: Add slot Submodule",id:"step-2-add-slot-submodule",level:3},{value:"Step 3: Add logical code",id:"step-3-add-logical-code",level:3},{value:"Step 4: Add style code",id:"step-4-add-style-code",level:3},{value:"PostCSS",id:"postcss",level:4},{value:"Step 5: Use ONES Design",id:"step-5-use-ones-design",level:3},{value:"Add slot example",id:"add-slot-example",level:3}],u=(c="Image",function(e){return i.warn("Component "+c+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",e)});var c;const m={toc:p},h="wrapper";function g(e){let{components:t,...i}=e;return(0,a.kt)(h,(0,o.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"add-slot"},"Add slot"),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,'We have preset a lot of slots for you so that you can easily customize the operations you want on ONES. At present, you can simply use the slot as a "placeholder", and your plugin is to fill the placeholder with code.'),(0,a.kt)("h2",{id:"slots"},"Slots"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/open-docs/docs/abilities/slot/"},"Slot module list"))),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("h3",{id:"step-1-add-slot-module"},"Step 1: Add slot module"),(0,a.kt)("p",null,"Execute ",(0,a.kt)("inlineCode",{parentName:"p"},"npx op add module")," under the root directory of the plugin project to add slot modules to the plugin."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"\u279c npx op add module\n  \u2714 Validating the input params\n  \u2714 Validating project files exists\n  \u2714 Generating initial answers by input params\n  \u2714 Parsing plugin config content\nPre-require tasks run successfully\n? Please select the module type you want to add: \u2026\nones:desk\nones:manhour\nones:performance\nones:plan\nones:pipeline\nones:product\nones:project\nones:testcase\nones:version\nones:wiki\n")),(0,a.kt)("p",null,"You can search for and select slot modules in the list by selecting a direction key or entering a string."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"If you choose a slot that contains submodules, you will continue to be asked if you need to add submodules. You can add it together, or you can choose to add it manually later.")),(0,a.kt)("h3",{id:"step-2-add-slot-submodule"},"Step 2: Add slot Submodule"),(0,a.kt)("p",null,"Execute ",(0,a.kt)("inlineCode",{parentName:"p"},"npx op add sub-module")," under the plugin project directory to add submodules to the slot module."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"\u279c npx op add sub-module\n  \u2714 Validating the input params\n  \u2714 Validating project files exists\n  \u2714 Generating initial answers by input params\n  \u2714 Parsing plugin config content\n\nPre-require tasks run successfully\n? Please select the module you want to add a sub module: (Use arrow keys)\n\u276f ones-workspace-fKFw\n\u276f ones-plan-fKFF\n\u276f ones-wiki-uuDB\n")),(0,a.kt)("p",null,"You can search for and select slot module id in the list by selecting a direction key or entering a string."),(0,a.kt)("admonition",{title:"notice",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Not all slots have submodules. If you look up the ",(0,a.kt)("a",{parentName:"p",href:"/open-docs/docs/abilities/slot/"},"list of modules")," and find that there are no submodules in the module you need, you can skip the second step.")),(0,a.kt)("h3",{id:"step-3-add-logical-code"},"Step 3: Add logical code"),(0,a.kt)("p",null,"The logic code for each slot module is stored in a directory named after the slot module id under the ",(0,a.kt)("inlineCode",{parentName:"p"},"/web/src/modules/")," directory. You can treat each slot module as a separate React application, which is no different from the way you are familiar with React development, you just need to pay attention to your business logic."),(0,a.kt)("p",null,"We provide natural ",(0,a.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/zh/"},"TypeScript")," support for plugin, with the introduction of .ts and .tsx files by default."),(0,a.kt)("p",null,"When the plugin is packaged, we only perform the translation of .ts and .tsx files, and do not perform any type checking, it only provides friendly type hints when you code to help you reduce problems."),(0,a.kt)("admonition",{title:"notice",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"For the packaging of each plugin module, we use the ",(0,a.kt)("inlineCode",{parentName:"p"},"index.tsx")," file in the module as the entry. Do not delete this entry file, or there may be an exception in your packaging process.")),(0,a.kt)("h3",{id:"step-4-add-style-code"},"Step 4: Add style code"),(0,a.kt)("p",null,"The same style code for each slot is also stored in the ",(0,a.kt)("inlineCode",{parentName:"p"},"/web/src/modules/")," directory named after the slot module id. Open the ",(0,a.kt)("inlineCode",{parentName:"p"},"index.css")," file in the directory, and the content generated by default is as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="index.css"',title:'"index.css"'},"#ones-mf-root {\n}\n")),(0,a.kt)("p",null,"The element of ",(0,a.kt)("inlineCode",{parentName:"p"},'id="ones-mf-root"'),"is the root element of the slot module, so you can write the style under the selector of ",(0,a.kt)("inlineCode",{parentName:"p"},"#ones-mf-root"),". Of course, this is only recommended, not necessary. You can write style code in any way you like."),(0,a.kt)("h4",{id:"postcss"},"PostCSS"),(0,a.kt)("p",null,"We also provide natural support for ",(0,a.kt)("a",{parentName:"p",href:"https://postcss.org/"},"PostCSS")," preprocessors for plugin, and enable the following functions by default."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("h5",{parentName:"li",id:"autoprefixer"},"autoprefixer"),(0,a.kt)("p",{parentName:"li"},"Because we enabled ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/postcss/autoprefixer"},"autoprefixer")," by default, you only need to write plugin styles using unprefixed CSS rules, without worrying about browser compatibility.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("h5",{parentName:"li",id:"css-nano"},"cssnano"),(0,a.kt)("p",{parentName:"li"},"We use ",(0,a.kt)("a",{parentName:"p",href:"https://cssnano.co/"},"cssnano")," to compress the plugin style code to reduce the plugin size and improve the plugin performance.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("h5",{parentName:"li",id:"postcss-import"},"postcss-import"),(0,a.kt)("p",{parentName:"li"},"We support CSS @import inline through ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/postcss/postcss-import"},"postcss-import")," preconfiguration so that you can split the CSS module."),(0,a.kt)("p",{parentName:"li"},"For example, you can create a separate style file ",(0,a.kt)("inlineCode",{parentName:"p"},"banner.css")," for the banner component:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="/web/src/modules/ones-global-banner-3QC4/banner.css"',title:'"/web/src/modules/ones-global-banner-3QC4/banner.css"'},".banner {\n  width: 100%;\n}\n")),(0,a.kt)("p",{parentName:"li"},"Then introduce it in ",(0,a.kt)("inlineCode",{parentName:"p"},"index.css")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="/web/src/modules/ones-global-banner-3QC4/index.css"',title:'"/web/src/modules/ones-global-banner-3QC4/index.css"'},"@import 'banner.css';\n\n#ones-mf-root {\n}\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("h5",{parentName:"li",id:"postcss-nested"},"postcss-nested"),(0,a.kt)("p",{parentName:"li"},"We use ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/postcss/postcss-nested"},"postcss-nested")," to allow you to write CSS selectors in a nested manner, just as you are familiar with the Sass syntax:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-css"},".mf-bar-banner {\n  width: 100%;\n  height: 0;\n  &--active {\n    height: 40px;\n  }\n}\n")))),(0,a.kt)("h3",{id:"step-5-use-ones-design"},"Step 5: Use ONES Design"),(0,a.kt)("p",null,"We provide a complete set of UI components library that can help you quickly build a standard plugin user interface, which has been introduced by default when the plugin project is initialized."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"index.tsx")," file of each slot module looks like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="index.tsx"',title:'"index.tsx"'},"import { ConfigProvider } from '@ones-design/core'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\n\nReactDOM.render(\n  <ConfigProvider>you module title</ConfigProvider>,\n  document.getElementById('ones-mf-root'),\n)\n")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"You must keep the ",(0,a.kt)("inlineCode",{parentName:"p"},"<ConfigProvider>")," component in index.tsx, or the plugin will not run the way you expect it to. For more information, please see ",(0,a.kt)("a",{parentName:"p",href:"https://bangwork.github.io/ones-design/?path=/docs/core-configprovider--docs"},"ConfigProvider")," document in ONES Design.")),(0,a.kt)("p",null,"For more information about the specific use of component libraries, please refer to: ",(0,a.kt)("a",{parentName:"p",href:"https://bangwork.github.io/ones-design/"},"ONES Design"),"."),(0,a.kt)("h3",{id:"add-slot-example"},"Add slot example"),(0,a.kt)("p",null,"Here we take the global slot of ",(0,a.kt)("inlineCode",{parentName:"p"},"ones:global:banner")," as an example. When you select to add this module, you can see that an item has been added to the ",(0,a.kt)("inlineCode",{parentName:"p"},"modules")," field of the ",(0,a.kt)("inlineCode",{parentName:"p"},"plugin.yaml")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="/config/plugin.yaml"',title:'"/config/plugin.yaml"'},"modules:\n  - id: ones-global-banner-3QC4\n    title: banner\n    entry: modules/ones-global-banner-3QC4/index.html\n    moduleType: ones:global:banner\n")),(0,a.kt)("p",null,"At the same time, the ",(0,a.kt)("inlineCode",{parentName:"p"},"/web/src/modules/ones-global-banner-3QC4")," directory corresponding to the ",(0,a.kt)("inlineCode",{parentName:"p"},"entry")," field is generated, which contains ",(0,a.kt)("inlineCode",{parentName:"p"},"index.tsx")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"index.css")," files:"),(0,a.kt)(u,{img:n(16893),mdxType:"Image"}),(0,a.kt)("p",null,"Execute ",(0,a.kt)("inlineCode",{parentName:"p"},"npx op invoke run")," in the root directory of the plugin project so that you can see your plugin in the corresponding slot in the remote debugging environment."))}g.isMDXComponent=!0}}]);