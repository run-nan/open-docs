(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[32014],{68109:(e,t,l)=>{e.exports={src:{srcSet:l.p+"assets/ideal-img/uploadFile1.5d50d81.1024.png 1024w,"+l.p+"assets/ideal-img/uploadFile1.8573a7d.2022.png 2022w",images:[{path:l.p+"assets/ideal-img/uploadFile1.5d50d81.1024.png",width:1024,height:342},{path:l.p+"assets/ideal-img/uploadFile1.8573a7d.2022.png",width:2022,height:676}],src:l.p+"assets/ideal-img/uploadFile1.5d50d81.1024.png",toString:function(){return l.p+"assets/ideal-img/uploadFile1.5d50d81.1024.png"},placeholder:void 0,width:1024,height:342},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAUklEQVQImTWLyQ3AIAzA2H+3LtEF+oAcQBJXourDD0t2GyLMOTEz3B1RpfeOuaMqPF24bqeNMVhrERFUFZl5RlfF5yZiA0kDTvBzPJPcwWcQWbwTq3WVg6NmiwAAAABJRU5ErkJggg=="}},96484:(e,t,l)=>{"use strict";l.r(t),l.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>k,frontMatter:()=>p,metadata:()=>r,toc:()=>c});var i=l(87462),a=(l(67294),l(3905)),n=l(15944),o=l(68109),d=l.n(o);const p={sidebar_position:10,description:"Upload the file to the plugin workspace."},s="Upload file",r={unversionedId:"abilities/basic/uploadFile",id:"abilities/basic/uploadFile",title:"Upload file",description:"Upload the file to the plugin workspace.",source:"@site/docs/abilities/basic/uploadFile.mdx",sourceDirName:"abilities/basic",slug:"/abilities/basic/uploadFile",permalink:"/docs/next/abilities/basic/uploadFile",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1690791943,formattedLastUpdatedAt:"Jul 31, 2023",sidebarPosition:10,frontMatter:{sidebar_position:10,description:"Upload the file to the plugin workspace."},sidebar:"abilities",previous:{title:"Audit log",permalink:"/docs/next/abilities/basic/auditlog"},next:{title:"Download file",permalink:"/docs/next/abilities/basic/downloadFile"}},u={},c=[{value:"Requirements",id:"requirements",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Step 1: Installation dependency",id:"step-1-installation-dependency",level:3},{value:"Ability to use",id:"ability-to-use",level:3},{value:"1. Call SDK to get the link to upload the file",id:"1-call-sdk-to-get-the-link-to-upload-the-file",level:4},{value:"2. Upload file through a link",id:"2-upload-file-through-a-link",level:4},{value:"SDK",id:"sdk",level:2}],h={toc:c};function k(e){let{components:t,...l}=e;return(0,a.kt)("wrapper",(0,i.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"upload-file"},"Upload file"),(0,a.kt)("h2",{id:"requirements"},"Requirements"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"ONES"),(0,a.kt)("th",{parentName:"tr",align:"left"},"@ones-op/node-ability"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"v3.11.40+"),(0,a.kt)("td",{parentName:"tr",align:"left"},"v0.3.8+")))),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"Users can upload files (enable larger than 10m) to the plugin storage space ",(0,a.kt)("inlineCode",{parentName:"p"},"workspace")," through this ability."),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("h3",{id:"step-1-installation-dependency"},"Step 1: Installation dependency"),(0,a.kt)("p",null,"Enter the /backend directory of the plugin project, and execute the following command for dependent installation:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"npm i @ones-op/node-ability\n")),(0,a.kt)("h3",{id:"ability-to-use"},"Ability to use"),(0,a.kt)("h4",{id:"1-call-sdk-to-get-the-link-to-upload-the-file"},"1. Call SDK to get the link to upload the file"),(0,a.kt)("p",null,"Use the ",(0,a.kt)("inlineCode",{parentName:"p"},"uploadFile")," method to specify the path under the plugin storage space ",(0,a.kt)("inlineCode",{parentName:"p"},"workspace"),". The ",(0,a.kt)("inlineCode",{parentName:"p"},"uploadFile")," method will return a file uploaded link ",(0,a.kt)("inlineCode",{parentName:"p"},"url")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { uploadFile } from '@ones-op/node-ability'\n\nexport async function uploadFileToPlugin(request: PluginRequest): Promise<PluginResponse> {\n  const url = await uploadFile()\n\n  return {\n    body: {\n      res: url,\n    },\n  }\n}\n")),(0,a.kt)("h4",{id:"2-upload-file-through-a-link"},"2. Upload file through a link"),(0,a.kt)("p",null,"Use this ",(0,a.kt)("inlineCode",{parentName:"p"},"url")," to select the file you want to upload"),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"The default valid time for file upload links is 60 minutes.")),(0,a.kt)("p",null,"Upload method reference"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# Replace {{URL}} with the URL obtained in step 1, and replace your uploaded file path in form\ncurl --location --request POST {{URL}} \\\n--header 'Cookie: language=zh' \\\n--form 'file=@\"/Users/hosea/Downloads/plugin(3).sql\"'\n")),(0,a.kt)(n.Z,{img:d(),mdxType:"Image"}),(0,a.kt)("h2",{id:"sdk"},"SDK"),(0,a.kt)("p",null,"Parameters reference\uff1a",(0,a.kt)("a",{parentName:"p",href:"/docs/next/reference/packages/node-ability/"},"@ones-op/node-ability")))}k.isMDXComponent=!0}}]);