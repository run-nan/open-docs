(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[6474],{1899:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/plugin-quick-action-add-en.4e26c22.1024.jpg 1024w,"+n.p+"assets/ideal-img/plugin-quick-action-add-en.ff3ecec.1439.jpg 1439w",images:[{path:n.p+"assets/ideal-img/plugin-quick-action-add-en.4e26c22.1024.jpg",width:1024,height:567},{path:n.p+"assets/ideal-img/plugin-quick-action-add-en.ff3ecec.1439.jpg",width:1439,height:797}],src:n.p+"assets/ideal-img/plugin-quick-action-add-en.4e26c22.1024.jpg",toString:function(){return n.p+"assets/ideal-img/plugin-quick-action-add-en.4e26c22.1024.jpg"},placeholder:void 0,width:1024,height:567},preSrc:"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlUlEQVQImVXNQQqCQACFYW+spGlomhdINw0ESlvBOY+U0RSodII0xMVfTQvrrT/+Z/i+j+M4JMmWqqpQSnE81VyUIstzLMtiuVpjxHGM67rshGAYBn5XliWmabKJoi/0PA8hBI++Z5omxnHUsCgKDYMgmIsf+Oz/i1JKDcMwnItpmnKtz3RNQ9e13No7++yAbS+I3tcvtSyYTzWidygAAAAASUVORK5CYII="}},28030:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/plugin-quick-action-modify-en.d48ccb4.1024.jpg 1024w,"+n.p+"assets/ideal-img/plugin-quick-action-modify-en.8e67d64.1438.jpg 1438w",images:[{path:n.p+"assets/ideal-img/plugin-quick-action-modify-en.d48ccb4.1024.jpg",width:1024,height:566},{path:n.p+"assets/ideal-img/plugin-quick-action-modify-en.8e67d64.1438.jpg",width:1438,height:795}],src:n.p+"assets/ideal-img/plugin-quick-action-modify-en.d48ccb4.1024.jpg",toString:function(){return n.p+"assets/ideal-img/plugin-quick-action-modify-en.d48ccb4.1024.jpg"},placeholder:void 0,width:1024,height:566},preSrc:"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdklEQVQImVWNSw4DIQxD5/4X7YYJgUIg4eMqTKWqC8uy9GxfOWcwR6TEIMpInJGrQJqiSEcIAS+quACg945AEe8qaE1OruLecEeGmT2gqkJEsPc+Wmt9wQ4iQinlt+hhjHFKc84De8lBH/kDHTBTmOq5czE/1x+RJMJuMhCNGwAAAABJRU5ErkJggg=="}},9474:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/plugin-quick-action-show-en.a7fbf27.1024.jpg 1024w,"+n.p+"assets/ideal-img/plugin-quick-action-show-en.7d28c01.1043.jpg 1043w",images:[{path:n.p+"assets/ideal-img/plugin-quick-action-show-en.a7fbf27.1024.jpg",width:1024,height:570},{path:n.p+"assets/ideal-img/plugin-quick-action-show-en.7d28c01.1043.jpg",width:1043,height:581}],src:n.p+"assets/ideal-img/plugin-quick-action-show-en.a7fbf27.1024.jpg",toString:function(){return n.p+"assets/ideal-img/plugin-quick-action-show-en.a7fbf27.1024.jpg"},placeholder:void 0,width:1024,height:570},preSrc:"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZ0lEQVQImU1MCwrFMAjr/e/6WEftqq2akcLeFohB8ilnPXDKgKpBm8B6x3KHuyMi/iy/2lDbhSYdaoZrDKy1EJkwm2/QzJDhIDKTZysXnxL/oqqYc26DpEHdpQ+KiIBhmlx/igx+eQN9+sSPZCda9wAAAABJRU5ErkJggg=="}},17942:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>c,kt:()=>g});var a=n(50959);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,u=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),d=s(n),m=i,g=d["".concat(u,".").concat(m)]||d[m]||p[m]||o;return n?a.createElement(g,l(l({ref:t},c),{},{components:n})):a.createElement(g,l({ref:t},c))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,l=new Array(o);l[0]=m;var r={};for(var u in t)hasOwnProperty.call(t,u)&&(r[u]=t[u]);r.originalType=e,r[d]="string"==typeof e?e:i,l[1]=r;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},91044:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(50959),i=n(45924);const o={tabItem:"tabItem_skN5"};function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(o.tabItem,l),hidden:n},t)}},42181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(28957),i=n(50959),o=n(45924),l=n(70562),r=n(94506),u=n(75814);const s={tabList:"tabList_Ifpf",tabItem:"tabItem_j1rW"};function c(e){let{className:t,block:n,selectedValue:r,selectValue:u,tabValues:c}=e;const d=[],{blockElementScrollPositionUntilNextRender:p}=(0,l.o5)(),m=e=>{const t=e.currentTarget,n=d.indexOf(t),a=c[n].value;a!==r&&(p(t),u(a))},g=e=>{var t;let n=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{var a;const t=d.indexOf(e.currentTarget)+1;n=null!=(a=d[t])?a:d[0];break}case"ArrowLeft":{var i;const t=d.indexOf(e.currentTarget)-1;n=null!=(i=d[t])?i:d[d.length-1];break}}null==(t=n)||t.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},c.map((e=>{let{value:t,label:n,attributes:l}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,key:t,ref:e=>d.push(e),onKeyDown:g,onClick:m},l,{className:(0,o.Z)("tabs__item",s.tabItem,null==l?void 0:l.className,{"tabs__item--active":r===t})}),null!=n?n:t)})))}function d(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function p(e){const t=(0,r.Y)(e);return i.createElement("div",{className:(0,o.Z)("tabs-container",s.tabList)},i.createElement(c,(0,a.Z)({},e,t)),i.createElement(d,(0,a.Z)({},e,t)))}function m(e){const t=(0,u.default)();return i.createElement(p,(0,a.Z)({key:String(t)},e))}},94506:(e,t,n)=>{"use strict";n.d(t,{Y:()=>p});var a=n(50959),i=n(28903),o=n(94150),l=n(40828),r=n(29163);function u(e){return function(e){var t,n;return null!=(t=null==(n=a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:n.filter(Boolean))?t:[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:i}}=e;return{value:t,label:n,attributes:a,default:i}}))}function s(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=null!=t?t:u(n);return function(e){const t=(0,l.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function c(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function d(e){let{queryString:t=!1,groupId:n}=e;const l=(0,i.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,o._X)(r),(0,a.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(l.location.search);t.set(r,e),l.replace({...l.location,search:t.toString()})}),[r,l])]}function p(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,o=s(e),[l,u]=(0,a.useState)((()=>function(e){var t;let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!c({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=null!=(t=a.find((e=>e.default)))?t:a[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:t,tabValues:o}))),[p,m]=d({queryString:n,groupId:i}),[g,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[i,o]=(0,r.Nk)(n);return[i,(0,a.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:i}),f=(()=>{const e=null!=p?p:g;return c({value:e,tabValues:o})?e:null})();(0,a.useLayoutEffect)((()=>{f&&u(f)}),[f]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!c({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);u(e),m(e),h(e)}),[m,h,o]),tabValues:o}}},64096:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>b,contentTitle:()=>h,default:()=>N,frontMatter:()=>g,metadata:()=>f,toc:()=>y});var a=n(28957),i=(n(50959),n(17942)),o=n(42181),l=n(91044),r=n(1899),u=n.n(r),s=n(28030),c=n.n(s),d=n(9474),p=n.n(d),m=n(49500);const g={sidebar_position:7,description:"Create a new action button in the upper right corner of the issue detail."},h="Issue detail action buttons",f={unversionedId:"abilities/business/project/layout-custom-quick-action/layout-custom-quick-action",id:"abilities/business/project/layout-custom-quick-action/layout-custom-quick-action",title:"Issue detail action buttons",description:"Create a new action button in the upper right corner of the issue detail.",source:"@site/docs/abilities/business/project/layout-custom-quick-action/layout-custom-quick-action.mdx",sourceDirName:"abilities/business/project/layout-custom-quick-action",slug:"/abilities/business/project/layout-custom-quick-action/",permalink:"/open-docs/docs/abilities/business/project/layout-custom-quick-action/",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1703230356,formattedLastUpdatedAt:"Dec 22, 2023",sidebarPosition:7,frontMatter:{sidebar_position:7,description:"Create a new action button in the upper right corner of the issue detail."},sidebar:"abilities",previous:{title:"Scene: Statistics of Sprint working hours within a project",permalink:"/open-docs/docs/abilities/business/project/project-custom-component/sample-project-custom-component1"},next:{title:"Scene: Push information to WeChat official account",permalink:"/open-docs/docs/abilities/business/project/layout-custom-quick-action/layout-custom-quick-action-example1"}},b={},y=[{value:"Requirements",id:"requirements",level:2},{value:"Overview",id:"overview",level:2},{value:"Performance of ability",id:"performance-of-ability",level:3},{value:"1. Add plugin shortcut",id:"1-add-plugin-shortcut",level:4},{value:"2. Adjust the plugin shortcut position",id:"2-adjust-the-plugin-shortcut-position",level:4},{value:"3. Release layout",id:"3-release-layout",level:4},{value:"Usage",id:"usage",level:2},{value:"Step 1: Ability configuration to add ability and module to the plugin",id:"step-1-ability-configuration-to-add-ability-and-module-to-the-plugin",level:3},{value:"1. Add abilities",id:"1-add-abilities",level:4},{value:"2. Add modules",id:"2-add-modules",level:4},{value:"3. Abilities Link Modules",id:"3-abilities-link-modules",level:4},{value:"Step 2: Dependence requirements",id:"step-2-dependence-requirements",level:3},{value:"Step 3: Customize shortcut button behavior",id:"step-3-customize-shortcut-button-behavior",level:3},{value:"1. Popup type",id:"1-popup-type",level:4},{value:"2. Interfaceless pure logic type",id:"2-interfaceless-pure-logic-type",level:4},{value:"Abilities in Different Life Cycle Stages",id:"abilities-in-different-life-cycle-stages",level:2},{value:"Examples",id:"examples",level:2},{value:"FAQ",id:"faq",level:2}],k=(v="Image",function(e){return m.warn("Component "+v+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)});var v;const A={toc:y},w="wrapper";function N(e){let{components:t,...n}=e;return(0,i.kt)(w,(0,a.Z)({},A,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"issue-detail-action-buttons"},"Issue detail action buttons"),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"ONES"),(0,i.kt)("th",{parentName:"tr",align:"left"},"@ones-op/bridge"),(0,i.kt)("th",{parentName:"tr",align:"left"},"@ones-op/store"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"v3.11.40+"),(0,i.kt)("td",{parentName:"tr",align:"left"},"v0.9.0+"),(0,i.kt)("td",{parentName:"tr",align:"left"},"v0.5.0+")))),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,'The open platform provides the "custom layout shortcut" ability for task items. After use, you can add custom shortcut buttons in the "global layout" and "local layout" configuration, which supports custom button functions and sequence adjustments. After applying to any type of task item, you can Use custom shortcuts in the corresponding task items. By using this ability, you can achieve more personalized functions, such as exporting comments, associating with related code repos and pushing official accounts.'),(0,i.kt)("h3",{id:"performance-of-ability"},"Performance of ability"),(0,i.kt)("h4",{id:"1-add-plugin-shortcut"},"1. Add plugin shortcut"),(0,i.kt)("p",null,'After enabling the plugin which using this ability, you can add a custom "plugin shortcut" on the layout configuration page of the issue type.'),(0,i.kt)(k,{img:u(),mdxType:"Image"}),(0,i.kt)("h4",{id:"2-adjust-the-plugin-shortcut-position"},"2. Adjust the plugin shortcut position"),(0,i.kt)("p",null,'After adding you can check the "plugin shortcut" in the "Overview widget configuration", which can adjust the position and whether it is displayed on the outside like other shortcuts.'),(0,i.kt)(k,{img:c(),mdxType:"Image"}),(0,i.kt)("h4",{id:"3-release-layout"},"3. Release layout"),(0,i.kt)("p",null,'After releasing the layout, you can check the added "plugin shortcut" in the upper right corner of the task item details form, and the corresponding function is defined by the plugin.'),(0,i.kt)(k,{img:p(),mdxType:"Image"}),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("h3",{id:"step-1-ability-configuration-to-add-ability-and-module-to-the-plugin"},"Step 1: Ability configuration to add ability and module to the plugin"),(0,i.kt)("h4",{id:"1-add-abilities"},"1. Add abilities"),(0,i.kt)("p",null,"Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"OP")," command to add abilities in the plugin project, select ",(0,i.kt)("inlineCode",{parentName:"p"},"layout-custom-quick-action")," type:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ npx op add ability\n  \u2714 Validating the input params\n  \u2714 Validating project files exists\n  \u2714 Generating initial answers by input params\n  \u2714 Parsing plugin config content\n\n? Please select the ability you want to add: \u2026 layout-custom-quick-action\nlayout-custom-quick-action@1.0.0\n")),(0,i.kt)("p",null,"Add relevant paragraphs in the ",(0,i.kt)("inlineCode",{parentName:"p"},"abilities")," field of ",(0,i.kt)("inlineCode",{parentName:"p"},"config/plugin.yaml")," in the plugin project:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"service:\n  app_id: ...\n  name: layout-custom-quick-action\n  ...\napis:\n  ...\nabilities:\n  - id: VBJN_y9T\n    name: 'custom layout shortcut'\n    version: 1.0.0\n    abilityType: LayoutCustomQuickAction\n    relateModule:\n      quickActionMenu: ''\n")),(0,i.kt)("h4",{id:"2-add-modules"},"2. Add modules"),(0,i.kt)("p",null,"Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"OP")," command to add modules in the plugin project, select ",(0,i.kt)("a",{parentName:"p",href:"../../../slot/global/global-modal-upload#onesglobalmodal"},"ones:global:modal")," type:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ npx op add module\n  \u2714 Validating the input params\n  \u2714 Validating project files exists\n  \u2714 Generating initial answers by input params\n  \u2714 Parsing plugin config content\n\nPre-require tasks run successfully\n? Please select the module type you want to add: \u2026 ones:global:modal\nones:global:modal\n")),(0,i.kt)("p",null,'The OP tool will ask to enter the title of the slot, we enter "pluginShortcut" as the title, and the OP tool will add the following content for the plugin:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"modules:\n  - id: ones-global-modal-Ne7E\n    title: 'Plugin shortcut'\n    moduleType: ones:global:modal\n    entry: modules/ones-global-modal-Ne7E/index.html\n")),(0,i.kt)("p",null,"At the same time, a module directory of ",(0,i.kt)("inlineCode",{parentName:"p"},"ones-global-modal-Ne7E")," has been added under the ",(0,i.kt)("inlineCode",{parentName:"p"},"web/src/modules")," directory of the plugin root directory."),(0,i.kt)("p",null,"add ",(0,i.kt)("inlineCode",{parentName:"p"},"preload"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"manual")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"icon")," configs to module:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"modules:\n  - id: ones-global-modal-Ne7E\n    title: 'Plugin shortcut'\n    moduleType: ones:global:modal\n    entry: modules/ones-global-modal-Ne7E/index.html\n    icon: logo.svg\n    preload: true\n    manual: true\n")),(0,i.kt)("admonition",{title:"notice",type:"caution"},(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"title")," is displayed as the title of the layout shortcut, supports multi-language configuration, please refer to ",(0,i.kt)("a",{parentName:"li",href:"../../../../reference/config/plugin.yaml#title"},"Plugin configuration file modules.title")," and ",(0,i.kt)("a",{parentName:"li",href:"../../../../guide/abilities/multilingual#use-of-multiple-languages-in-plugin-configuration"},"Use of multiple languages in plugin configuration"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"icon")," is displayed as the icon of the shortcut operation of the layout. By default, the plugin icon of @ones-design/icon is used. It is recommended to use a solid color svg icon to be consistent with the original shortcut operation icon. For configuration rules, refer to ",(0,i.kt)("a",{parentName:"li",href:"../../../slot/global/global-modal-upload#onesglobalmodal-1"},"ones:global:modal"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"preload")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"manual")," are required parameters, refer to ",(0,i.kt)("a",{parentName:"li",href:"../../../slot/global/global-modal-upload#onesglobalmodal-1"},"ones:global:modal"),"."))),(0,i.kt)("h4",{id:"3-abilities-link-modules"},"3. Abilities Link Modules"),(0,i.kt)("p",null,"In the ",(0,i.kt)("inlineCode",{parentName:"p"},"plugin.yaml")," file, associate the ability with the module, that is, configure the ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," of the module to the ",(0,i.kt)("inlineCode",{parentName:"p"},"quickActionMenu")," value of the ability configuration, and the final effect is as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"service:\n  app_id: ...\n  name: layout-custom-quick-action\n  ...\napis:\n  ...\nabilities:\n  - id: VBJN_y9T\n    name: 'custom layout shortcut'\n    version: 1.0.0\n    abilityType: LayoutCustomQuickAction\n    relateModule:\n      quickActionMenu: ones-global-modal-Ne7E\nmodules:\n  - id: ones-global-modal-Ne7E\n    title: 'Plugin shortcut'\n    moduleType: ones:global:modal\n    entry: modules/ones-global-modal-Ne7E/index.html\n    icon: logo.svg\n    preload: true\n    manual: true\n")),(0,i.kt)("h3",{id:"step-2-dependence-requirements"},"Step 2: Dependence requirements"),(0,i.kt)("p",null,"Enter the ",(0,i.kt)("inlineCode",{parentName:"p"},"web")," directory and install the ",(0,i.kt)("inlineCode",{parentName:"p"},"@ones-op/store")," dependency with the following command:"),(0,i.kt)(o.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,i.kt)(l.default,{value:"npm",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @ones-op/store @ones-op/bridge\n"))),(0,i.kt)(l.default,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @ones-op/store @ones-op/bridge\n"))),(0,i.kt)(l.default,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add @ones-op/store @ones-op/bridge\n")))),(0,i.kt)("h3",{id:"step-3-customize-shortcut-button-behavior"},"Step 3: Customize shortcut button behavior"),(0,i.kt)("p",null,"Define the behavior of the shortcut button in the module, the following is an example of the plugin front end."),(0,i.kt)("admonition",{title:"notice",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"After executing the custom shortcut button logic, the slot must be destroyed by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"lifecycle.destroy()")," method.")),(0,i.kt)("h4",{id:"1-popup-type"},"1. Popup type"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import { ConfigProvider, Modal } from '@ones-design/core'\nimport { lifecycle } from '@ones-op/bridge'\nimport { useTaskInfo } from '@ones-op/store'\nimport React, { useEffect } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\n\nfunction App() {\n  // current issue uuid\n  const { uuid } = useTaskInfo()\n\n  return (\n    <>\n      <Modal\n        onCancel={function noRefCheck() {\n          // When canceling, destroy the popup window\n          lifecycle.destroy()\n        }}\n        onOk={function noRefCheck() {\n          // Click OK to destroy the popup\n          lifecycle.destroy()\n        }}\n        title=\"customize_shortcuts\"\n        closable\n        visible\n        width={520}\n      >\n        Customize shortcuts\n      </Modal>\n    </>\n  )\n}\n\nReactDOM.render(\n  <ConfigProvider>\n    <App />\n  </ConfigProvider>,\n  document.getElementById('ones-mf-root'),\n)\n")),(0,i.kt)("h4",{id:"2-interfaceless-pure-logic-type"},"2. Interfaceless pure logic type"),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"If you expect the plugin to still respond to another click by the user to activate while it is activated, you should consider combining ",(0,i.kt)("a",{parentName:"p",href:"/open-docs/docs/reference/packages/store/#useModuleInstanceInfo"},(0,i.kt)("inlineCode",{parentName:"a"},"useModuleInstanceInfo"))," to achieve this.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"  import React, { useEffect } from 'react'\n  import ReactDOM from 'react-dom'\n  import { ConfigProvider } from '@ones-design/core'\n  import { lifecycle } from '@ones-op/bridge'\n  import { useTaskInfo } from '@ones-op/store'\n  import './index.css'\n\n  function App() {\n    // current issue uuid\n    const { uuid } = useTaskInfo()\n\n    useEffect(() => {\n      // execute related operation logic\n      ...\n      // destroy the slot last, otherwise it cannot be triggered again\n      lifecycle.destroy()\n    })\n\n    return <></>\n  }\n\n  ReactDOM.render(<ConfigProvider><App/></ConfigProvider>, document.getElementById('ones-mf-root'))\n")),(0,i.kt)("h2",{id:"abilities-in-different-life-cycle-stages"},"Abilities in Different Life Cycle Stages"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Plugin enable:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'You can add "plugin shortcut" to all issue type layout;'),(0,i.kt)("li",{parentName:"ul"},'If the "plugin shortcut" has been configured to the layout, and will be displayed again after it is enabled again.')),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Plugin disable:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'You can not add "plugin shortcut" to all issue type layout;'),(0,i.kt)("li",{parentName:"ul"},'The "plugin shortcut" that has been configured to the layout, will not be displayed;'),(0,i.kt)("li",{parentName:"ul"},'The draft of the layout of the configured "plugin shortcut". At this time, the data is illegal and cannot be edited. You can cancel the release and exit and reenter.')),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Plugin uninstall:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'You can not add "plugin shortcut" to all issue type layout;'),(0,i.kt)("li",{parentName:"ul"},'The previously configured "plugin quick action" will be deleted, and if you want restore previously configured records, you need to be reconfigured;'),(0,i.kt)("li",{parentName:"ul"},'The draft of the layout of the configured "plugin shortcut". At this time, the data is illegal and cannot be edited. You can cancel the release and exit and reenter.')),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"./layout-custom-quick-action-example1"},"Scene: Push information to WeChat official account"))),(0,i.kt)("h2",{id:"faq"},"FAQ"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Does the custom layout shortcut ability support both the global layout and the local layout? ")),(0,i.kt)("p",null,"Yes, after using the ability, both the global layout and the local layout support adding custom layout shortcuts."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"How to set the title and icon of the custom layout shortcut? ")),(0,i.kt)("p",null,"The title and icon of the custom layout shortcut are configured in the slot, and the title supports multiple languages. For how to configure it, please refer to the ",(0,i.kt)("a",{parentName:"p",href:"#2-add-modules"},"Plugin add modules")," chapter."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"How to bind the custom layout shortcut ability and module?")),(0,i.kt)("p",null,"The configuration parameters ",(0,i.kt)("inlineCode",{parentName:"p"},"quickActionMenu")," of the file ",(0,i.kt)("inlineCode",{parentName:"p"},"plugin.yaml"),", used to bind the relationship with the correlation between the custom layout shortcut ability and the frontend module."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"What should I do if I need to add multiple plugin shortcut?")),(0,i.kt)("p",null,"There is a one-to-one relationship between custom layout shortcut abilities and modules. Multiple abilities are not allowed to be associated with the same module, nor is it allowed for one ability to be associated with multiple modules. At the same time, based on the principle of functional independence, it is recommended that developers define only one custom layout shortcut operation ability per plugin."))}N.isMDXComponent=!0}}]);