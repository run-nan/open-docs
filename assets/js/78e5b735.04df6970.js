(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[8346],{51796:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/plugin-detail-en.5ce41a0.613.png 613w",images:[{path:a.p+"assets/ideal-img/plugin-detail-en.5ce41a0.613.png",width:613,height:560}],src:a.p+"assets/ideal-img/plugin-detail-en.5ce41a0.613.png",toString:function(){return a.p+"assets/ideal-img/plugin-detail-en.5ce41a0.613.png"},placeholder:void 0,width:613,height:560},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoElEQVQYlW2PQQrCMBBFc/9LuXPlCcSFCEoFa5omk5m2Sb50oJJUB/4m8/h5Y4gFg48gCpimCSEEeO9BRCilfGOOV8H95eFHp1A9pQbPDwfrRpScm8WaeswsERwjUkr6kHPW/DS+rUXXdej7Xt1ijOpag9o42AHMAmGGiDTLpnERblzWb/d+2vh0gjfNyDmp5wbuYw4XxunGKIsg/TliAz/0HWEcQwlD3QAAAABJRU5ErkJggg=="}},70379:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/plugin-detail-zh.f6a5754.612.png 612w",images:[{path:a.p+"assets/ideal-img/plugin-detail-zh.f6a5754.612.png",width:612,height:564}],src:a.p+"assets/ideal-img/plugin-detail-zh.f6a5754.612.png",toString:function(){return a.p+"assets/ideal-img/plugin-detail-zh.f6a5754.612.png"},placeholder:void 0,width:612,height:564},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVQYlX2PzQrCQAyE9/0fy7PXehSEslgPdpOmZd2/kQR6sLYNDIQw+ZJxIjNGEjARaq1ore3KXfuEx4vRSoLWofHWE940qQVn5WYekdM5zYjPYYD3Hsxs0uG69EMMIUBE/gjbC+4TozWauJRi2tKMyLIgpmzGVbs/Xu4RnV+AmqGgozBf4GliFEumf/UAAAAASUVORK5CYII="}},18679:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(67294),l=a(34334);const i="tabItem_Ymn6";function s(e){let{children:t,hidden:a,className:s}=e;return n.createElement("div",{role:"tabpanel",className:(0,l.Z)(i,s),hidden:a},t)}},34259:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(87462),l=a(67294),i=a(34334),s=a(51048),r=a(33609),u=a(1943),o=a(72957);const g="tabList__CuJ",p="tabItem_LNqP";function d(e){var t,a;const{lazy:s,block:d,defaultValue:c,values:m,groupId:h,className:f}=e,k=l.Children.map(e.children,(e=>{if((0,l.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=m?m:k.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),y=(0,r.l)(b,((e,t)=>e.value===t.value));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const v=null===c?c:null!=(t=null!=c?c:null==(a=k.find((e=>e.props.default)))?void 0:a.props.value)?t:k[0].props.value;if(null!==v&&!b.some((e=>e.value===v)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+v+'" but none of its children has the corresponding value. Available values are: '+b.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:A,setTabGroupChoices:w}=(0,u.U)(),[N,E]=(0,l.useState)(v),S=[],{blockElementScrollPositionUntilNextRender:x}=(0,o.o5)();if(null!=h){const e=A[h];null!=e&&e!==N&&b.some((t=>t.value===e))&&E(e)}const T=e=>{const t=e.currentTarget,a=S.indexOf(t),n=b[a].value;n!==N&&(x(t),E(n),null!=h&&w(h,String(n)))},U=e=>{var t;let a=null;switch(e.key){case"Enter":T(e);break;case"ArrowRight":{var n;const t=S.indexOf(e.currentTarget)+1;a=null!=(n=S[t])?n:S[0];break}case"ArrowLeft":{var l;const t=S.indexOf(e.currentTarget)-1;a=null!=(l=S[t])?l:S[S.length-1];break}}null==(t=a)||t.focus()};return l.createElement("div",{className:(0,i.Z)("tabs-container",g)},l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":d},f)},b.map((e=>{let{value:t,label:a,attributes:s}=e;return l.createElement("li",(0,n.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>S.push(e),onKeyDown:U,onClick:T},s,{className:(0,i.Z)("tabs__item",p,null==s?void 0:s.className,{"tabs__item--active":N===t})}),null!=a?a:t)}))),s?(0,l.cloneElement)(k.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):l.createElement("div",{className:"margin-top--md"},k.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function c(e){const t=(0,s.Z)();return l.createElement(d,(0,n.Z)({key:String(t)},e))}},57988:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>u,metadata:()=>g,toc:()=>d});var n=a(87462),l=(a(67294),a(3905)),i=a(34259),s=a(18679),r=a(15944);const u={sidebar_position:4,description:"The platform supports internationalization capabilities, and you can easily translate plugin.",toc_max_heading_level:4},o="Internationalization",g={unversionedId:"guide/abilities/multilingual",id:"guide/abilities/multilingual",title:"Internationalization",description:"The platform supports internationalization capabilities, and you can easily translate plugin.",source:"@site/docs/guide/abilities/multilingual.mdx",sourceDirName:"guide/abilities",slug:"/guide/abilities/multilingual",permalink:"/docs/next/guide/abilities/multilingual",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1690791943,formattedLastUpdatedAt:"Jul 31, 2023",sidebarPosition:4,frontMatter:{sidebar_position:4,description:"The platform supports internationalization capabilities, and you can easily translate plugin.",toc_max_heading_level:4},sidebar:"guide",previous:{title:"Add ability",permalink:"/docs/next/guide/abilities/add-abilities"},next:{title:"Request",permalink:"/docs/next/guide/abilities/interface-request"}},p={},d=[{value:"Requirements",id:"requirements",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Use of multiple languages in plugin configuration",id:"use-of-multiple-languages-in-plugin-configuration",level:3},{value:"Step 1: Multilingual declaration",id:"step-1-multilingual-declaration",level:4},{value:"Step 2: Using key values to occupy placeholder",id:"step-2-using-key-values-to-occupy-placeholder",level:4},{value:"Use multiple languages in the plugin backend",id:"use-multiple-languages-in-the-plugin-backend",level:3},{value:"Step 1: Multilingual declaration",id:"step-1-multilingual-declaration-1",level:4},{value:"Step 2: Installation dependency",id:"step-2-installation-dependency",level:4},{value:"Step 3: Usage",id:"step-3-usage",level:4},{value:"Use multiple languages in the plugin frontend",id:"use-multiple-languages-in-the-plugin-frontend",level:3},{value:"Step 1: Learn about currently supported language identifiers",id:"step-1-learn-about-currently-supported-language-identifiers",level:4},{value:"Step 2: Multilingual declaration",id:"step-2-multilingual-declaration",level:4},{value:"Step 3: Usage",id:"step-3-usage-1",level:4},{value:"FAQ",id:"faq",level:2},{value:"When the same account selects different languages in different browsers, there is a mismatch when using the ability to obtain user language information",id:"when-the-same-account-selects-different-languages-in-different-browsers-there-is-a-mismatch-when-using-the-ability-to-obtain-user-language-information",level:5}],c={toc:d};function m(e){let{components:t,...u}=e;return(0,l.kt)("wrapper",(0,n.Z)({},c,u,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"internationalization"},"Internationalization"),(0,l.kt)("h2",{id:"requirements"},"Requirements"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"ONES"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"v3.6.0+")))),(0,l.kt)("h2",{id:"overview"},"Overview"),(0,l.kt)("p",null,"Plugins provide the ability to configure internationalized content, which allows your plugin to perceive the locale of ONES and demonstrate your plugin internationalization requirements according to the locale."),(0,l.kt)("p",null,"Take the details page of the plugin as an example, when the language of the ONES system is Chinese, as shown in the following figure:"),(0,l.kt)(r.Z,{img:a(70379),mdxType:"Image"}),(0,l.kt)("p",null,"When the ONES system is in English, as shown in the following figure:"),(0,l.kt)(r.Z,{img:a(51796),mdxType:"Image"}),(0,l.kt)("p",null,"In summary, it can be seen that after the use of multilingualism. The content of the plugin can be switched with the language switch of ONES."),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("h3",{id:"use-of-multiple-languages-in-plugin-configuration"},"Use of multiple languages in plugin configuration"),(0,l.kt)("h4",{id:"step-1-multilingual-declaration"},"Step 1: Multilingual declaration"),(0,l.kt)("p",null,"You need to create a new ",(0,l.kt)("inlineCode",{parentName:"p"},"en.yaml")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"zh.yaml")," files in the ",(0,l.kt)("inlineCode",{parentName:"p"},"workspace")," folder under the root directory of the plugin project, and configure the language as follows:"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Chinese configuration")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="/workspace/language/zh.yaml"',title:'"/workspace/language/zh.yaml"'},"PluginName: \u591a\u8bed\u8a00\nPluginDescription: \u8fd9\u662f\u4e00\u4e2a\u652f\u6301\u4e2d\u82f1\u6587\u4e24\u79cd\u8bed\u8a00\u7684\u63d2\u4ef6\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"English configuration")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="/workspace/language/en.yaml"',title:'"/workspace/language/en.yaml"'},"PluginName: Multil-Language-Plugin\nPluginDescription: The plugin is used to test Mult-Language abilities\n")),(0,l.kt)("h4",{id:"step-2-using-key-values-to-occupy-placeholder"},"Step 2: Using key values to occupy placeholder"),(0,l.kt)("p",null,"Then we use ",(0,l.kt)("inlineCode",{parentName:"p"},"{{.key}}")," to occupy places in the configuration file where we need to use multiple languages. For example, implement multiple languages in: ",(0,l.kt)("inlineCode",{parentName:"p"},"plugin.yaml")," file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="/config/plugin.yaml"',title:'"/config/plugin.yaml"'},"service:\n  name: '{{.PluginName}}'\n  description: '{{.PluginDescription}}'\n")),(0,l.kt)("p",null,"This completes the multilingual configuration in the plugin configuration file."),(0,l.kt)("h3",{id:"use-multiple-languages-in-the-plugin-backend"},"Use multiple languages in the plugin backend"),(0,l.kt)("h4",{id:"step-1-multilingual-declaration-1"},"Step 1: Multilingual declaration"),(0,l.kt)("p",null,"Add ",(0,l.kt)("strong",{parentName:"p"},"zh.yaml")," and ",(0,l.kt)("strong",{parentName:"p"},"en.yaml")," files under ",(0,l.kt)("inlineCode",{parentName:"p"},"/workspace/language"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="/workspace/language/zh.yaml"',title:'"/workspace/language/zh.yaml"'},"PluginName: \u591a\u80fd\u529b\u63d2\u4ef6Demo\nPluginDescription: Node.js \u63d2\u4ef6\u7684 demo, \u63d0\u4f9b\u4e86\u6240\u6709\u80fd\u529b\u548c\u5de5\u5177\u6807\u51c6\u4f7f\u7528\u65b9\u5f0f\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="/workspace/language/en.yaml"',title:'"/workspace/language/en.yaml"'},"PluginName: Multilability plugin Demo\nPluginDescription: The demo of Node.js, providing  all the ability and standard usage of tools\n")),(0,l.kt)("h4",{id:"step-2-installation-dependency"},"Step 2: Installation dependency"),(0,l.kt)("p",null,"Go to the ",(0,l.kt)("inlineCode",{parentName:"p"},"/backend")," directory of the plugin project, and execute the following command for dependent installation:"),(0,l.kt)(i.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,l.kt)(s.Z,{value:"npm",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @ones-op/node-ability\n"))),(0,l.kt)(s.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @ones-op/node-ability\n")))),(0,l.kt)("h4",{id:"step-3-usage"},"Step 3: Usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"import { Language } from '@ones-op/node-ability'\n\nexport async function multiple_language(request: PluginRequest): Promise<PluginResponse> {\n  const { body, headers } = request\n  const userUUID = headers['Ones-User-Id']\n  // get user language\n  const language = await Language.getLanguage(userUUID)\n  // gets the value of the multilingual key corresponding to the language\n  const description = await Language.getLanguageString(language, 'PluginDescription')\n\n  return {\n    body: {\n      res: {\n        description,\n      },\n      requestBody: body,\n    },\n  }\n}\n")),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"This ability obtains the language information set by the user last time. If it is directly responding to the front-end request, it is recommended to directly use the user language information in the front-end request.")),(0,l.kt)("h3",{id:"use-multiple-languages-in-the-plugin-frontend"},"Use multiple languages in the plugin frontend"),(0,l.kt)("p",null,"In the plugin, you can use ",(0,l.kt)("inlineCode",{parentName:"p"},"window")," to access the global variables that we injected in the plugin execution environment."),(0,l.kt)("h4",{id:"step-1-learn-about-currently-supported-language-identifiers"},"Step 1: Learn about currently supported language identifiers"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Identification"),(0,l.kt)("th",{parentName:"tr",align:null},"language"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zh-CN"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7b80\u4f53\u4e2d\u6587")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"en"),(0,l.kt)("td",{parentName:"tr",align:null},"\u82f1\u8bed")))),(0,l.kt)("h4",{id:"step-2-multilingual-declaration"},"Step 2: Multilingual declaration"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="language.tsx"',title:'"language.tsx"'},"const zhHans = {\n  toast: '\u5410\u53f8',\n  modal: '\u5bf9\u8bdd\u6846',\n  text: '\u4f60\u597d',\n  pwdErr: '\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801\uff01',\n  userNameErr: '\u7528\u6237\u540d\u9519\u8bef!',\n  ok: '\u786e\u5b9a',\n  cancel: '\u53d6\u6d88',\n}\n\nconst en: typeof zhHans = {\n  toast: 'toast',\n  modal: 'Dialog',\n  text: 'hello',\n  pwdErr: 'please input password again',\n  userNameErr: 'usename error!',\n  ok: 'ok',\n  cancel: 'cancel',\n}\n\nconst resourceMap: { [_: string]: typeof zhHans } = {\n  'zh-CN': zhHans,\n  'en': en,\n}\n")),(0,l.kt)("h4",{id:"step-3-usage-1"},"Step 3: Usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="index.tsx"',title:'"index.tsx"'},"const locale = (window as any).__ones_op_locale__?.locale || 'en'\n\nconst langResource = resourceMap[locale]\n")),(0,l.kt)("h2",{id:"faq"},"FAQ"),(0,l.kt)("h5",{id:"when-the-same-account-selects-different-languages-in-different-browsers-there-is-a-mismatch-when-using-the-ability-to-obtain-user-language-information"},"When the same account selects different languages in different browsers, there is a mismatch when using the ability to obtain user language information"),(0,l.kt)("p",null,"The same user is allowed to select different languages in different browsers, but only the language information that the user selected last time can be obtained when acquiring the user language through the ability. Therefore, for the interface directly requested by the front end, the language information carried in the request is directly used."))}m.isMDXComponent=!0}}]);