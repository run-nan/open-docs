(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[5645],{7953:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/sample-simple-auth1.b2ff0ba.1024.png 1024w,"+n.p+"assets/ideal-img/sample-simple-auth1.80b4a75.1792.png 1792w,"+n.p+"assets/ideal-img/sample-simple-auth1.88e4a96.2020.png 2020w",images:[{path:n.p+"assets/ideal-img/sample-simple-auth1.b2ff0ba.1024.png",width:1024,height:359},{path:n.p+"assets/ideal-img/sample-simple-auth1.80b4a75.1792.png",width:1792,height:628},{path:n.p+"assets/ideal-img/sample-simple-auth1.88e4a96.2020.png",width:2020,height:708}],src:n.p+"assets/ideal-img/sample-simple-auth1.b2ff0ba.1024.png",toString:function(){return n.p+"assets/ideal-img/sample-simple-auth1.b2ff0ba.1024.png"},placeholder:void 0,width:1024,height:359},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbElEQVQImS3MQQ5CIQwAUU7uvTyPa5EABUpLx/yvs33JpFobSzq1fMg5U0pBROgijNF4vYXHs5PmnKhu/ARXaocxJmtN5rpsQRjJ3TDdmB8ighOBm9GbUGWztt+W7s2/3xPMjK0bNcf94O58AX8Em9DQFD1HAAAAAElFTkSuQmCC"}},49133:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/sample-simple-auth2.f432e60.1024.png 1024w,"+n.p+"assets/ideal-img/sample-simple-auth2.ce204c2.1792.png 1792w,"+n.p+"assets/ideal-img/sample-simple-auth2.4bbc70b.2002.png 2002w",images:[{path:n.p+"assets/ideal-img/sample-simple-auth2.f432e60.1024.png",width:1024,height:453},{path:n.p+"assets/ideal-img/sample-simple-auth2.ce204c2.1792.png",width:1792,height:793},{path:n.p+"assets/ideal-img/sample-simple-auth2.4bbc70b.2002.png",width:2002,height:886}],src:n.p+"assets/ideal-img/sample-simple-auth2.f432e60.1024.png",toString:function(){return n.p+"assets/ideal-img/sample-simple-auth2.f432e60.1024.png"},placeholder:void 0,width:1024,height:453},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAZ0lEQVQImTWM2xECMQwD039ndEEJdxAndvxYJgE0o9GHtGq9C2stlhlqhgxFZKCqjCncXXg8lWaq6JisSLY88gA6FZlGuANJqyqoYuffkcm8bq6X4Jm7/g3Z229mFR6Bvvt5NI8DfgAP1ZzTadqNCgAAAABJRU5ErkJggg=="}},17942:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>m,kt:()=>g});var i=n(50959);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=i.createContext({}),o=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=o(e.components);return i.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,p=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),u=o(n),c=a,g=u["".concat(p,".").concat(c)]||u[c]||d[c]||s;return n?i.createElement(g,l(l({ref:t},m),{},{components:n})):i.createElement(g,l({ref:t},m))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,l=new Array(s);l[0]=c;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[u]="string"==typeof e?e:a,l[1]=r;for(var o=2;o<s;o++)l[o]=n[o];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},58157:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>b,frontMatter:()=>m,metadata:()=>d,toc:()=>g});var i=n(28957),a=(n(50959),n(17942)),s=n(7953),l=n.n(s),r=n(49133),p=n.n(r),o=n(49500);const m={},u="Scene\uff1a Assign employees of the department to make a simple login",d={unversionedId:"abilities/business/account/simple-auth/sample-simple-auth1",id:"abilities/business/account/simple-auth/sample-simple-auth1",title:"Scene\uff1a Assign employees of the department to make a simple login",description:"Scene Description",source:"@site/docs/abilities/business/account/simple-auth/sample-simple-auth1.mdx",sourceDirName:"abilities/business/account/simple-auth",slug:"/abilities/business/account/simple-auth/sample-simple-auth1",permalink:"/open-docs/docs/abilities/business/account/simple-auth/sample-simple-auth1",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1703230356,formattedLastUpdatedAt:"Dec 22, 2023",frontMatter:{},sidebar:"abilities",previous:{title:"Simple auth",permalink:"/open-docs/docs/abilities/business/account/simple-auth/"},next:{title:"Synchronize with third-party system",permalink:"/open-docs/docs/abilities/business/account/synchronize-with-third-party-system/"}},c={},g=[{value:"Scene Description",id:"scene-description",level:2},{value:"Performance",id:"performance",level:2},{value:"Solution",id:"solution",level:2},{value:"Implementation idea",id:"implementation-idea",level:3},{value:"Plugin development",id:"plugin-development",level:3}],h=(f="Image",function(e){return o.warn("Component "+f+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",e)});var f;const A={toc:g},y="wrapper";function b(e){let{components:t,...n}=e;return(0,a.kt)(y,(0,i.Z)({},A,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"scene-assign-employees-of-the-department-to-make-a-simple-login"},"Scene\uff1a Assign employees of the department to make a simple login"),(0,a.kt)("h2",{id:"scene-description"},"Scene Description"),(0,a.kt)("p",null,"Users want employees of the ",(0,a.kt)("inlineCode",{parentName:"p"},"Altman")," department to log in directly without a password."),(0,a.kt)("h2",{id:"performance"},"Performance"),(0,a.kt)("p",null,"Users do not need to enter a password, just declare their own department and ",(0,a.kt)("inlineCode",{parentName:"p"},"user_ uuid")," to log in directly."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Employees whose department is ",(0,a.kt)("inlineCode",{parentName:"li"},"monster")," cannot simply log in.")),(0,a.kt)(h,{img:l(),mdxType:"Image"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Employees whose department is ",(0,a.kt)("inlineCode",{parentName:"li"},"Altman")," successfully log in simply and get access token.")),(0,a.kt)(h,{img:p(),mdxType:"Image"}),(0,a.kt)("h2",{id:"solution"},"Solution"),(0,a.kt)("h3",{id:"implementation-idea"},"Implementation idea"),(0,a.kt)("p",null,"Through the simple login ability, when an employee whose department is ",(0,a.kt)("inlineCode",{parentName:"p"},"Altman")," is identified, the origin regular login logic of the ONES system is skipped and the login status of the employee is directly realized by calling the simple login interface of the plugin directly."),(0,a.kt)("h3",{id:"plugin-development"},"Plugin development"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Use the OP tool to add simple-auth ability")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Complete the business logic of the ",(0,a.kt)("inlineCode",{parentName:"p"},"SimpleAuthValidate")," method"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { PluginRequest, PluginResponse } from '@ones-op/node-types'\n\nexport async function SimpleAuthValidate(request: PluginRequest): Promise<PluginResponse> {\n  const body = request?.body as any\n  let user_uuid = body['user_uuid']\n  let department = body['department']\n  if (!user_uuid) {\n    return {\n      body: {\n        code: 400,\n        reason: 'user_uuid miss',\n      },\n    }\n  }\n  if (!department) {\n    return {\n      body: {\n        code: 400,\n        reason: 'department miss',\n      },\n    }\n  } else if (department != 'Altman') {\n    return {\n      body: {\n        code: 401,\n        reason: 'This department doesnt have the authority to login in',\n      },\n    }\n  }\n  return {\n    body: {\n      code: 200,\n      data: {\n        uuid: user_uuid,\n        department: department,\n      },\n    },\n  }\n}\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Install and enable the plugin to support simple login for employees of specified departments.")))}b.isMDXComponent=!0}}]);