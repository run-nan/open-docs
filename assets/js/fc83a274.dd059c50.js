(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[25645],{73412:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/sample-simple-auth1.b2ff0ba.1024.png 1024w,"+i.p+"assets/ideal-img/sample-simple-auth1.88e4a96.2020.png 2020w",images:[{path:i.p+"assets/ideal-img/sample-simple-auth1.b2ff0ba.1024.png",width:1024,height:359},{path:i.p+"assets/ideal-img/sample-simple-auth1.88e4a96.2020.png",width:2020,height:708}],src:i.p+"assets/ideal-img/sample-simple-auth1.b2ff0ba.1024.png",toString:function(){return i.p+"assets/ideal-img/sample-simple-auth1.b2ff0ba.1024.png"},placeholder:void 0,width:1024,height:359},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbElEQVQImS3MQQ5CIQwAUU7uvTyPa5EABUpLx/yvs33JpFobSzq1fMg5U0pBROgijNF4vYXHs5PmnKhu/ARXaocxJmtN5rpsQRjJ3TDdmB8ighOBm9GbUGWztt+W7s2/3xPMjK0bNcf94O58AX8Em9DQFD1HAAAAAElFTkSuQmCC"}},76692:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/sample-simple-auth2.f432e60.1024.png 1024w,"+i.p+"assets/ideal-img/sample-simple-auth2.4bbc70b.2002.png 2002w",images:[{path:i.p+"assets/ideal-img/sample-simple-auth2.f432e60.1024.png",width:1024,height:453},{path:i.p+"assets/ideal-img/sample-simple-auth2.4bbc70b.2002.png",width:2002,height:886}],src:i.p+"assets/ideal-img/sample-simple-auth2.f432e60.1024.png",toString:function(){return i.p+"assets/ideal-img/sample-simple-auth2.f432e60.1024.png"},placeholder:void 0,width:1024,height:453},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAZ0lEQVQImTWM2xECMQwD039ndEEJdxAndvxYJgE0o9GHtGq9C2stlhlqhgxFZKCqjCncXXg8lWaq6JisSLY88gA6FZlGuANJqyqoYuffkcm8bq6X4Jm7/g3Z229mFR6Bvvt5NI8DfgAP1ZzTadqNCgAAAABJRU5ErkJggg=="}},21339:(e,t,i)=>{"use strict";i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>A,frontMatter:()=>d,metadata:()=>u,toc:()=>h});var n=i(87462),s=(i(67294),i(3905)),a=i(15944),l=i(73412),p=i.n(l),o=i(76692),m=i.n(o);const d={},r="Scene\uff1a Assign employees of the department to make a simple login",u={unversionedId:"abilities/business/account/simple-auth/sample-simple-auth1",id:"abilities/business/account/simple-auth/sample-simple-auth1",title:"Scene\uff1a Assign employees of the department to make a simple login",description:"Scene Description",source:"@site/docs/abilities/business/account/simple-auth/sample-simple-auth1.mdx",sourceDirName:"abilities/business/account/simple-auth",slug:"/abilities/business/account/simple-auth/sample-simple-auth1",permalink:"/open-docs/docs/next/abilities/business/account/simple-auth/sample-simple-auth1",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1690863366,formattedLastUpdatedAt:"Aug 1, 2023",frontMatter:{},sidebar:"abilities",previous:{title:"Simple auth",permalink:"/open-docs/docs/next/abilities/business/account/simple-auth/"},next:{title:"Synchronize with third-party system",permalink:"/open-docs/docs/next/abilities/business/account/synchronize-with-third-party-system/"}},c={},h=[{value:"Scene Description",id:"scene-description",level:2},{value:"Performance",id:"performance",level:2},{value:"Solution",id:"solution",level:2},{value:"Implementation idea",id:"implementation-idea",level:3},{value:"Plugin development",id:"plugin-development",level:3}],g={toc:h};function A(e){let{components:t,...i}=e;return(0,s.kt)("wrapper",(0,n.Z)({},g,i,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"scene-assign-employees-of-the-department-to-make-a-simple-login"},"Scene\uff1a Assign employees of the department to make a simple login"),(0,s.kt)("h2",{id:"scene-description"},"Scene Description"),(0,s.kt)("p",null,"Users want employees of the ",(0,s.kt)("inlineCode",{parentName:"p"},"Altman")," department to log in directly without a password."),(0,s.kt)("h2",{id:"performance"},"Performance"),(0,s.kt)("p",null,"Users do not need to enter a password, just declare their own department and ",(0,s.kt)("inlineCode",{parentName:"p"},"user_ uuid")," to log in directly."),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Employees whose department is ",(0,s.kt)("inlineCode",{parentName:"li"},"monster")," cannot simply log in.")),(0,s.kt)(a.Z,{img:p(),mdxType:"Image"}),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Employees whose department is ",(0,s.kt)("inlineCode",{parentName:"li"},"Altman")," successfully log in simply and get access token.")),(0,s.kt)(a.Z,{img:m(),mdxType:"Image"}),(0,s.kt)("h2",{id:"solution"},"Solution"),(0,s.kt)("h3",{id:"implementation-idea"},"Implementation idea"),(0,s.kt)("p",null,"Through the simple login ability, when an employee whose department is ",(0,s.kt)("inlineCode",{parentName:"p"},"Altman")," is identified, the origin regular login logic of the ONES system is skipped and the login status of the employee is directly realized by calling the simple login interface of the plugin directly."),(0,s.kt)("h3",{id:"plugin-development"},"Plugin development"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Use the OP tool to add simple-auth ability")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Complete the business logic of the ",(0,s.kt)("inlineCode",{parentName:"p"},"SimpleAuthValidate")," method"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { PluginRequest, PluginResponse } from '@ones-op/node-types'\n\nexport async function SimpleAuthValidate(request: PluginRequest): Promise<PluginResponse> {\n  const body = request?.body as any\n  let user_uuid = body['user_uuid']\n  let department = body['department']\n  if (!user_uuid) {\n    return {\n      body: {\n        code: 400,\n        reason: 'user_uuid miss',\n      },\n    }\n  }\n  if (!department) {\n    return {\n      body: {\n        code: 400,\n        reason: 'department miss',\n      },\n    }\n  } else if (department != 'Altman') {\n    return {\n      body: {\n        code: 401,\n        reason: 'This department doesnt have the authority to login in',\n      },\n    }\n  }\n  return {\n    body: {\n      code: 200,\n      data: {\n        uuid: user_uuid,\n        department: department,\n      },\n    },\n  }\n}\n")),(0,s.kt)("ol",{start:3},(0,s.kt)("li",{parentName:"ol"},"Install and enable the plugin to support simple login for employees of specified departments.")))}A.isMDXComponent=!0}}]);