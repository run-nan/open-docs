(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[72986],{23506:(e,i,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/sider-permission-01.0db2ee2.1024.png 1024w,"+s.p+"assets/ideal-img/sider-permission-01.c2de554.1918.png 1918w",images:[{path:s.p+"assets/ideal-img/sider-permission-01.0db2ee2.1024.png",width:1024,height:444},{path:s.p+"assets/ideal-img/sider-permission-01.c2de554.1918.png",width:1918,height:831}],src:s.p+"assets/ideal-img/sider-permission-01.0db2ee2.1024.png",toString:function(){return s.p+"assets/ideal-img/sider-permission-01.0db2ee2.1024.png"},placeholder:void 0,width:1024,height:444},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAUUlEQVQImX3K0QqAIBBEUf//UyMz2llNV3ei6EWIBs7LZYIICGQKlILM3jvHGJO7BQDc0k5oZimFZvYefBKgyjUmtmb8WxBULvHgWdsT3P3TBTKbnTApDrBjAAAAAElFTkSuQmCC"}},11830:(e,i,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/sider-permission-02.d8a1a1a.1024.png 1024w,"+s.p+"assets/ideal-img/sider-permission-02.19b68e9.1920.png 1920w",images:[{path:s.p+"assets/ideal-img/sider-permission-02.d8a1a1a.1024.png",width:1024,height:446},{path:s.p+"assets/ideal-img/sider-permission-02.19b68e9.1920.png",width:1920,height:836}],src:s.p+"assets/ideal-img/sider-permission-02.d8a1a1a.1024.png",toString:function(){return s.p+"assets/ideal-img/sider-permission-02.d8a1a1a.1024.png"},placeholder:void 0,width:1024,height:446},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZElEQVQImXXNwQ7EIAgEUP//U7up7SIGRcfZhK7HkrwLmYEkojQzmrUAgMD6A9daHO5Mqsr7FkpRFq10d86J8JTACTBVVZ75ovuI9ptUaudxftl98G0ieGXhJwtb67HY77Z98QeEVMR2xNwn2wAAAABJRU5ErkJggg=="}},76879:(e,i,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/sider-permission-03.3ed22e2.1024.png 1024w,"+s.p+"assets/ideal-img/sider-permission-03.881a7b4.1718.png 1718w",images:[{path:s.p+"assets/ideal-img/sider-permission-03.3ed22e2.1024.png",width:1024,height:500},{path:s.p+"assets/ideal-img/sider-permission-03.881a7b4.1718.png",width:1718,height:839}],src:s.p+"assets/ideal-img/sider-permission-03.3ed22e2.1024.png",toString:function(){return s.p+"assets/ideal-img/sider-permission-03.3ed22e2.1024.png"},placeholder:void 0,width:1024,height:500},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAY0lEQVQImYWM2wrDIBQE/f8PLSUkRInNUffohFooBApdGPZhL+HIL8yMnE+kRnfHJdz1dbVGWLeduEdSShQzNEO/oVo/xXfB1eayu+brDYnwXDZKafxTeCyR0yow6L0zxvjJBV/BxFkiLCXcAAAAAElFTkSuQmCC"}},35309:(e,i,s)=>{"use strict";s.r(i),s.d(i,{assets:()=>r,contentTitle:()=>d,default:()=>c,frontMatter:()=>p,metadata:()=>a,toc:()=>m});var t=s(87462),n=(s(67294),s(3905)),o=s(15944);const p={sidebar_position:1,description:"System side component"},d="Scene: System side component",a={unversionedId:"abilities/business/permission/custom-permission/system-sider-permission",id:"version-1.x/abilities/business/permission/custom-permission/system-sider-permission",title:"Scene: System side component",description:"System side component",source:"@site/versioned_docs/version-1.x/abilities/business/permission/custom-permission/system-sider-permission.mdx",sourceDirName:"abilities/business/permission/custom-permission",slug:"/abilities/business/permission/custom-permission/system-sider-permission",permalink:"/open-docs/docs/abilities/business/permission/custom-permission/system-sider-permission",draft:!1,tags:[],version:"1.x",lastUpdatedBy:"liupengfei",lastUpdatedAt:1690863366,formattedLastUpdatedAt:"Aug 1, 2023",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"System side component"},sidebar:"abilities",previous:{title:"Custom permission",permalink:"/open-docs/docs/abilities/business/permission/custom-permission/"},next:{title:"Scene\uff1aCustom sprint component with context-based permission",permalink:"/open-docs/docs/abilities/business/permission/custom-permission/permission-with-context"}},r={},m=[{value:"Scene Description",id:"scene-description",level:2},{value:"Solution",id:"solution",level:2},{value:"Implementation idea",id:"implementation-idea",level:3},{value:"Effect",id:"effect",level:3},{value:"Plugin development",id:"plugin-development",level:2},{value:"Step 1: Add slot",id:"step-1-add-slot",level:3},{value:"Step 2: Add Component",id:"step-2-add-component",level:3},{value:"Step 3: Configure custom permission points",id:"step-3-configure-custom-permission-points",level:3},{value:"Step 4: Slot associated permission point",id:"step-4-slot-associated-permission-point",level:3},{value:"Step 5: Configure permissions",id:"step-5-configure-permissions",level:3}],l={toc:m};function c(e){let{components:i,...p}=e;return(0,n.kt)("wrapper",(0,t.Z)({},l,p,{components:i,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"scene-system-side-component"},"Scene: System side component"),(0,n.kt)("h2",{id:"scene-description"},"Scene Description"),(0,n.kt)("p",null,"Add a functional component to the right side of the top bar of the system, and hope to control access rights, and hide this component for those who do not have access rights."),(0,n.kt)("h2",{id:"solution"},"Solution"),(0,n.kt)("h3",{id:"implementation-idea"},"Implementation idea"),(0,n.kt)("p",null,"Use the slot on the right side of the top bar of the system to add a new component, use the custom permission point ability to add a plug-in permission point, and associate the newly added component with the custom permission point."),(0,n.kt)("h3",{id:"effect"},"Effect"),(0,n.kt)("p",null,"People with permission can see that a new component has been added to the right side of the top bar of the system."),(0,n.kt)(o.Z,{img:s(23506),mdxType:"Image"}),(0,n.kt)("p",null,"There is no change on the right side of the top bar of the system for people without permission."),(0,n.kt)(o.Z,{img:s(11830),mdxType:"Image"}),(0,n.kt)("h2",{id:"plugin-development"},"Plugin development"),(0,n.kt)("h3",{id:"step-1-add-slot"},"Step 1: Add slot"),(0,n.kt)("p",null,"Use the ",(0,n.kt)("inlineCode",{parentName:"p"},"npx op add module")," to add a slot of type ",(0,n.kt)("inlineCode",{parentName:"p"},"ones:layout:header:action:new"),"."),(0,n.kt)("h3",{id:"step-2-add-component"},"Step 2: Add Component"),(0,n.kt)("p",null,"Here it is simply displayed in the form of icons, without adding specific logic."),(0,n.kt)("p",null,"Enter the /web directory of the plugin project, and execute the following command for dependent installation:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"npm i '@ones-design/icons'\n")),(0,n.kt)("p",null,"Add icon"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="web/src/modules/ones-layout-header-action-new-mYbE/index.tsx"',title:'"web/src/modules/ones-layout-header-action-new-mYbE/index.tsx"'},"import { Book } from '@ones-design/icons'\n\nReactDOM.render(\n  <ConfigProvider>\n    <Book />\n  </ConfigProvider>,\n  document.getElementById('ones-mf-root')\n)\n")),(0,n.kt)("h3",{id:"step-3-configure-custom-permission-points"},"Step 3: Configure custom permission points"),(0,n.kt)("p",null,"Add permission point configuration in the plugin's configuration file"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/plugin.yaml"',title:'"config/plugin.yaml"'},"service:\n    ...\n  permission:\n    - name: Component permissions\n      field: component_permissions\n      desc: System sider permissions\n")),(0,n.kt)("h3",{id:"step-4-slot-associated-permission-point"},"Step 4: Slot associated permission point"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"module")," configuration adds ",(0,n.kt)("inlineCode",{parentName:"p"},"permission")," field"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/plugin.yaml"',title:'"config/plugin.yaml"'},"modules:\n  - id: ones-layout-header-action-new-mYbE\n    title: test\n    moduleType: ones:layout:header:action:new\n    entry: modules/ones-layout-header-action-new-mYbE/index.html\n    permission: component_permissions\n")),(0,n.kt)("h3",{id:"step-5-configure-permissions"},"Step 5: Configure permissions"),(0,n.kt)("p",null,"Configure permissions on the plugin details page"),(0,n.kt)(o.Z,{img:s(76879),mdxType:"Image"}))}c.isMDXComponent=!0}}]);