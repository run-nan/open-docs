<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-reference/packages/node-ability/node-ability" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">@ones-op/node-ability | 开放平台</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://run-nan.github.io/open-docs/zh-CN/docs/reference/packages/node-ability/"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="robots" content="noindex, nofollow"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="@ones-op/node-ability | 开放平台"><meta data-rh="true" name="description" content="我们提供了一套接口请求库，允许插件开发者调用插件的基础能力。"><meta data-rh="true" property="og:description" content="我们提供了一套接口请求库，允许插件开发者调用插件的基础能力。"><link data-rh="true" rel="icon" href="/open-docs/zh-CN/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://run-nan.github.io/open-docs/zh-CN/docs/reference/packages/node-ability/"><link data-rh="true" rel="alternate" href="https://run-nan.github.io/open-docs/docs/reference/packages/node-ability/" hreflang="en"><link data-rh="true" rel="alternate" href="https://run-nan.github.io/open-docs/zh-CN/docs/reference/packages/node-ability/" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://run-nan.github.io/open-docs/docs/reference/packages/node-ability/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://N2DTG7C9DS-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/open-docs/zh-CN/changelog/rss.xml" title="开放平台 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/open-docs/zh-CN/changelog/atom.xml" title="开放平台 Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="ONES Open Platform" href="/open-docs/zh-CN/opensearch.xml">



<link rel="manifest" href="/open-docs/zh-CN/manifest.json"><link rel="stylesheet" href="/open-docs/zh-CN/assets/css/styles.93b8db36.css">
<link rel="preload" href="/open-docs/zh-CN/assets/js/runtime~main.174cabea.js" as="script">
<link rel="preload" href="/open-docs/zh-CN/assets/js/main.2a8d50e6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent__AyF" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><div class="announcementBar_TR20" style="background-color:#F59300;color:#fff" role="banner"><div class="content_W9__ announcementBarContent_MB9C">当前正在访问的是内部文档，<a href="https://developer.ones.com/">访问正式文档</a>。</div></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.5 4.5h21M1.5 12h21M1.5 19.5h21" stroke="#16171A" stroke-width="2"></path></svg></button><a class="navbar__brand" href="/open-docs/zh-CN/"><div class="navbar__logo"><img src="/open-docs/zh-CN/images/logo.svg" alt="ONES 开放平台" class="themedImage_QgX3 themedImage--light_bFwG"><img src="/open-docs/zh-CN/images/logo.svg" alt="ONES 开放平台" class="themedImage_QgX3 themedImage--dark_Ersh"></div></a><a class="navbar__item navbar__link" category="quickEntry" href="/open-docs/zh-CN/docs/guide/overview">指南</a><a class="navbar__item navbar__link" category="quickEntry" href="/open-docs/zh-CN/docs/abilities/slot/">开放能力</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" category="quickEntry" href="/open-docs/zh-CN/docs/reference/config/plugin.yaml">Reference</a><a class="navbar__item navbar__link" category="quickEntry" href="/open-docs/zh-CN/docs/tools/cli/">工具</a><a class="navbar__item navbar__link" category="quickEntry" href="/open-docs/zh-CN/docs/faq/development/">常见问题</a><a class="navbar__item navbar__link" category="quickEntry" href="/open-docs/zh-CN/changelog">更新日志</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link navbar__lan"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconLanguage_DSK9"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.902 3.96C7.233 5.466 6.799 7.6 6.799 10s.434 4.534 1.103 6.039c.335.753.713 1.313 1.092 1.674.375.357.713.487 1.005.487.292 0 .63-.13 1.006-.487.379-.36.757-.92 1.092-1.674.668-1.505 1.102-3.639 1.102-6.04 0-2.4-.434-4.534-1.102-6.038-.335-.753-.713-1.313-1.092-1.674-.375-.357-.714-.487-1.006-.487-.292 0-.63.13-1.005.487-.38.36-.757.92-1.092 1.674ZM7.89 1.129C8.473.574 9.187.2 9.999.2c.813 0 1.527.374 2.109.928.578.55 1.062 1.308 1.45 2.183C14.339 5.064 14.8 7.43 14.8 10c0 2.57-.461 4.936-1.24 6.689-.39.875-.873 1.633-1.451 2.183-.582.554-1.296.928-2.109.928-.812 0-1.526-.374-2.108-.928-.578-.55-1.062-1.308-1.451-2.183C5.66 14.936 5.2 12.57 5.2 10c0-2.57.46-4.936 1.24-6.689.389-.875.873-1.633 1.45-2.183Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M3.07 3.07a9.8 9.8 0 1 1 13.859 13.86A9.8 9.8 0 0 1 3.069 3.07ZM10 1.8a8.2 8.2 0 1 0 0 16.4 8.2 8.2 0 0 0 0-16.4Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M19 7.8H1V6.2h18v1.6ZM19 13.8H1v-1.6h18v1.6Z" fill="currentColor"></path></svg><span class="lang_label">简体中文</span></a><ul class="dropdown__menu"><li><a href="/open-docs/docs/reference/packages/node-ability/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/open-docs/zh-CN/docs/reference/packages/node-ability/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active lang__item--active" lang="zh-CN">简体中文</a></li></ul></div><div class="searchBox_gqCd"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_xhGW docsWrapper_NgAR"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_uHJr" type="button"></button><div class="docPage_Z91g"><aside class="theme-doc-sidebar-container docSidebarContainer_Fmr4"><div class="sidebarViewport_s7tk"><div class="sidebar_CbkZ"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_exCo menuWithAnnouncementBar_TaQR"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/open-docs/zh-CN/docs/reference/config/plugin.yaml">插件配置</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/open-docs/zh-CN/docs/reference/packages/">能力包</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/node-ability/">@ones-op/node-ability</a><button aria-label="打开/收起侧边栏菜单「@ones-op/node-ability」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/node-ability/changelog">更新日志</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/node-database/">@ones-op/node-database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/node-fs/">@ones-op/node-fs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/node-third-import/">@ones-op/node-third-import</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/node-error/">@ones-op/node-error</a><button aria-label="打开/收起侧边栏菜单「@ones-op/node-error」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/fetch/">@ones-op/fetch</a><button aria-label="打开/收起侧边栏菜单「@ones-op/fetch」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/store/">@ones-op/store</a><button aria-label="打开/收起侧边栏菜单「@ones-op/store」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/event/">@ones-op/event</a><button aria-label="打开/收起侧边栏菜单「@ones-op/event」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/bridge/">@ones-op/bridge</a><button aria-label="打开/收起侧边栏菜单「@ones-op/bridge」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/utils/">@ones-op/utils</a><button aria-label="打开/收起侧边栏菜单「@ones-op/utils」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/open-docs/zh-CN/docs/reference/packages/editor/">@ones-op/editor</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/open-docs/zh-CN/docs/reference/legacy-packages/">过时的包</a><button aria-label="打开/收起侧边栏菜单「过时的包」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_ndNO"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_JVbE"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_inRq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_mbYO"><div class="docItemContainer_lV64"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_dtnV" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/open-docs/zh-CN/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_c6MX"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/open-docs/zh-CN/docs/reference/packages/"><span itemprop="name">能力包</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">@ones-op/node-ability</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_dNB4 theme-doc-toc-mobile tocMobile_I4mI"><button type="button" class="clean-btn tocCollapsibleButton_dFmn">本页总览</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12"><h1>@ones-op/node-ability</h1><p>我们提供了一套接口请求库，允许插件开发者调用插件的基础能力。</p><h2 class="anchor anchorWithStickyNavbar_mYr4" id="要求">要求<a href="#要求" class="hash-link" aria-label="要求的直接链接" title="要求的直接链接">​</a></h2><table><thead><tr><th align="left">ONES</th></tr></thead><tbody><tr><td align="left">v3.6.0+</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mYr4" id="api">API<a href="#api" class="hash-link" aria-label="API的直接链接" title="API的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mYr4" id="getlanguage">getLanguage<a href="#getlanguage" class="hash-link" aria-label="getLanguage的直接链接" title="getLanguage的直接链接">​</a></h3><p>获取用户语言</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params">Params<a href="#params" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">user_uuid</td><td align="left">用户 uuid</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns">Returns<a href="#returns" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">language</td><td align="left">用户语言种类</td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example">Example<a href="#example" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-javascript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-javascript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Language</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">multiple_language</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> language </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">Language</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getLanguage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user_uuid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="getlanguagestring">getLanguageString<a href="#getlanguagestring" class="hash-link" aria-label="getLanguageString的直接链接" title="getLanguageString的直接链接">​</a></h3><p>获取指定语言的对应内容</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-1">Params<a href="#params-1" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">language</td><td align="left">语言种类</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">key</td><td align="left">想要获取的字段</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-1">Returns<a href="#returns-1" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">value</td><td align="left">key 在该语言下对应的值</td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-1">Example<a href="#example-1" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-javascript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-javascript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Language</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">multiple_language</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">Language</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getLanguageString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">language</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PluginDescription&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="downloadfile">downloadFile<a href="#downloadfile" class="hash-link" aria-label="downloadFile的直接链接" title="downloadFile的直接链接">​</a></h3><p>下载插件存储空间 <code>workspace</code> 内的文件</p><ul><li>ONES 要求：<code>v3.11.0+</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-2">Params<a href="#params-2" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">filePath</td><td align="left">文件路径</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">timeoutSeconds</td><td align="left">有效时间</td><td align="left">number</td><td align="left">否</td><td align="left">300(秒)</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-2">Returns<a href="#returns-2" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">url</td><td align="left">文件下载链接</td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-2">Example<a href="#example-2" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> downloadFile </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">downloadUrl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">downloadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;plugin.sql&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="uploadfile">uploadFile<a href="#uploadfile" class="hash-link" aria-label="uploadFile的直接链接" title="uploadFile的直接链接">​</a></h3><p>上传文件至插件存储空间 <code>workspace</code></p><ul><li>ONES 要求：<code>v3.11.40+</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-3">Params<a href="#params-3" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">filePath</td><td align="left">想要上传到的插件存储空间目录</td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr><tr><td align="left">timeoutSeconds</td><td align="left">有效时间</td><td align="left">number</td><td align="left">否</td><td align="left">3600(秒)</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-3">Returns<a href="#returns-3" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">url</td><td align="left">文件上传链接</td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-3">Example<a href="#example-3" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> uploadFile </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uploadFileToPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uploadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="createlog">createLog<a href="#createlog" class="hash-link" aria-label="createLog的直接链接" title="createLog的直接链接">​</a></h3><p>生成插件审计日志</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-4">Params<a href="#params-4" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">headers</td><td align="left">需包含用户 uuid 及 ip 地址。<br> 示例: <br>{<br> <!-- --> <!-- --> <!-- --> <!-- --> <!-- -->&#x27;Ones-User-Id&#x27;: &#x27;xxxxxx&#x27;, <br> <!-- --> <!-- --> <!-- --> <!-- --> <!-- -->&#x27;X-Real-Ip&#x27;: &#x27;127.0.0.1&#x27;,<br>}</td><td align="left">Record&lt;string, string&gt;</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">message</td><td align="left">审计日志信息</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">teamUUID</td><td align="left">团队 uuid, 组织级别插件该参数必填</td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-4">Returns<a href="#returns-4" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">res</td><td align="left">操作结果</td><td align="left">Record&lt;string, any&gt;</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-4">Example<a href="#example-4" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> AuditLog </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">testAuditLog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> auditHeader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&#x27;Ones-User-Id&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;E6ZqgsSX&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//该参数为用户uuid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&#x27;X-Real-Ip&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;127.0.0.1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//IP地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> AuditLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createLog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">auditHeader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Test log&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//写入审计信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;audit log&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resp</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> resp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="getabilityconfig">getAbilityConfig<a href="#getabilityconfig" class="hash-link" aria-label="getAbilityConfig的直接链接" title="getAbilityConfig的直接链接">​</a></h3><p>获取能力配置信息</p><ul><li>可用：<code>v0.6.3+</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-5">Params<a href="#params-5" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">abilityID</td><td align="left">能力 id</td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr><tr><td align="left">teamUUID</td><td align="left">团队 uuid, 组织级别插件该参数必填</td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-5">Returns<a href="#returns-5" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">response</td><td align="left">能力配置信息</td><td align="left">Record&lt;string, any&gt;</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-5">Example<a href="#example-5" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> getAbilityConfig </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAbilityConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Qcf5BG5P&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="addrepos">addRepos<a href="#addrepos" class="hash-link" aria-label="addRepos的直接链接" title="addRepos的直接链接">​</a></h3><p>新增代码仓</p><ul><li>可用：<code>v0.4.0+</code></li><li>ONES 要求：<code>v3.13.9+</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-6">Params<a href="#params-6" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">取值范围</th></tr></thead><tbody><tr><td align="left">toolUUID</td><td align="left">关联代码仓方式 UUID</td><td align="left">string</td><td align="left">是</td><td align="left">len=8</td></tr><tr><td align="left">teamUUID</td><td align="left">团队 UUID（组织级别插件必填，团队级别插件非必填）</td><td align="left">string</td><td align="left">否</td><td align="left">len=8</td></tr><tr><td align="left">list</td><td align="left">新增关联代码仓列表</td><td align="left"><a href="#RepoInfo">RepoInfo</a>[]</td><td align="left">是</td><td align="left">0&lt;=size&lt;=100</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mYr4" id="RepoInfo">RepoInfo<a href="#RepoInfo" class="hash-link" aria-label="RepoInfo的直接链接" title="RepoInfo的直接链接">​</a></h5><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">取值范围</th></tr></thead><tbody><tr><td align="left">userUUID</td><td align="left">关联代码仓操作人员 UUID（可以从插槽提供的获取用户方法获取）</td><td align="left">string</td><td align="left">是</td><td align="left">len=8</td></tr><tr><td align="left">uri</td><td align="left">关联代码仓 URI（举例<a href="https://github.com/nodejs/node%E4%B8%BAhttps://github.com" target="_blank" rel="noopener noreferrer">https://github.com/nodejs/node为https://github.com</a>)</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=100</td></tr><tr><td align="left">namespace</td><td align="left">命名空间（举例<a href="https://github.com/nodejs/node%E4%B8%BANode.js" target="_blank" rel="noopener noreferrer">https://github.com/nodejs/node为Node.js</a>)</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=256</td></tr><tr><td align="left">name</td><td align="left">仓库名称（举例<a href="https://github.com/nodejs/node%E4%B8%BAnode" target="_blank" rel="noopener noreferrer">https://github.com/nodejs/node为node</a>)</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=256</td></tr><tr><td align="left">certificationType</td><td align="left">认证方式，只用于代码仓列表页面展示（枚举值：OAUTH、PASSWORD、TOKEN、NONE、OTHER）</td><td align="left">enum</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-6">Returns<a href="#returns-6" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mYr4" id="batchreporesponse">BatchRepoResponse<a href="#batchreporesponse" class="hash-link" aria-label="BatchRepoResponse的直接链接" title="BatchRepoResponse的直接链接">​</a></h5><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th></tr></thead><tbody><tr><td align="left">successCount</td><td align="left">关联代码仓成功数量</td><td align="left">int</td><td align="left">是</td></tr><tr><td align="left">failureCount</td><td align="left">关联代码仓失败数量</td><td align="left">int</td><td align="left">是</td></tr><tr><td align="left">Responses</td><td align="left">关联代码仓详细信息列表</td><td align="left"><a href="#RepoResponse">RepoResponse</a>[]</td><td align="left">是</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mYr4" id="RepoResponse">RepoResponse<a href="#RepoResponse" class="hash-link" aria-label="RepoResponse的直接链接" title="RepoResponse的直接链接">​</a></h5><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th></tr></thead><tbody><tr><td align="left">success</td><td align="left">是否关联成功</td><td align="left">boolean</td><td align="left">是</td></tr><tr><td align="left">uri</td><td align="left">关联代码仓 URI</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">namespace</td><td align="left">命名空间</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">name</td><td align="left">仓库名称</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">repoUUID</td><td align="left">代码仓 UUID</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">error</td><td align="left">关联失败时错误描述</td><td align="left">string</td><td align="left">否</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-6">Example<a href="#example-6" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-javascript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-javascript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">  addRepos</span><br></span><span class="token-line" style="color:#393A34"><span class="token imports"></span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">toolUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">list</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">AddRepoInfo</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> batchResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addRepos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">toolUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="queryrepo">queryRepo<a href="#queryrepo" class="hash-link" aria-label="queryRepo的直接链接" title="queryRepo的直接链接">​</a></h3><p>查询已关联的单个代码仓。</p><ul><li>可用：<code>v0.4.0+</code></li><li>ONES 要求：<code>v3.13.9+</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-7">Params<a href="#params-7" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">取值范围</th></tr></thead><tbody><tr><td align="left">teamUUID</td><td align="left">团队 UUID（组织级别插件必填，团队级别插件非必填）</td><td align="left">string</td><td align="left">否</td><td align="left">len=8</td></tr><tr><td align="left">toolUUID</td><td align="left">关联代码仓方式 UUID</td><td align="left">string</td><td align="left">是</td><td align="left">len=8</td></tr><tr><td align="left">uri</td><td align="left">关联代码仓 URI</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=100</td></tr><tr><td align="left">namespace</td><td align="left">代码仓命名空间</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=256</td></tr><tr><td align="left">name</td><td align="left">代码仓名称</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=256</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-7">Returns<a href="#returns-7" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th></tr></thead><tbody><tr><td align="left">repoUUID</td><td align="left">关联代码仓 UUID</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">userUUID</td><td align="left">关联操作人员 UUID</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">uri</td><td align="left">关联代码仓 URI</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">namespace</td><td align="left">关联代码仓命名空间</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">name</td><td align="left">关联代码仓名称</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">certificationType</td><td align="left">认证方式（枚举值：oauth、password、token、none、other）</td><td align="left">enum</td><td align="left">是</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-7">Example<a href="#example-7" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> queryRepo </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> toolUUID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uri </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> namespace </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> repoInfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">queryRepo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">toolUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> namespace</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="queryrepos">queryRepos<a href="#queryrepos" class="hash-link" aria-label="queryRepos的直接链接" title="queryRepos的直接链接">​</a></h3><p>查询已关联的所有代码仓</p><ul><li>可用：<code>v0.4.0+</code></li><li>ONES 要求：<code>v3.13.9+</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-8">Params<a href="#params-8" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">取值范围</th></tr></thead><tbody><tr><td align="left">teamUUID</td><td align="left">团队 UUID（组织级别插件必填，团队级别插件非必填）</td><td align="left">string</td><td align="left">否</td><td align="left">len=8</td></tr><tr><td align="left">toolUUID</td><td align="left">关联代码仓方式 UUID</td><td align="left">string</td><td align="left">是</td><td align="left">len=8</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-8">Returns<a href="#returns-8" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mYr4" id="repoinfo">RepoInfo[]<a href="#repoinfo" class="hash-link" aria-label="RepoInfo[]的直接链接" title="RepoInfo[]的直接链接">​</a></h5><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th></tr></thead><tbody><tr><td align="left">repoUUID</td><td align="left">关联代码仓 UUID</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">userUUID</td><td align="left">关联操作人员 UUID</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">uri</td><td align="left">关联代码仓 URI</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">namespace</td><td align="left">关联代码仓命名空间</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">name</td><td align="left">关联代码仓仓库名称</td><td align="left">string</td><td align="left">是</td></tr><tr><td align="left">certificationType</td><td align="left">认证方式（枚举值：oauth、password、token、none、other）</td><td align="left">enum</td><td align="left">是</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-8">Example<a href="#example-8" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> queryRepos </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> toolUUID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> repoInfos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">queryRepos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">toolUUID</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="addrepocommits">addRepoCommits<a href="#addrepocommits" class="hash-link" aria-label="addRepoCommits的直接链接" title="addRepoCommits的直接链接">​</a></h3><p>新增代码仓提交 commit</p><ul><li>可用：<code>v0.4.0+</code></li><li>ONES 要求：<code>v3.13.9+</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-9">Params<a href="#params-9" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">取值范围</th></tr></thead><tbody><tr><td align="left">toolUUID</td><td align="left">关联代码仓方式 UUID</td><td align="left">string</td><td align="left">是</td><td align="left">len=8</td></tr><tr><td align="left">repoUUID</td><td align="left">代码仓 UUID</td><td align="left">string</td><td align="left">是</td><td align="left">len=8</td></tr><tr><td align="left">teamUUID</td><td align="left">团队 UUID（组织级别插件必填，团队级别插必填）</td><td align="left">string</td><td align="left">否</td><td align="left">len=8</td></tr><tr><td align="left">list</td><td align="left">代码仓 commit 列表</td><td align="left"><a href="#RepoCommit">RepoCommit</a>[]</td><td align="left">是</td><td align="left">0&lt;=size&lt;=100</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mYr4" id="RepoCommit">RepoCommit<a href="#RepoCommit" class="hash-link" aria-label="RepoCommit的直接链接" title="RepoCommit的直接链接">​</a></h5><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">取值范围</th></tr></thead><tbody><tr><td align="left">hash</td><td align="left">commit 唯一标识</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=48</td></tr><tr><td align="left">author</td><td align="left">commit 作者名称</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=128</td></tr><tr><td align="left">message</td><td align="left">commit 描述</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">branch</td><td align="left">commit 提交分支</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=128</td></tr><tr><td align="left">url</td><td align="left">commit 可访问的 web url</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=2048</td></tr><tr><td align="left">createAt</td><td align="left">commit 时间戳（单位：秒）</td><td align="left">int64</td><td align="left">是</td><td align="left">min=1</td></tr><tr><td align="left">statsTotal</td><td align="left">统计影响行总数</td><td align="left">int64</td><td align="left">否</td><td align="left">max=2147483647</td></tr><tr><td align="left">statsAdditions</td><td align="left">统计添加影响行总数</td><td align="left">int64</td><td align="left">否</td><td align="left">max=2147483647</td></tr><tr><td align="left">statsDeletions</td><td align="left">统计删除影响行总数</td><td align="left">int64</td><td align="left">否</td><td align="left">max=2147483647</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-9">Example<a href="#example-9" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> addRepoCommits </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> toolUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> repoUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> list</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> AddRepoInfo</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addRepoCommits</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">toolUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> repoUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="addrepopullrequest">addRepoPullRequest<a href="#addrepopullrequest" class="hash-link" aria-label="addRepoPullRequest的直接链接" title="addRepoPullRequest的直接链接">​</a></h3><p>新增代码仓合并请求 pull request（支持新增和更新）</p><ul><li>可用：<code>v0.4.0+</code></li><li>ONES 要求：<code>v3.13.9+</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-10">Params<a href="#params-10" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">取值范围</th></tr></thead><tbody><tr><td align="left">toolUUID</td><td align="left">关联代码仓方式 UUID</td><td align="left">string</td><td align="left">是</td><td align="left">len=8</td></tr><tr><td align="left">repoUUID</td><td align="left">代码仓 UUID</td><td align="left">string</td><td align="left">是</td><td align="left">len=8</td></tr><tr><td align="left">teamUUID</td><td align="left">团队 UUID（组织级别插件必填，团队级别插件非必填）</td><td align="left">string</td><td align="left">否</td><td align="left">len=8</td></tr><tr><td align="left">pr</td><td align="left">代码仓 pull request 信息</td><td align="left"><a href="#RepoPullRequest">RepoPullRequest</a></td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mYr4" id="RepoPullRequest">RepoPullRequest<a href="#RepoPullRequest" class="hash-link" aria-label="RepoPullRequest的直接链接" title="RepoPullRequest的直接链接">​</a></h5><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">取值范围</th></tr></thead><tbody><tr><td align="left">number</td><td align="left">pr 编号（pr 唯一标识）</td><td align="left">number</td><td align="left">是</td><td align="left">max=2147483647</td></tr><tr><td align="left">action</td><td align="left">pr 动作（枚举值：UPDATE、CLOSE、ADD、REOPEN、MERGE）</td><td align="left">enum</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">author</td><td align="left">pr 作者名称</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=128</td></tr><tr><td align="left">title</td><td align="left">pr 标题</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=256</td></tr><tr><td align="left">url</td><td align="left">pr 可访问的 web url</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=1024</td></tr><tr><td align="left">fromBranch</td><td align="left">pr 源分支</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=128</td></tr><tr><td align="left">toBranch</td><td align="left">pr 目标分支</td><td align="left">string</td><td align="left">是</td><td align="left">len&lt;=128</td></tr><tr><td align="left">createAt</td><td align="left">pr 创建时间戳（单位：秒）</td><td align="left">int64</td><td align="left">是</td><td align="left">min=1</td></tr><tr><td align="left">state</td><td align="left">pr 状态（枚举值：OPEN、MERGED、CLOSED）</td><td align="left">enum</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">reviewers</td><td align="left">pr 审核人员名称列表</td><td align="left">string array</td><td align="left">否</td><td align="left">len&lt;=1024</td></tr><tr><td align="left">updateAt</td><td align="left">pr 最后更新时间戳（单位：秒）</td><td align="left">int64</td><td align="left">否</td><td align="left">min=1</td></tr><tr><td align="left">updateUser</td><td align="left">pr 最后更新用户名称</td><td align="left">string</td><td align="left">否</td><td align="left">len&lt;=128</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-10">Example<a href="#example-10" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> addRepoPullRequest </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> toolUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> repoUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pullRequest</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> RepoPullRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{...}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addRepoPullRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">toolUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> repoUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pullRequest</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="Notify">Notify<a href="#Notify" class="hash-link" aria-label="Notify的直接链接" title="Notify的直接链接">​</a></h3><p>向特定用户发送第三方的通知信息。</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-11">Params<a href="#params-11" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left"><strong>参数</strong></th><th align="left"><strong>说明</strong></th><th align="left"><strong>类型</strong></th><th align="left"><strong>必填</strong></th><th align="left"><strong>默认值</strong></th></tr></thead><tbody><tr><td align="left">Title</td><td align="left">信息标题</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">ToUsers</td><td align="left">接收通知的用户数组</td><td align="left">string[]</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">NotifyWay</td><td align="left">通知类型，可选值：<br>- 邮件: NotifyWay. Email<br>- 飞书: NotifyWay. Lark<br>- 有度: NotifyWay. YouDu<br>- 微信: NotifyWay. WeChat<br>- 钉钉: NotifyWay. DingDing</td><td align="left">NotifyWay</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">MessageBody</td><td align="left">消息体数组，每个消息体中包含：<br>- Body: 通知内容<br>- url：通知的跳转链接</td><td align="left">IMessageBody[]</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">Ext</td><td align="left">拓展字段</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">Source</td><td align="left">消息来源，供记录使用</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-11">Example<a href="#example-11" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Notify</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> NotifyWay </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sendEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> user_uuid </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">body </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">user_uuid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        error</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Missing parameters user_uuid&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> NotifyRes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Notify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Test&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ToUsers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user_uuid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NotifyWay</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NotifyWay</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MessageBody</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Email sending test&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://ones.com/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ext</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ext string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Source</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;source string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      NotifyRes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NotifyRes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;success&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="getPluginUser">Plugin.getPluginUser<a href="#getPluginUser" class="hash-link" aria-label="Plugin.getPluginUser的直接链接" title="Plugin.getPluginUser的直接链接">​</a></h3><p>获取插件超级用户的信息</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-12">Params<a href="#params-12" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left"><strong>参数</strong></th><th align="left"><strong>说明</strong></th><th align="left"><strong>类型</strong></th><th align="left"><strong>必填</strong></th><th align="left"><strong>默认值</strong></th></tr></thead><tbody><tr><td align="left">teamUUID</td><td align="left">团队的 <code>uuid</code></td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-9">Returns<a href="#returns-9" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">user_uuid</td><td align="left">用户的 <code>uuid</code></td><td align="left">string</td></tr><tr><td align="left">org_uuid</td><td align="left">插件所属组织的 <code>uuid</code></td><td align="left">string</td></tr><tr><td align="left">team_uuid</td><td align="left">插件所属团队的 <code>uuid</code></td><td align="left">string</td></tr><tr><td align="left">app_uuid</td><td align="left">插件的 <code>app_id</code></td><td align="left">string</td></tr><tr><td align="left">instance_uuid</td><td align="left">插件实例的 <code>id</code></td><td align="left">string</td></tr><tr><td align="left">name</td><td align="left">用户名称</td><td align="left">string</td></tr><tr><td align="left">email</td><td align="left">用户邮箱</td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-12">Example<a href="#example-12" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Plugin </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Plugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPluginUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="FieldsAdd">Field. FieldsAdd<a href="#FieldsAdd" class="hash-link" aria-label="Field. FieldsAdd的直接链接" title="Field. FieldsAdd的直接链接">​</a></h3><p>添加工作项的脚本属性</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-13">Params<a href="#params-13" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left"><strong>必填</strong></th><th align="left"><strong>默认值</strong></th></tr></thead><tbody><tr><td align="left">Name</td><td align="left">属性名称</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">Type</td><td align="left">脚本属性类型<br>- 1001：单选<br>- 1002：多选</td><td align="left">int</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-10">Returns<a href="#returns-10" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">UUID</td><td align="left">脚本属性的 <code>uuid</code></td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-13">Example<a href="#example-13" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> FieldsAddRes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FieldsAdd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;task_field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1001</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//表示添加单选类型脚本属性</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FieldsAddRes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Failed to create field&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fieldUUID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> FieldsAddRes </span><span class="token comment" style="color:#999988;font-style:italic">//获取属性uuid</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="ItemsAdd">Field. ItemsAdd<a href="#ItemsAdd" class="hash-link" aria-label="Field. ItemsAdd的直接链接" title="Field. ItemsAdd的直接链接">​</a></h3><p>添加项目脚本属性</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-14">Params<a href="#params-14" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left"><strong>必填</strong></th><th align="left"><strong>默认值</strong></th></tr></thead><tbody><tr><td align="left">FieldType</td><td align="left">脚本属性类型：<br>- <code>FieldTypeEnum.SingleLabel</code> : 单选<br>- <code>FieldTypeEnum.MultiLabel</code> : 多选</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">Name</td><td align="left">属性名称</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">ItemType</td><td align="left">固定值： <code>field</code></td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">Pool</td><td align="left">可选值: <code>PoolEnum.Project</code> 和 <code>PoolEnum.Product</code></td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">ContextType</td><td align="left">上下文类型</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">required</td><td align="left">是否必填</td><td align="left">bool</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-11">Returns<a href="#returns-11" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">UUID</td><td align="left">脚本属性的 <code>uuid</code></td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-14">Example<a href="#example-14" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ItemsAddProjectRes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ItemsAdd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FieldType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> FieldTypeEnum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SingleLabel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//表示添加单选类型脚本属性</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;project_field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ItemType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Pool</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PoolEnum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Project</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//实体类型为项目</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContextType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;team&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ItemsAddProjectRes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Failed to create field&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fieldUUID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ItemsAddProjectRes </span><span class="token comment" style="color:#999988;font-style:italic">//获取属性`uuid`</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="AddGroupField">Field. AddGroupField<a href="#AddGroupField" class="hash-link" aria-label="Field. AddGroupField的直接链接" title="Field. AddGroupField的直接链接">​</a></h3><p>添加属性组至实体</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-15">Params<a href="#params-15" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left"><strong>必填</strong></th><th align="left"><strong>默认值</strong></th></tr></thead><tbody><tr><td align="left">ObjectType</td><td align="left">属性组的实体类型，可选值：<br>- <code>PoolEnum.Project</code> : 项目<br>- <code>PoolEnum.Task</code> : 工作项</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">Name</td><td align="left">属性组名称</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">Relations</td><td align="left">关系信息数组</td><td align="left"><a href="#IRelationMessage">IRelationMessage</a>[]</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mYr4" id="IRelationMessage">IRelationMessage<a href="#IRelationMessage" class="hash-link" aria-label="IRelationMessage的直接链接" title="IRelationMessage的直接链接">​</a></h5><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">FieldUUID</td><td align="left">属性的 <code>fieldUUID</code></td><td align="left">string</td></tr><tr><td align="left">FieldParentUUID</td><td align="left">父属性 <code>UUID</code> ，表示和该属性形成层级关系</td><td align="left">string</td></tr><tr><td align="left">Position</td><td align="left"><code>Position</code> : 在属性组中的位置</td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-12">Returns<a href="#returns-12" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">GroupUUID</td><td align="left">脚本属性组 <code>uuid</code></td><td align="left">string[]</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-15">Example<a href="#example-15" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> relateionsTask</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// `fieldUUIDs` 数组为添加的脚本属性的`uuid`数组</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fieldUUIDs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fieldUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> relation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FieldUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fieldUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FieldParentUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Position</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  relateionsTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">relation</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> AddGroupFieldRes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddGroupField</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ObjectType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PoolEnum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;issueFieldGroup&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Relations</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> relateionsTask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="UpdateFieldGroup">Field.UpdateFieldGroup<a href="#UpdateFieldGroup" class="hash-link" aria-label="Field.UpdateFieldGroup的直接链接" title="Field.UpdateFieldGroup的直接链接">​</a></h3><ul><li>可用：<code>v0.8.0+</code></li><li>ONES 要求：<code>v3.16.18+</code></li></ul><p>更新属性组</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-16">Params<a href="#params-16" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><p><strong>Field.Relation 参数介绍</strong></p><table><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">FieldUUID</td><td align="left">string</td><td align="left">脚本属性<code>fieldUUID</code></td></tr><tr><td align="left">FieldParentUUID</td><td align="left">string</td><td align="left">脚本属性父节点<code>fieldUUID</code></td></tr><tr><td align="left">Position</td><td align="left">int</td><td align="left">在属性配置中的顺序</td></tr></tbody></table><p><strong>Field.UpdateFieldGroupRequest 参数介绍</strong></p><table><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">TeamUUID</td><td align="left">string</td><td align="left">团队<code>uuid</code></td></tr><tr><td align="left">Relations</td><td align="left">[]Relation</td><td align="left">新的关联关系</td></tr><tr><td align="left">ObjectType</td><td align="left">PoolEnum</td><td align="left">属性组所属类型</td></tr><tr><td align="left">GroupUUID</td><td align="left">string</td><td align="left">修改的属性组UUID</td></tr><tr><td align="left">Name</td><td align="left">string</td><td align="left">属性组名称</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-13">Returns<a href="#returns-13" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">jobUUID</td><td align="left">string</td><td align="left">当属性组需要做补全属性配置操作时，会产生一个异步任务来完成这件事件，可通过jobID来查询</td></tr><tr><td align="left">status</td><td align="left">string</td><td align="left">更新结果，当为&quot;success&quot;时，即已经更新成功，当为&quot;waiting&quot;时，说明有补全属性配置的任务生成，可通过查询异步任务sdk来查询结果</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="error">Error<a href="#error" class="hash-link" aria-label="Error的直接链接" title="Error的直接链接">​</a></h4><table><thead><tr><th>errcode</th><th>reason</th><th>level</th><th>statusCode</th></tr></thead><tbody><tr><td>FieldGroupNotFound</td><td>FieldGroupNotFound</td><td>error</td><td>404</td></tr><tr><td>FieldNotFound</td><td>FieldNotFound</td><td>error</td><td>404</td></tr><tr><td>UpdateFieldGroupJobAlreadyExists</td><td>UpdateFieldGroupJobAlreadyExists</td><td>error</td><td>400</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-16">Example<a href="#example-16" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Relation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UpdateFieldGroupRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UpdateScriptFieldRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FieldTypeEnum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PoolEnum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AbilityError </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Logger </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-logger&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-types&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkJobStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">CheckUpdateFieldGroupJobStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;jobUUID&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;teamUUID&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello world&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      requestBody</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> resp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="UpdateScriptField">Field.UpdateScriptField<a href="#UpdateScriptField" class="hash-link" aria-label="Field.UpdateScriptField的直接链接" title="Field.UpdateScriptField的直接链接">​</a></h3><ul><li>可用：<code>v0.8.0+</code></li><li>ONES 要求：<code>v3.16.18+</code></li></ul><p>更新脚本属性</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-17">Params<a href="#params-17" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><p><strong>Field.UpdateScriptFieldRequest 参数介绍</strong></p><table><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">Pool</td><td align="left">string</td><td align="left">脚本属性所属上下文，包括产品，项目，工作项</td></tr><tr><td align="left">FieldUUID</td><td align="left">string</td><td align="left">脚本属性UUID</td></tr><tr><td align="left">TeamUUID</td><td align="left">string</td><td align="left">属性所属团队UUID</td></tr><tr><td align="left">Name</td><td align="left">string</td><td align="left">脚本属性新的名字</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="error-1">Error<a href="#error-1" class="hash-link" aria-label="Error的直接链接" title="Error的直接链接">​</a></h4><table><thead><tr><th>errcode</th><th>reason</th><th>level</th><th>statusCode</th></tr></thead><tbody><tr><td>FieldNotFound</td><td>FieldNotFound</td><td>error</td><td>404</td></tr><tr><td>FieldNameConflict</td><td>FieldNameConflict</td><td>error</td><td>400</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-17">Example<a href="#example-17" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Relation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UpdateFieldGroupRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UpdateScriptFieldRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FieldTypeEnum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PoolEnum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AbilityError </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Logger </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-logger&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-types&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateFieldName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> u</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> UpdateScriptFieldRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Pool</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PoolEnum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Product</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FieldUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fieldUUID&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TeamUUID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;teamUUID&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;newFieldName&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateScriptField</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">u</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">AbilityError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;err&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello world&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="CheckJobStatus">Job.CheckJobStatus<a href="#CheckJobStatus" class="hash-link" aria-label="Job.CheckJobStatus的直接链接" title="Job.CheckJobStatus的直接链接">​</a></h3><ul><li>可用：<code>v0.8.0+</code></li><li>ONES 要求：<code>v3.16.18+</code></li></ul><p>查询异步任务状态</p><p><strong>请求结果 参数介绍</strong></p><table><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">jobUUID</td><td align="left">string</td><td align="left">当属性组需要做补全属性配置操作时，会产生一个异步任务来完成这件事件，这时候会返回一个jobID代表这个任务</td></tr><tr><td align="left">teamUUID</td><td align="left">string</td><td align="left">job所属团队的UUID</td></tr></tbody></table><p><strong>Return</strong></p><table><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">status</td><td align="left">string</td><td align="left">任务状态，有&quot;success&quot;，&quot;waiting&quot;，&quot;fail&quot;三种状态，分别代表着成功，未完成，失败</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="error-2">Error<a href="#error-2" class="hash-link" aria-label="Error的直接链接" title="Error的直接链接">​</a></h4><table><thead><tr><th>errcode</th><th>reason</th><th>level</th><th>statusCode</th></tr></thead><tbody><tr><td>JobNotFound</td><td>JobNotFound</td><td>error</td><td>404</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-18">Example<a href="#example-18" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Relation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UpdateFieldGroupRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UpdateScriptFieldRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FieldTypeEnum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PoolEnum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AbilityError </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Logger </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-logger&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-types&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkJobStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">CheckJobStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;jobUUID&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;teamUUID&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello world&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      requestBody</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> resp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="PluginFile_uploadFile">PluginFile.uploadFile<a href="#PluginFile_uploadFile" class="hash-link" aria-label="PluginFile.uploadFile的直接链接" title="PluginFile.uploadFile的直接链接">​</a></h3><p>上传文件至工作项附件</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-18">Params<a href="#params-18" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left"><strong>参数</strong></th><th align="left"><strong>说明</strong></th><th align="left"><strong>类型</strong></th><th align="left"><strong>必填</strong></th><th align="left"><strong>默认值</strong></th></tr></thead><tbody><tr><td align="left">filePath</td><td align="left">文件地址， <code>workspace</code> 目录下的路径</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">referenceID</td><td align="left">工作项的 <code>uuid</code></td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">desc</td><td align="left">文件描述</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">teamUUID</td><td align="left">团队 <code>uuid</code> ，组织级别的插件必须带上该参数，团队级别的插件可不带该参数</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-14">Returns<a href="#returns-14" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">hash</td><td align="left">文件的 <code>hash</code> 值</td><td align="left">string</td></tr><tr><td align="left">url</td><td align="left">文件的下载 <code>url</code></td><td align="left">string</td></tr><tr><td align="left">name</td><td align="left">文件名称</td><td align="left">string</td></tr><tr><td align="left">size</td><td align="left">文件大小</td><td align="left">int</td></tr><tr><td align="left">mime</td><td align="left">文件类型</td><td align="left">string</td></tr><tr><td align="left">version</td><td align="left">文件版本</td><td align="left">int</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-19">Example<a href="#example-19" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> PluginFile</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">uploadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;files/test.txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;taskuuid&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;desc&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="processcreate">Process.create<a href="#processcreate" class="hash-link" aria-label="Process.create的直接链接" title="Process.create的直接链接">​</a></h3><p>创建进度管理器。</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-19">Params<a href="#params-19" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">processType</td><td align="left">进度管理器类型, 可选值: <br> <strong>下载进度管理器</strong>: ProcessType. DownloadFile <br> <strong>数据同步进度管理器</strong>: ProcessType. DataSync</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">userUUID</td><td align="left">用户 uuid</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">title</td><td align="left">进度标题</td><td align="left"><a href="#LanguagePkg">LanguagePkg</a></td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">timeoutSeconds</td><td align="left">超时时间，进度管理器在时间内未完成则失败</td><td align="left">number</td><td align="left">否</td><td align="left">60(秒)</td></tr><tr><td align="left">moduleID</td><td align="left">进度管理器插槽 ID（仅适用于数据同步进度管理器）</td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr><tr><td align="left">teamUUID</td><td align="left">进度管理器所属团队 uuid，仅当插件为组织级别下使用</td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mYr4" id="LanguagePkg">LanguagePkg<a href="#LanguagePkg" class="hash-link" aria-label="LanguagePkg的直接链接" title="LanguagePkg的直接链接">​</a></h5><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">zh</td><td align="left">中文内容</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">en</td><td align="left">英文内容</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-15">Returns<a href="#returns-15" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">processUUID</td><td align="left">进度管理器 UUID</td><td align="left">string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="error-3">Error<a href="#error-3" class="hash-link" aria-label="Error的直接链接" title="Error的直接链接">​</a></h4><table><thead><tr><th>errcode</th><th>reason</th><th>level</th><th>statusCode</th></tr></thead><tbody><tr><td>InvalidParameter</td><td>Invalid parameter.</td><td>error</td><td>400</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-20">Example<a href="#example-20" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="tabs-container tabList_Ifpf"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_j1rW tabs__item--active">0.4.0+</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_j1rW">0.6.0+</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_skN5"><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Process</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LanguagePkg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ProcessType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ProcessResult </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-types&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createProcess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//从请求中获取参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> user_uuid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timeout </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">body </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//进度管理器多语言标题</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> titlePkg</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> LanguagePkg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    en</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;process&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zh</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//创建进度管理器，获取返回值processUUID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> processUUID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ProcessType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DownloadFile</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user_uuid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> titlePkg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      process_uuid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> processUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_skN5" hidden=""><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Process</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LanguagePkg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProcessType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProcessResult</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AbilityError</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-types&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createProcess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//从请求中获取参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> user_uuid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timeout </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">body </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//进度管理器多语言标题</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> titlePkg</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> LanguagePkg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    en</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;process&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zh</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//创建进度管理器，获取返回值processUUID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> processUUID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> processUUID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ProcessType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DownloadFile</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user_uuid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> titlePkg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">AbilityError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// handle error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      process_uuid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> processUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="processupdate">Process.update<a href="#processupdate" class="hash-link" aria-label="Process.update的直接链接" title="Process.update的直接链接">​</a></h3><p>更新进度管理器的进度。</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-20">Params<a href="#params-20" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">processUUID</td><td align="left">进度管理器 uuid</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">currentSuccessfulCount</td><td align="left">当前完成数</td><td align="left">number</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">currentFailedCount</td><td align="left">当前失败数</td><td align="left">number</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">currentRemainingCount</td><td align="left">当前剩余数</td><td align="left">number</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-21">Example<a href="#example-21" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Process</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LanguagePkg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ProcessType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ProcessResult </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-types&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateProgress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//从请求中获取参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> process_uuid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> processUUID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">body </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> currentSuccessfulCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> currentFailedCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> currentRemainingCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//进度管理器更新</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    processUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentSuccessfulCount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentFailedCount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentRemainingCount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="processdone">Process.done<a href="#processdone" class="hash-link" aria-label="Process.done的直接链接" title="Process.done的直接链接">​</a></h3><p>将进度管理器状态置为已完成。</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-21">Params<a href="#params-21" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">processUUID</td><td align="left">进度管理器 uuid</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">isSuccess</td><td align="left">成功或失败</td><td align="left">bool</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">resultText</td><td align="left">详情内容</td><td align="left"><a href="#LanguagePkg">LanguagePkg</a></td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">payload</td><td align="left">完成动作</td><td align="left"><a href="#ProcessResult">ProcessResult</a></td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="ProcessResult">Returns<a href="#ProcessResult" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">filePath</td><td align="left">文件路径，类型为<strong>下载进度管理器</strong>时可用</td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr><tr><td align="left">data</td><td align="left">额外内容，类型为<strong>数据同步进度管理器</strong>时可用</td><td align="left">string</td><td align="left">否</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-22">Example<a href="#example-22" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Process</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LanguagePkg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ProcessType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ProcessResult </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-types&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doneProcess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PluginRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PluginResponse</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//从请求中获取参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> process_uuid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> processUUID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">body </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//多语言详情内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resultText</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> LanguagePkg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    en</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;content&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zh</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;详情内容&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//进度管理器完成时的动作，下载进度管理器下载指定的文件，数据同步进度管理器可以展示额外的内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> payload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ProcessResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filePath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./plugin.sql&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isSuccess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//完成进度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">processUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> resultText</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      process_uuid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> processUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="getuserteamuuidsbyemail">getUserTeamUUIDsByEmail<a href="#getuserteamuuidsbyemail" class="hash-link" aria-label="getUserTeamUUIDsByEmail的直接链接" title="getUserTeamUUIDsByEmail的直接链接">​</a></h3><p>根据用户的邮箱查找用户的 <code>uuid</code> 以及其所在的团队 <code>uuid</code> 列表。</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-22">Params<a href="#params-22" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">email</td><td align="left">用户邮箱</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-16">Returns<a href="#returns-16" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">user_uuid</td><td align="left">用户的<code>uuid</code></td><td align="left">string</td></tr><tr><td align="left">team_uuids</td><td align="left">用户所在的团队 <code>uuid</code> 列表</td><td align="left">string[]</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-23">Example<a href="#example-23" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> getUserTeamUUIDsByEmail </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getUserTeamUUIDsByEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;marsdev@ones.com&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="getuserteamuuidsbyidnumber">getUserTeamUUIDsByIdNumber<a href="#getuserteamuuidsbyidnumber" class="hash-link" aria-label="getUserTeamUUIDsByIdNumber的直接链接" title="getUserTeamUUIDsByIdNumber的直接链接">​</a></h3><p>根据用户的工号查找用户的 <code>uuid</code> 以及其所在的团队 <code>uuid</code> 列表。</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-23">Params<a href="#params-23" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">id_number</td><td align="left">用户的工号</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-17">Returns<a href="#returns-17" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">user_uuid</td><td align="left">用户的<code>uuid</code></td><td align="left">string</td></tr><tr><td align="left">team_uuids</td><td align="left">用户所在的团队 <code>uuid</code> 列表</td><td align="left">string[]</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-24">Example<a href="#example-24" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> getUserTeamUUIDsByIdNumber </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getUserTeamUUIDsByIdNumber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;123456&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_mYr4" id="getuserteamuuidsbythirdpartyidandthirdpartytype">getUserTeamUUIDsByThirdPartyIDAndThirdPartyType<a href="#getuserteamuuidsbythirdpartyidandthirdpartytype" class="hash-link" aria-label="getUserTeamUUIDsByThirdPartyIDAndThirdPartyType的直接链接" title="getUserTeamUUIDsByThirdPartyIDAndThirdPartyType的直接链接">​</a></h3><p>根据用户的第三方系统 id 以及第三方系统类型查找用户的 <code>uuid</code> 以及其所在的团队 <code>uuid</code> 列表。</p><h4 class="anchor anchorWithStickyNavbar_mYr4" id="params-24">Params<a href="#params-24" class="hash-link" aria-label="Params的直接链接" title="Params的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th><th align="left">必填</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">third_party_id</td><td align="left">用户的第三方系统 id</td><td align="left">string</td><td align="left">是</td><td align="left">-</td></tr><tr><td align="left">third_party_type</td><td align="left">第三方系统的类型代号</td><td align="left">number</td><td align="left">是</td><td align="left">-</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="returns-18">Returns<a href="#returns-18" class="hash-link" aria-label="Returns的直接链接" title="Returns的直接链接">​</a></h4><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">user_uuid</td><td align="left">用户的<code>uuid</code></td><td align="left">string</td></tr><tr><td align="left">team_uuids</td><td align="left">用户所在的团队 <code>uuid</code> 列表</td><td align="left">string[]</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mYr4" id="example-25">Example<a href="#example-25" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h4><div class="language-typescript codeBlockContainer_Aerq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ss0Q"><pre tabindex="0" class="prism-code language-typescript codeBlock_hZhA thin-scrollbar"><code class="codeBlockLines_Gn7E"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> getUserTeamUUIDsByThirdPartyIDAndThirdPartyType </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ones-op/node-ability&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getUserTeamUUIDsByThirdPartyIDAndThirdPartyType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;12345678&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cXvt"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_hwpY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_fMmt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OpyC"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_mYr4" id="type">Type<a href="#type" class="hash-link" aria-label="Type的直接链接" title="Type的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mYr4" id="abilityerror">AbilityError<a href="#abilityerror" class="hash-link" aria-label="AbilityError的直接链接" title="AbilityError的直接链接">​</a></h3><table><thead><tr><th align="left">参数</th><th align="left">说明</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">level</td><td align="left">错误等级</td><td align="left"><code>string</code></td></tr><tr><td align="left">reason</td><td align="left">错误原因</td><td align="left"><code>string</code></td></tr><tr><td align="left">statusCode</td><td align="left">对应的 http 状态码</td><td align="left"><code>string</code></td></tr><tr><td align="left">errcode</td><td align="left">错误码</td><td align="left"><code>string</code></td></tr></tbody></table></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_sT6K"><span class="theme-last-updated">最后<!-- -->由 <b>liupengfei</b> <!-- -->于 <b><time datetime="2023-12-25T09:12:43.000Z">2023年12月25日</time></b> <!-- -->更新</span></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/open-docs/zh-CN/docs/reference/packages/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">注意事项</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/open-docs/zh-CN/docs/reference/packages/node-ability/changelog"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">更新日志</div></a></nav></div></div></div><div class="col col--3"><div class="tableOfContents_tJgS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#要求" class="table-of-contents__link toc-highlight">要求</a></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a><ul><li><a href="#getlanguage" class="table-of-contents__link toc-highlight">getLanguage</a><ul><li><a href="#params" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#getlanguagestring" class="table-of-contents__link toc-highlight">getLanguageString</a><ul><li><a href="#params-1" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-1" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-1" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#downloadfile" class="table-of-contents__link toc-highlight">downloadFile</a><ul><li><a href="#params-2" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-2" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-2" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#uploadfile" class="table-of-contents__link toc-highlight">uploadFile</a><ul><li><a href="#params-3" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-3" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-3" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#createlog" class="table-of-contents__link toc-highlight">createLog</a><ul><li><a href="#params-4" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-4" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-4" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#getabilityconfig" class="table-of-contents__link toc-highlight">getAbilityConfig</a><ul><li><a href="#params-5" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-5" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-5" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#addrepos" class="table-of-contents__link toc-highlight">addRepos</a><ul><li><a href="#params-6" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-6" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-6" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#queryrepo" class="table-of-contents__link toc-highlight">queryRepo</a><ul><li><a href="#params-7" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-7" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-7" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#queryrepos" class="table-of-contents__link toc-highlight">queryRepos</a><ul><li><a href="#params-8" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-8" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-8" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#addrepocommits" class="table-of-contents__link toc-highlight">addRepoCommits</a><ul><li><a href="#params-9" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#example-9" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#addrepopullrequest" class="table-of-contents__link toc-highlight">addRepoPullRequest</a><ul><li><a href="#params-10" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#example-10" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#Notify" class="table-of-contents__link toc-highlight">Notify</a><ul><li><a href="#params-11" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#example-11" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#getPluginUser" class="table-of-contents__link toc-highlight">Plugin.getPluginUser</a><ul><li><a href="#params-12" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-9" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-12" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#FieldsAdd" class="table-of-contents__link toc-highlight">Field. FieldsAdd</a><ul><li><a href="#params-13" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-10" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-13" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#ItemsAdd" class="table-of-contents__link toc-highlight">Field. ItemsAdd</a><ul><li><a href="#params-14" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-11" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-14" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#AddGroupField" class="table-of-contents__link toc-highlight">Field. AddGroupField</a><ul><li><a href="#params-15" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-12" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-15" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#UpdateFieldGroup" class="table-of-contents__link toc-highlight">Field.UpdateFieldGroup</a><ul><li><a href="#params-16" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-13" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#error" class="table-of-contents__link toc-highlight">Error</a></li><li><a href="#example-16" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#UpdateScriptField" class="table-of-contents__link toc-highlight">Field.UpdateScriptField</a><ul><li><a href="#params-17" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#error-1" class="table-of-contents__link toc-highlight">Error</a></li><li><a href="#example-17" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#CheckJobStatus" class="table-of-contents__link toc-highlight">Job.CheckJobStatus</a><ul><li><a href="#error-2" class="table-of-contents__link toc-highlight">Error</a></li><li><a href="#example-18" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#PluginFile_uploadFile" class="table-of-contents__link toc-highlight">PluginFile.uploadFile</a><ul><li><a href="#params-18" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-14" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-19" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#processcreate" class="table-of-contents__link toc-highlight">Process.create</a><ul><li><a href="#params-19" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-15" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#error-3" class="table-of-contents__link toc-highlight">Error</a></li><li><a href="#example-20" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#processupdate" class="table-of-contents__link toc-highlight">Process.update</a><ul><li><a href="#params-20" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#example-21" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#processdone" class="table-of-contents__link toc-highlight">Process.done</a><ul><li><a href="#params-21" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#ProcessResult" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-22" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#getuserteamuuidsbyemail" class="table-of-contents__link toc-highlight">getUserTeamUUIDsByEmail</a><ul><li><a href="#params-22" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-16" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-23" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#getuserteamuuidsbyidnumber" class="table-of-contents__link toc-highlight">getUserTeamUUIDsByIdNumber</a><ul><li><a href="#params-23" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-17" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-24" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#getuserteamuuidsbythirdpartyidandthirdpartytype" class="table-of-contents__link toc-highlight">getUserTeamUUIDsByThirdPartyIDAndThirdPartyType</a><ul><li><a href="#params-24" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#returns-18" class="table-of-contents__link toc-highlight">Returns</a></li><li><a href="#example-25" class="table-of-contents__link toc-highlight">Example</a></li></ul></li></ul></li><li><a href="#type" class="table-of-contents__link toc-highlight">Type</a><ul><li><a href="#abilityerror" class="table-of-contents__link toc-highlight">AbilityError</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark footerWraper_IiJh"><section class="footerContent_BnVP"><div class="logoWraper_nSgt"><a href="https://ones.com" rel="noopener noreferrer" class="footerLogoLink_j4FC"><img src="/open-docs/zh-CN/homepage/logo-footer.svg" alt="ONES Logo" class="themedImage_QgX3 themedImage--light_bFwG footer__logo"><img src="/open-docs/zh-CN/homepage/logo-footer.svg" alt="ONES Logo" class="themedImage_QgX3 themedImage--dark_Ersh footer__logo"></a></div><div class="row footer__links"><div class="col footer__col"><div class="footer__title">技术</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/open-docs/zh-CN/docs/abilities/basic">平台开放能力</a></li></ul></div><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/open-docs/zh-CN/docs/openapi">Open API</a></li><li class="footer__item"><a class="footer__link-item" href="/open-docs/zh-CN/docs/api/readme">API 文档</a></li><li class="footer__item"><a class="footer__link-item" href="/open-docs/zh-CN/docs/guide/overview">开放平台</a></li></ul></div><div class="col footer__col"><div class="footer__title">工具</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/open-docs/zh-CN/docs/tools/cli">脚手架</a></li><li class="footer__item"><a class="footer__link-item" href="/open-docs/zh-CN/docs/tools/diagtools">诊断工具</a></li></ul></div><div class="col footer__col"><div class="footer__title">相关资源</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://bangwork.github.io/ones-design/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ONES Design<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T305"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/open-docs/zh-CN/docs/learning">学习地图</a></li></ul></div></div></section><section class="copyRight_mbje"><div class="footer__copyright">© 2023 ONES. 保留所有权利.</div></section></footer></div>
<script src="/open-docs/zh-CN/assets/js/runtime~main.174cabea.js"></script>
<script src="/open-docs/zh-CN/assets/js/main.2a8d50e6.js"></script>
</body>
</html>