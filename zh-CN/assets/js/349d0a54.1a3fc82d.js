(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[48256],{84654:(t,e,n)=>{t.exports={src:{srcSet:n.p+"assets/ideal-img/custom-config1.0027b13.1024.png 1024w,"+n.p+"assets/ideal-img/custom-config1.934e130.1230.png 1230w",images:[{path:n.p+"assets/ideal-img/custom-config1.0027b13.1024.png",width:1024,height:561},{path:n.p+"assets/ideal-img/custom-config1.934e130.1230.png",width:1230,height:674}],src:n.p+"assets/ideal-img/custom-config1.0027b13.1024.png",toString:function(){return n.p+"assets/ideal-img/custom-config1.0027b13.1024.png"},placeholder:void 0,width:1024,height:561},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVQImXWMQQ6DIBQFuf8Vu60NFYGiFT8IfxrdNbWTvM1k8sy8vMlSmFch54yIoKo/M27yhLQyhI29FlS5DkfnmXwkuOf5dvA3jDHxGi17rae8wtxt4uEWbrZTSqX3Tmvta4f7ADn9w3INhVNBAAAAAElFTkSuQmCC"}},89159:(t,e,n)=>{t.exports={src:{srcSet:n.p+"assets/ideal-img/custom-config2.0e46056.1024.png 1024w,"+n.p+"assets/ideal-img/custom-config2.b5012d0.1576.png 1576w",images:[{path:n.p+"assets/ideal-img/custom-config2.0e46056.1024.png",width:1024,height:606},{path:n.p+"assets/ideal-img/custom-config2.b5012d0.1576.png",width:1576,height:933}],src:n.p+"assets/ideal-img/custom-config2.0e46056.1024.png",toString:function(){return n.p+"assets/ideal-img/custom-config2.0e46056.1024.png"},placeholder:void 0,width:1024,height:606},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAXUlEQVQImX2PWwqAMAwEc/+jik0faa0QkxWr4I91YVgCQ2CpSkXvO1rbcKjC3WFmMLv6hTgmFGlQ1SHMQmtg5CLj8Av3T4g5IuVyixNpiAsLQrw//oVyFtS2PwPmnIBa7Hk3HszPAAAAAElFTkSuQmCC"}},66473:(t,e,n)=>{"use strict";n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>m,default:()=>N,frontMatter:()=>d,metadata:()=>g,toc:()=>k});var a=n(87462),i=(n(67294),n(3905)),l=n(15944),o=n(84654),r=n.n(o),s=n(89159),p=n.n(s);const d={id:"custom-config",sidebar_position:5,description:"\u63d2\u4ef6\u53ef\u89c6\u5316\u7684\u914d\u7f6e\u4fee\u6539\u65b9\u5f0f\u3002"},m="\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e",g={unversionedId:"abilities/basic/custom-config",id:"abilities/basic/custom-config",title:"\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e",description:"\u63d2\u4ef6\u53ef\u89c6\u5316\u7684\u914d\u7f6e\u4fee\u6539\u65b9\u5f0f\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/abilities/basic/custom-config.mdx",sourceDirName:"abilities/basic",slug:"/abilities/basic/custom-config",permalink:"/zh-CN/docs/next/abilities/basic/custom-config",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1690791943,formattedLastUpdatedAt:"2023\u5e747\u670831\u65e5",sidebarPosition:5,frontMatter:{id:"custom-config",sidebar_position:5,description:"\u63d2\u4ef6\u53ef\u89c6\u5316\u7684\u914d\u7f6e\u4fee\u6539\u65b9\u5f0f\u3002"},sidebar:"abilities",previous:{title:"\u901a\u77e5",permalink:"/zh-CN/docs/next/abilities/basic/notifications"},next:{title:"\u83b7\u53d6\u63d2\u4ef6\u80fd\u529b\u914d\u7f6e",permalink:"/zh-CN/docs/next/abilities/basic/ability-config"}},u={},k=[{value:"\u8981\u6c42",id:"\u8981\u6c42",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"1. \u5728<code>\u57fa\u672c\u4fe1\u606f</code>\u9009\u9879\u5361\u4e2d\u6dfb\u52a0",id:"1-\u5728\u57fa\u672c\u4fe1\u606f\u9009\u9879\u5361\u4e2d\u6dfb\u52a0",level:3},{value:"\u7ed9\u63d2\u4ef6\u6dfb\u52a0\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879",id:"\u7ed9\u63d2\u4ef6\u6dfb\u52a0\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879",level:4},{value:"\u63d2\u4ef6\u540e\u7aef\u83b7\u53d6\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879",id:"\u63d2\u4ef6\u540e\u7aef\u83b7\u53d6\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879",level:4},{value:"\u901a\u8fc7\u8c03\u7528 SDK \u65b9\u6cd5\u83b7\u53d6",id:"\u901a\u8fc7\u8c03\u7528-sdk-\u65b9\u6cd5\u83b7\u53d6",level:5},{value:"\u901a\u8fc7 ONES \u63a5\u53e3\u8bbf\u95ee \u83b7\u53d6",id:"\u901a\u8fc7-ones-\u63a5\u53e3\u8bbf\u95ee-\u83b7\u53d6",level:5},{value:"2. \u5728\u65b0\u5efa\u9009\u9879\u5361\u4e2d\u6dfb\u52a0",id:"2-\u5728\u65b0\u5efa\u9009\u9879\u5361\u4e2d\u6dfb\u52a0",level:3},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2}],c={toc:k};function N(t){let{components:e,...n}=t;return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e"},"\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e"),(0,i.kt)("h2",{id:"\u8981\u6c42"},"\u8981\u6c42"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"ONES"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"v3.6.0+")))),(0,i.kt)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,i.kt)("p",null,"\u901a\u8fc7\u4e0b\u9762\u4e24\u79cd\u65b9\u5f0f\uff0c\u63d2\u4ef6\u53ef\u4ee5\u4f7f\u7528\u8be5\u80fd\u529b\u5728",(0,i.kt)("inlineCode",{parentName:"p"},"\u914d\u7f6e\u4e2d\u5fc3 -> \u63d2\u4ef6\u7ba1\u7406"),"\u4e0b\u81ea\u5b9a\u4e49\u6dfb\u52a0\u63d2\u4ef6\u7684\u914d\u7f6e\u9879\uff1a"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"\u57fa\u672c\u4fe1\u606f")," \u9009\u9879\u5361")),(0,i.kt)("p",null,"\u6bcf\u4e2a\u63d2\u4ef6\u7684\u8be6\u60c5\u9875\u9762\u4e2d\u5305\u542b\u4e86\u914d\u7f6e\u9879\u7684\u503c\u3002\u5728\u63d2\u4ef6\u672a\u542f\u7528\u65f6\uff0c\u53ef\u4ee5\u4fee\u6539\u914d\u7f6e\u9879\u7684\u503c\u3002\n\u914d\u7f6e\u9879\u7684\u7c7b\u578b\u652f\u6301\u5355\u884c\uff0c\u591a\u884c\u6587\u672c\uff0c\u5bc6\u7801\u6587\u672c\u4e09\u79cd\u7c7b\u578b\uff0c\u5176\u4e2d\u5982\u679c\u6709\u5fc5\u586b\u9879\uff0c\u4e14\u6ca1\u6709\u586b\u5199\uff0c\u5219\u65e0\u6cd5\u542f\u7528\u63d2\u4ef6\u3002"),(0,i.kt)(l.Z,{img:r(),mdxType:"Image"}),(0,i.kt)("p",null,"\u5e76\u4e14\u63d2\u4ef6\u540e\u7aef\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 API \u83b7\u53d6\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879\u7684\u6570\u636e\u3002"),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"\u65b0\u5efa\u9009\u9879\u5361")),(0,i.kt)(l.Z,{img:p(),mdxType:"Image"}),(0,i.kt)("p",null,"\u4f60\u53ef\u4ee5\u5728",(0,i.kt)("inlineCode",{parentName:"p"},"\u65e5\u5fd7"),"\u9009\u9879\u5361\u524d\u9762\u6dfb\u52a0\u4e00\u4e2a\u63d2\u69fd\u3002\u5728\u63d2\u69fd\u4e2d\u4f60\u9700\u8981\u81ea\u5b9a\u4e49\u6e32\u67d3\u914d\u7f6e\u9875\u9762\uff0c\u5e76\u786e\u5b9a\u5982\u4f55\u5b58\u50a8\u548c\u83b7\u53d6\u8fd9\u4e9b\u914d\u7f6e\u6570\u636e\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e2a\u9009\u9879\u5361\u53ea\u6709\u5728\u63d2\u4ef6\u542f\u7528\u540e\u624d\u80fd\u8bbf\u95ee\u3002"),(0,i.kt)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,i.kt)("h3",{id:"1-\u5728\u57fa\u672c\u4fe1\u606f\u9009\u9879\u5361\u4e2d\u6dfb\u52a0"},"1. \u5728",(0,i.kt)("inlineCode",{parentName:"h3"},"\u57fa\u672c\u4fe1\u606f"),"\u9009\u9879\u5361\u4e2d\u6dfb\u52a0"),(0,i.kt)("h4",{id:"\u7ed9\u63d2\u4ef6\u6dfb\u52a0\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879"},"\u7ed9\u63d2\u4ef6\u6dfb\u52a0\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u63d2\u4ef6\u914d\u7f6e\u9879\u5b57\u6bb5\u8bf4\u660e")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027"),(0,i.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"),(0,i.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,i.kt)("th",{parentName:"tr",align:null},"\u5fc5\u586b"),(0,i.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"key"),(0,i.kt)("td",{parentName:"tr",align:null},"\u552f\u4e00\u6807\u8bc6"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"\u662f"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"type"),(0,i.kt)("td",{parentName:"tr",align:null},"\u914d\u7f6e\u7c7b\u578b",(0,i.kt)("br",null)," ",(0,i.kt)("inlineCode",{parentName:"td"},"Input"),": \u5355\u884c\u8f93\u5165\u6846 ",(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},"TextArea"),": \u591a\u884c\u8f93\u5165\u6846",(0,i.kt)("br",null)," ",(0,i.kt)("inlineCode",{parentName:"td"},"Password"),": \u5bc6\u7801\u8f93\u5165\u6846"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"\u662f"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"required"),(0,i.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u5fc5\u586b"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"\u5426"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"false"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"label"),(0,i.kt)("td",{parentName:"tr",align:null},"\u522b\u540d"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"\u5426"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"key"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"value"),(0,i.kt)("td",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"\u5426"),(0,i.kt)("td",{parentName:"tr",align:null})))),(0,i.kt)("p",null,"\u5728\u63d2\u4ef6\u914d\u7f6e\u6587\u4ef6",(0,i.kt)("inlineCode",{parentName:"p"},"plugin.yaml"),"\u4e0b\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"config"),"\u5b57\u6bb5\u6dfb\u52a0\u9700\u8981\u7684\u5185\u5bb9\uff0c\u5373\u53ef\u4e3a\u63d2\u4ef6\u65b0\u589e\u914d\u7f6e\u9879",(0,i.kt)("strong",{parentName:"p"},"cexampleConfigKey"),"\uff0c\u7c7b\u578b\u4e3a\u5355\u884c\u8f93\u5165\u6846\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/plugin.yaml"',title:'"config/plugin.yaml"'},"service:\n  config:\n    - key: exampleConfigKey\n      label: my example key\n      type: Input\n")),(0,i.kt)("h4",{id:"\u63d2\u4ef6\u540e\u7aef\u83b7\u53d6\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879"},"\u63d2\u4ef6\u540e\u7aef\u83b7\u53d6\u63d2\u4ef6\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879"),(0,i.kt)("h5",{id:"\u901a\u8fc7\u8c03\u7528-sdk-\u65b9\u6cd5\u83b7\u53d6"},"\u901a\u8fc7\u8c03\u7528 SDK \u65b9\u6cd5\u83b7\u53d6"),(0,i.kt)("p",null,"\u901a\u8fc7",(0,i.kt)("inlineCode",{parentName:"p"},"@ones-op/node-ability"),"\u5305\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"Plugin.getPluginConfig()"),"\u76f4\u63a5\u83b7\u53d6\u63d2\u4ef6\u914d\u7f6e"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Plugin } from '@ones-op/node-ability'\n\nexport async function configurationPageTest1() {\n  const configs = await Plugin.getPluginConfig()\n}\n")),(0,i.kt)("h5",{id:"\u901a\u8fc7-ones-\u63a5\u53e3\u8bbf\u95ee-\u83b7\u53d6"},"\u901a\u8fc7 ",(0,i.kt)("a",{parentName:"h5",href:"/zh-CN/docs/next/abilities/business/ONES-API/ONES-API-access"},"ONES \u63a5\u53e3\u8bbf\u95ee")," \u83b7\u53d6"),(0,i.kt)("p",null,"\u6309\u4ee5\u4e0b\u4ee3\u7801\u53ca\u53c2\u6570\u6784\u9020",(0,i.kt)("inlineCode",{parentName:"p"},"fetchONES"),"\u5165\u53c2\u8fdb\u884c\u63a5\u53e3\u8bbf\u95ee\uff0c\u5373\u53ef\u4ece\u8fd4\u56de\u503c\u4e2d\u83b7\u53d6\u63d2\u4ef6\u914d\u7f6e\u9879\u76f8\u5173\u4fe1\u606f\u3002"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u6ce8\u610f\uff0c\u9700\u8981\u5c06\u8fd4\u56de\u53c2\u6570\u8f6c\u6210 json \u683c\u5f0f\uff0c\u7136\u540e\u4ece json \u6570\u7ec4\u4e2d\u83b7\u53d6\u5230\u914d\u7f6e\u9879\u7684\u76f8\u5173\u4fe1\u606f\u3002")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"import { fetchONES } from '@ones-op/node-fetch'\n\nexport async function configurationPageTest2() {\n  const response = await fetchONES({\n    path: `/team/${globalThis.onesEnv.teamUUID}`,\n    method: 'POST',\n    headers: {\n      'Ones-Plugin-Id': ['built_in_apis'],\n      'Ones-Check-Point': ['team'],\n      'Ones-Check-Id': [`${globalThis.onesEnv.teamUUID}`],\n      'AbilityName': ['ConfigList'],\n    },\n    body: {\n      instance_id: `${globalThis.onesEnv.instanceId}`,\n      team_uuid: `${globalThis.onesEnv.teamUUID}`,\n      organization_uuid: `${globalThis.onesEnv.organizationUUID}`,\n    },\n  })\n  //@ts-ignore\n  const byteBody = response?.body || {}\n  console.log(byteBody)\n\n  const stringBody = byteBody.toString()\n  const JSONBody = JSON.parse(stringBody)\n\n  for (let i = 0; i < JSONBody.length; i++) {\n    Logger.info(JSONBody[i]['arg_key']) //\u83b7\u53d6\u914d\u7f6e\u9879\u7684key\u503c\n    Logger.info(JSONBody[i]['arg_value']) //\u83b7\u53d6\u914d\u7f6e\u9879\u7684value\u503c\n  }\n\n  return {\n    body: response?.body.toString(),\n  }\n}\n")),(0,i.kt)("h3",{id:"2-\u5728\u65b0\u5efa\u9009\u9879\u5361\u4e2d\u6dfb\u52a0"},"2. \u5728\u65b0\u5efa\u9009\u9879\u5361\u4e2d\u6dfb\u52a0"),(0,i.kt)("p",null,"\u5728\u63d2\u4ef6\u5de5\u7a0b\u76ee\u5f55\u4e0b\u6267\u884c ",(0,i.kt)("inlineCode",{parentName:"p"},"npx op add module")," \u6307\u4ee4\uff0c\u5e76\u9009\u62e9\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"settings"),"\u3002"),(0,i.kt)("p",null,"\u6267\u884c\u5b8c\u6210\u540e\uff0c\u4f1a\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"plugin.yaml")," \u914d\u7f6e\u6587\u4ef6\u7684 ",(0,i.kt)("strong",{parentName:"p"},"modules")," \u5c5e\u6027\u4e0b\u65b0\u589e\u4e00\u6bb5\u914d\u7f6e\u3002\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"modules:\n  - id: settings-1cGv\n    title: Settings\n    moduleType: settings\n    entry: modules/settings-1cGv/index.html\n")),(0,i.kt)("p",null,"\u73b0\u5728\u4f60\u53ef\u4ee5\u5f00\u59cb\u7f16\u5199\u4f60\u7684\u914d\u7f6e\u9875\u9762\u4e86\u3002"),(0,i.kt)("h2",{id:"\u5e38\u89c1\u95ee\u9898"},"\u5e38\u89c1\u95ee\u9898"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u63d2\u4ef6\u5347\u7ea7\u5e76\u4fee\u6539\u539f\u6765\u7684\u58f0\u660e\u8fc7\u7684\u63d2\u4ef6\u914d\u7f6e\u6ca1\u6709\u751f\u6548"),(0,i.kt)("p",{parentName:"li"},"\u63d2\u4ef6\u5347\u7ea7\u65f6\u4e0d\u652f\u6301\u4fee\u6539\u5df2\u6709\u7684\u63d2\u4ef6\u914d\u7f6e\u58f0\u660e\uff0c\u5177\u4f53\u53ef\u53c2\u8003",(0,i.kt)("a",{parentName:"p",href:"../../guide/upgrade#%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE---serviceconfig"},"\u63d2\u4ef6\u5347\u7ea7"),"\u3002"))))}N.isMDXComponent=!0}}]);