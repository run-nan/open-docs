(self.webpackChunkopen_docs=self.webpackChunkopen_docs||[]).push([[27642],{5628:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/p1.cecf075.988.png 988w",images:[{path:t.p+"assets/ideal-img/p1.cecf075.988.png",width:988,height:120}],src:t.p+"assets/ideal-img/p1.cecf075.988.png",toString:function(){return t.p+"assets/ideal-img/p1.cecf075.988.png"},placeholder:void 0,width:988,height:120},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAYAAADn9T9+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAALUlEQVQImQXBgQ0AEAxFQRtpKZr80P2neu5a5aEyeXm4e6EIFBOtQHOwrWPufEfHEFlQqyN+AAAAAElFTkSuQmCC"}},60066:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/p2.08db1ca.1024.png 1024w,"+t.p+"assets/ideal-img/p2.fd628d5.1456.png 1456w",images:[{path:t.p+"assets/ideal-img/p2.08db1ca.1024.png",width:1024,height:526},{path:t.p+"assets/ideal-img/p2.fd628d5.1456.png",width:1456,height:748}],src:t.p+"assets/ideal-img/p2.08db1ca.1024.png",toString:function(){return t.p+"assets/ideal-img/p2.08db1ca.1024.png"},placeholder:void 0,width:1024,height:526},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZElEQVQImXWNAQoDMQgE8//PRk2MZzXZclLaUqgwII7sts6KTgKRgamGORUkCyQGM0dEICLR6kgMkoFljxKZiZpzcF60TgydC/u6bvMWe3/2erwrdQxsd2TuvzQXhjNV4nfCL08fCMP52b7rcwAAAABJRU5ErkJggg=="}},26400:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/p3.faddffd.672.png 672w",images:[{path:t.p+"assets/ideal-img/p3.faddffd.672.png",width:672,height:122}],src:t.p+"assets/ideal-img/p3.faddffd.672.png",toString:function(){return t.p+"assets/ideal-img/p3.faddffd.672.png"},placeholder:void 0,width:672,height:122},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAACCAYAAABhYU3QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOklEQVQImT3LyQkAIAxEUUvKYhYk/bc1YlBPj4E/Y66FqoKZQVUhIl9mBhG1Q9wREcjM1u8+xxO/cAMTriArp5alzwAAAABJRU5ErkJggg=="}},44313:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>u,default:()=>b,frontMatter:()=>A,metadata:()=>c,toc:()=>h});var s=t(87462),a=(t(67294),t(3905)),i=t(15944),l=t(5628),r=t.n(l),p=t(60066),d=t.n(p),o=t(26400),g=t.n(o);const A={sidebar_position:17,description:"\u77ed\u4fe1\u63a5\u53d7\u901a\u77e5\u4fe1\u606f"},u="\u77ed\u4fe1\u63a5\u53d7\u901a\u77e5\u4fe1\u606f",c={unversionedId:"abilities/business/send-short-message/send-short-message",id:"abilities/business/send-short-message/send-short-message",title:"\u77ed\u4fe1\u63a5\u53d7\u901a\u77e5\u4fe1\u606f",description:"\u77ed\u4fe1\u63a5\u53d7\u901a\u77e5\u4fe1\u606f",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/abilities/business/send-short-message/send-short-message.mdx",sourceDirName:"abilities/business/send-short-message",slug:"/abilities/business/send-short-message/",permalink:"/open-docs/zh-CN/docs/next/abilities/business/send-short-message/",draft:!1,tags:[],version:"current",lastUpdatedBy:"liupengfei",lastUpdatedAt:1690862808,formattedLastUpdatedAt:"2023\u5e748\u67081\u65e5",sidebarPosition:17,frontMatter:{sidebar_position:17,description:"\u77ed\u4fe1\u63a5\u53d7\u901a\u77e5\u4fe1\u606f"},sidebar:"abilities",previous:{title:"\u5168\u5c4f\u5c55\u793a",permalink:"/open-docs/zh-CN/docs/next/abilities/business/full-screen"}},m={},h=[{value:"\u8981\u6c42",id:"\u8981\u6c42",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u7b2c\u4e00\u6b65\uff1a \u6dfb\u52a0\u80fd\u529b",id:"\u7b2c\u4e00\u6b65-\u6dfb\u52a0\u80fd\u529b",level:3},{value:"\u7b2c\u4e8c\u6b65\uff1a \u6dfb\u52a0 external \u8def\u7531",id:"\u7b2c\u4e8c\u6b65-\u6dfb\u52a0-external-\u8def\u7531",level:3},{value:"\u7b2c\u4e09\u6b65\uff1a \u672c\u5730\u5b89\u88c5\u63d2\u4ef6\u5e76\u8bf7\u6c42\u6dfb\u52a0\u7684 external \u63a5\u53e3",id:"\u7b2c\u4e09\u6b65-\u672c\u5730\u5b89\u88c5\u63d2\u4ef6\u5e76\u8bf7\u6c42\u6dfb\u52a0\u7684-external-\u63a5\u53e3",level:3},{value:"\u7b2c\u56db\u6b65\uff1a \u521b\u5efa\u4e00\u4e2a\u8d26\u53f7\uff0c\u5e76\u7ed9\u8fd9\u4e2a\u8d26\u53f7\u7ed1\u5b9a\u4e00\u4e2a\u624b\u673a\u53f7\u7801",id:"\u7b2c\u56db\u6b65-\u521b\u5efa\u4e00\u4e2a\u8d26\u53f7\u5e76\u7ed9\u8fd9\u4e2a\u8d26\u53f7\u7ed1\u5b9a\u4e00\u4e2a\u624b\u673a\u53f7\u7801",level:3},{value:"\u7b2c\u4e94\u6b65\uff1a \u4f7f\u7528\u7ba1\u7406\u5458\u8d26\u53f7\u767b\u91cc\u7cfb\u7edf\uff0c\u5728\u521b\u5efa\u4efb\u52a1\u7684\u6d88\u606f\u901a\u77e5\u4e2d\u9009\u4e2d\u77ed\u4fe1\uff0c\u5e76\u4e14\u628a\u65b0\u521b\u5efa\u7684\u7528\u6237\u52a0\u5230\u6210\u5458\u5217\u8868\u4e2d",id:"\u7b2c\u4e94\u6b65-\u4f7f\u7528\u7ba1\u7406\u5458\u8d26\u53f7\u767b\u91cc\u7cfb\u7edf\u5728\u521b\u5efa\u4efb\u52a1\u7684\u6d88\u606f\u901a\u77e5\u4e2d\u9009\u4e2d\u77ed\u4fe1\u5e76\u4e14\u628a\u65b0\u521b\u5efa\u7684\u7528\u6237\u52a0\u5230\u6210\u5458\u5217\u8868\u4e2d",level:3},{value:"\u7b2c\u516d\u6b65\uff1a \u521b\u5efa\u4efb\u52a1",id:"\u7b2c\u516d\u6b65-\u521b\u5efa\u4efb\u52a1",level:3}],k={toc:h};function b(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,s.Z)({},k,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u77ed\u4fe1\u63a5\u53d7\u901a\u77e5\u4fe1\u606f"},"\u77ed\u4fe1\u63a5\u53d7\u901a\u77e5\u4fe1\u606f"),(0,a.kt)("h2",{id:"\u8981\u6c42"},"\u8981\u6c42"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"ONES"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"v3.12.0+")))),(0,a.kt)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,a.kt)("p",null,'\u5728\u901a\u77e5\u65b9\u5f0f\u4e2d\uff0c\u53ea\u9700\u8981\u6211\u4eec\u5f00\u542f\u4e86\u77ed\u4fe1\u53d1\u9001\u80fd\u529b\u7684\u76f8\u5173\u914d\u7f6e\uff0c\u5c31\u53ef\u9009\u62e9"\u77ed\u4fe1"\u7684\u53d1\u9001\u6e20\u9053\uff0c\u5177\u4f53\u5982\u4f55\u914d\u7f6e\u53ef\u53c2\u8003',(0,a.kt)("a",{parentName:"p",href:"https://guide.ones.pro/wiki/#/team/LBrdb4wE/space/6XDAYB1a/page/Y9T5GFQn"},"\u5f00\u542f\u77ed\u4fe1\u53d1\u9001")," \uff0c\u8981\u5f00\u542f\u4ee5\u4e0a\u914d\u7f6e\uff0c\u6211\u4eec\u9700\u8981\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u670d\u52a1\u53bb\u627f\u8f7d\u77ed\u4fe1\u4fe1\u606f\u7684\u63a5\u6536\u8ddf\u53d1\u9001\uff0c\u800c\u4e14\u8fd8\u8981\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u7ef4\u62a4\uff0c\u8fd9\u79cd\u6a21\u5f0f\u6210\u672c\u5f80\u5f80\u6bd4\u8f83\u9ad8\uff0c\u5982\u679c\u901a\u8fc7\u63d2\u4ef6\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u8fd9\u79cd\u77ed\u4fe1\u7684\u53d1\u9001\u7cfb\u7edf\uff0c\u5ba2\u6237\u5c31\u4e0d\u9700\u8981\u5173\u5fc3\u670d\u52a1\u7684\u8fd0\u7ef4\uff0c\u800c\u63d2\u4ef6\u7684\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5173\u5fc3\u63a5\u6536\u5230\u63d2\u4ef6\u7684\u5185\u5bb9\u8ddf\u63a5\u53d7\u77ed\u4fe1\u7684\u4eba\u7684\u53f7\u7801\u540e\uff0c\u518d\u8fdb\u884c\u77ed\u4fe1\u7684\u8f6c\u53d1\u5373\u53ef\uff0c\u77ed\u4fe1\u7684\u8f6c\u53d1\u903b\u8f91\u7531\u63d2\u4ef6\u81ea\u884c\u5904\u7406\uff0c\u8981\u6ce8\u610f\u7684\u662f\u8be5\u80fd\u529b\u53ea\u652f\u6301\u5355\u56e2\u961f\u7684\u7ec4\u7ec7\uff0c\u5e76\u4e0d\u652f\u6301\u591a\u56e2\u961f\u7684\u7ec4\u7ec7\uff0c\u4e14\u5728\u8be5\u56e2\u961f\u4e0b\u53ea\u80fd\u6709\u4e00\u4e2a\u63d2\u4ef6\u4f7f\u7528\u4e86\u8be5\u80fd\u529b\u3002"),(0,a.kt)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,a.kt)("h3",{id:"\u7b2c\u4e00\u6b65-\u6dfb\u52a0\u80fd\u529b"},"\u7b2c\u4e00\u6b65\uff1a \u6dfb\u52a0\u80fd\u529b"),(0,a.kt)("p",null,"\u5728\u63d2\u4ef6\u5de5\u7a0b\u6839\u76ee\u5f55\u4e0b\u6267\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"npx op add ability")," \u6307\u4ee4\uff0c\u5e76\u9009\u62e9\uff1a",(0,a.kt)("inlineCode",{parentName:"p"},"send-short-message@1.0.0"),"\u3002"),(0,a.kt)("p",null,"\u6267\u884c\u5b8c\u6210\u540e\uff0c\u4f1a\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"plugin.yaml")," \u914d\u7f6e\u6587\u4ef6\u7684 ",(0,a.kt)("strong",{parentName:"p"},"abilities")," \u5c5e\u6027\u4e0b\u65b0\u589e\u4e00\u6bb5\u914d\u7f6e\u3002\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"abilities:\n  - id: xxxxxx\n    name: SendShortMessage\n    version: 1.0.0\n    abilityType: send_short_message\n    function:\n      sendShortMessage: SendShortMessage\n")),(0,a.kt)("p",null,"\u540e\u7aef\u4ee3\u7801\u4f1a\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"export async function SendShortMessage(request: PluginRequest): Promise<PluginResponse> {\n  return {\n    body: {\n      code: 200,\n      ResponseModel: 'Plugin.SendShortMessage',\n      Reason: 'Success',\n      Type: null,\n      Body: null,\n    },\n  }\n}\n")),(0,a.kt)("p",null,"\u4ee5\u4e0a\u4ee3\u7801\u7528\u4e8e\u63a5\u6536\u77ed\u4fe1\u4fe1\u606f\uff0c\u4e00\u65e6\u89e6\u53d1\u4e86\u9700\u8981\u53d1\u9001\u77ed\u4fe1\u7684\u573a\u666f\uff0c\u5c31\u4f1a\u628a\u77ed\u4fe1\u4e0a\u4e0b\u6587\u8f6c\u53d1\u5230\u8be5\u51fd\u6570\uff0c\u5305\u62ec\u77ed\u4fe1\u7684\u5185\u5bb9\uff0c\u9700\u8981\u63a5\u6536\u8fd9\u6761\u77ed\u4fe1\u7684\u7528\u6237\u7684\u53f7\u7801\uff0c\u5206\u522b\u5728 request \u4e2d\u7684 body \u4e2d\u7684 content\uff0cphone_numbers \u53c2\u6570\u3002"),(0,a.kt)("h3",{id:"\u7b2c\u4e8c\u6b65-\u6dfb\u52a0-external-\u8def\u7531"},"\u7b2c\u4e8c\u6b65\uff1a \u6dfb\u52a0 external \u8def\u7531"),(0,a.kt)("p",null,"\u8be5\u8def\u7531\u4e3b\u8981\u8d77\u5230\u5f00\u542f\u77ed\u4fe1\u914d\u7f6e\u7684\u4f5c\u7528\uff0c\u56e0\u4e3a\u53ea\u6709\u5f00\u542f\u77ed\u4fe1\u914d\u7f6e\uff0c\u624d\u80fd\u5728\u6d88\u606f\u901a\u77e5\u4e2d\u9009\u62e9\u77ed\u4fe1\u3002"),(0,a.kt)("p",null,"plugin.yaml \u6587\u4ef6\u4e2d\u7684 apis \u5b57\u6bb5\u65b0\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"apis:\n  - type: external\n    methods:\n      - POST\n    url: /team/:teamUUID/open_send_short_message\n    function: OpenSendShortMessage\n")),(0,a.kt)("p",null,"\u540e\u7aef\u6587\u4ef6\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"export async function OpenSendShortMessage(request: PluginRequest): Promise<PluginResponse> {\n  // \u67e5\u8be2sms_config\u63a5\u53e3${globalThis.onesEnv.teamUUID\n  const response = await fetchONES({\n    path: `/organization/${globalThis.onesEnv.organizationUUID}/sms_config`,\n    method: 'GET',\n    root: true, //\u9ed8\u8ba4\u4e3atrue\n  })\n  Logger.info('resp:', response)\n  const { uuid, channel_uuid } = response?.body as any\n\n  // \u8c03\u7528\u5f00\u542f\u914d\u7f6e\u63a5\u53e3\n  const response2 = await fetchONES({\n    path: `/organization/${globalThis.onesEnv.organizationUUID}/sms_config/update`,\n    method: 'POST',\n    body: {\n      uuid: uuid,\n      url: '-',\n      token: '-',\n      enable_bind: 1,\n      enable_notice: 1,\n      channel_uuid: channel_uuid,\n    },\n    root: true,\n  })\n  Logger.info('resp:', response2)\n\n  return {\n    body: {\n      res: 'success',\n    },\n  }\n}\n")),(0,a.kt)("h3",{id:"\u7b2c\u4e09\u6b65-\u672c\u5730\u5b89\u88c5\u63d2\u4ef6\u5e76\u8bf7\u6c42\u6dfb\u52a0\u7684-external-\u63a5\u53e3"},"\u7b2c\u4e09\u6b65\uff1a \u672c\u5730\u5b89\u88c5\u63d2\u4ef6\u5e76\u8bf7\u6c42\u6dfb\u52a0\u7684 external \u63a5\u53e3"),(0,a.kt)("h3",{id:"\u7b2c\u56db\u6b65-\u521b\u5efa\u4e00\u4e2a\u8d26\u53f7\u5e76\u7ed9\u8fd9\u4e2a\u8d26\u53f7\u7ed1\u5b9a\u4e00\u4e2a\u624b\u673a\u53f7\u7801"},"\u7b2c\u56db\u6b65\uff1a \u521b\u5efa\u4e00\u4e2a\u8d26\u53f7\uff0c\u5e76\u7ed9\u8fd9\u4e2a\u8d26\u53f7\u7ed1\u5b9a\u4e00\u4e2a\u624b\u673a\u53f7\u7801"),(0,a.kt)("p",null,"\u5f53\u6211\u4eec\u5728\u7ed1\u5b9a\u9875\u9762\u4e2d\uff0c\u586b\u5199\u597d\u7535\u8bdd\u53f7\u7801\uff0c\u518d\u70b9\u51fb\u53d1\u9001\u9a8c\u8bc1\u7801\u65f6\uff0c\u5982\u679c\u6211\u4eec\u5728\u63d2\u4ef6\u628a OpenSendShortMessage \u51fd\u6570\u4e2d\u7684 request \u6253\u5370\u51fa\u6765\uff0c\u5c31\u4f1a\u770b\u5230\u4e0b\u9762\u7684\u7ed3\u679c\uff1a"),(0,a.kt)(i.Z,{img:r(),mdxType:"Image"}),"\u53d1\u9001\u9a8c\u8bc1\u7801\u4e4b\u6240\u4ee5\u4f1a\u89e6\u53d1\u8be5\u51fd\u6570\uff0c\u662f\u56e0\u4e3a\u53ea\u8981\u7cfb\u7edf\u4e2d\u6709\u9700\u8981\u53d1\u9001\u77ed\u4fe1\u7684\u573a\u666f\uff0c\u90fd\u53ef\u901a\u8fc7\u8be5\u80fd\u529b\u62e6\u622a\u5230\u77ed\u4fe1\u7684\u5185\u5bb9\u8ddf\u9700\u8981\u63a5\u53d7\u7684\u7528\u6237\u7684\u53f7\u7801\uff0c\u56e0\u4e3a\u53d1\u9001\u9a8c\u8bc1\u7801\u4e5f\u662f\u4e00\u4e2a\u8c03\u7528\u77ed\u4fe1\u7684\u573a\u666f\uff0c\u6240\u4ee5\u4f1a\u89e6\u53d1\u63d2\u4ef6\u8be5\u51fd\u6570\uff0c\u6839\u636e\u9a8c\u8bc1\u7801\u7ed1\u5b9a\u597d\u624b\u673a\u53f7\u7801\u5373\u53ef\u3002",(0,a.kt)("h3",{id:"\u7b2c\u4e94\u6b65-\u4f7f\u7528\u7ba1\u7406\u5458\u8d26\u53f7\u767b\u91cc\u7cfb\u7edf\u5728\u521b\u5efa\u4efb\u52a1\u7684\u6d88\u606f\u901a\u77e5\u4e2d\u9009\u4e2d\u77ed\u4fe1\u5e76\u4e14\u628a\u65b0\u521b\u5efa\u7684\u7528\u6237\u52a0\u5230\u6210\u5458\u5217\u8868\u4e2d"},"\u7b2c\u4e94\u6b65\uff1a \u4f7f\u7528\u7ba1\u7406\u5458\u8d26\u53f7\u767b\u91cc\u7cfb\u7edf\uff0c\u5728\u521b\u5efa\u4efb\u52a1\u7684\u6d88\u606f\u901a\u77e5\u4e2d\u9009\u4e2d\u77ed\u4fe1\uff0c\u5e76\u4e14\u628a\u65b0\u521b\u5efa\u7684\u7528\u6237\u52a0\u5230\u6210\u5458\u5217\u8868\u4e2d"),(0,a.kt)(i.Z,{img:d(),mdxType:"Image"}),(0,a.kt)("h3",{id:"\u7b2c\u516d\u6b65-\u521b\u5efa\u4efb\u52a1"},"\u7b2c\u516d\u6b65\uff1a \u521b\u5efa\u4efb\u52a1"),(0,a.kt)("p",null,"\u521b\u5efa\u4efb\u52a1\u540e\uff0c\u5c31\u80fd\u5728\u63d2\u4ef6\u6536\u5230\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,a.kt)(i.Z,{img:g(),mdxType:"Image"}))}b.isMDXComponent=!0}}]);